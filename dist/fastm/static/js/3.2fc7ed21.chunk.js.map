{"version":3,"sources":["utils/timer.ts","components/ludan/LudanMenu.tsx","components/ludan/index.tsx","components/game-header/index.tsx","game/gameMethods.ts","components/method-menu/index.tsx","components/sub-method-menu/index.tsx","components/grid/row.tsx","components/grid/col.tsx","components/play/index.tsx","game/base.ts","game/calc.ts","utils/game.ts","components/order-bar/index.tsx","context/gameContext.ts","components/limit-set-dialog/index.tsx","views/game/index.tsx"],"names":["Timer","time","fn","step","timerItval","this","start","window","setInterval","clearInterval","LundanMenu","inject","observer","props","myScrollRef","changeMenu","menu","updateMenu","React","createRef","Bus","emit","selectedMenu","document","querySelector","current","bscroll","scrollToElement","nextProps","refresh","selectedItem","className","ref","tabs","length","map","i","key","name","onClick","title","Component","Ludan","state","setState","updateLudanList","ludanList","getLuDanListByMethod","issueList","slice","gameType","maxRows","maxColumns","getAllTabsByTypeAndName","methodMenuName","defaultMenu","isShowLudanMenu","LudanMenu","LundanTable","GameHeader","curIssue","curTime","onLimitLevelChanged","value","store","game","updateGamesLimitLevel","gameId","level","parseInt","curGameLimitLevel","onLudanHandler","update","type","data","isExpandLudan","limitItem","getLimitListItemById","getGameLimitLevelByGameId","timer","remainTime","hours","minutes","seconds","limitLevelList","kqPrizeLimit","tipText","initTimer","stateData","timeStr","times","close","Math","floor","t","getNewestIssue","timeFormat","split","clearTimer","LOTTERY_TYPES","HC6","num","isHc6","String","padStart","getAnimalByNum","lastIssue","openNumbers","renderOpenNumbers","hz","params","Object","assign","dx","ds","lh","methodsConfig","SSC","ename","recentType","min","ids","range","end","G11X5","subMethods","s","v","oddIndex","class","mid","odd","recentChild","PK10","changeTitle","K3","noOdd","getMethodsConfigByType","MethodMenu","onMenuHandler","index","updateMethodMenuIndex","methodMenuChangedCB","menus","subMenus","nextState","curMenuIndex","SubMethodMenu","methodItems","onSubMethodHandler","subMethod","console","log","JSON","stringify","updateSubMethods","updateSubMethodMenuIndex","id","methodOdds","odds","parseId","maxprize","sm","curSubMenuIndex","bind","getOddById","Row","children","PureComponent","Col","styl","gutter","padding","span","style","getStyle","Play","onMethodItemHandler","j","k","selected","methodTypeName","event","amount","defaultInitMethodItemAmount","includes","updateMethodItem","onRowClickHandler","updateMethodRow","forceUpdate","curGameMethodItems","methodItem","layout","rows","row","col","hidePos","n","subpn","posOdd","vs","vsItem","e","icons","iconNum","m","noodd","C","ceil","factorial","permutationChoice","A","nsl","forEach","nl","repeatCount","P","ns","f","countRepeat","temp","join","filter","Array","from","Set","ORDER_BAR_CONTAINER_CLASS","CALC_BET_NEED_COMPUTED_REPEAT","OrderBar","calc","orderBarContainer","coinChoosed","user","balance","updateDefaultInitMethodItemAmount","onResetHandler","alert","text","onPress","resetSelectedOfAllMethodItem","onOrderHandler","showCoinSet","order","onFocusHandler","onAmountChanged","target","trim","eType","test","onBlurHandler","createElement","issue","betList","totMoney","fail","validateLimit","lotteryId","limitLevel","errorMsg","items","totalmoney","gameid","limit","getLimitLevelData","minAmt","maxAmt","totProjs","isusefree","isFastBet","pos","val","content","betCount","calcBet","nc","push","methodId","projs","money","contents","param","nonasv","p","pv","totalnums","trace","isJoinPool","totalCount","calcMode","methodid","codes","count","mode","userpoint","method","methodList","gameMethodItem","loading","betData","setTimeout","hide","APIs","then","success","msg","resetAmount","updateBalance","orderFinishCB","catch","body","appendChild","removeChild","elements","onChange","onBlur","onFocus","maxLength","placeholder","disabled","ReactDOM","createPortal","GameCommonDataContext","createContext","LimitSetDialog","onLimitChoiceHandler","curLimitIndex","onCloseHandler","onConfirmHandler","onLimitChoiceCB","findIndex","item","visible","maskClosable","isShowLimitSetDialogClose","Game","mysocket","onSetLimit","isShowLimitSetDialog","getLimitDataOfKqByGameId","getMethodItemsByIds","ludanMenus","getTabsByType","bestLudan","ludanTab","getLudanTabByTypeAndName","codeStyle","totalBetCount","totalBetAmount","curMenuEname","isShowLudan","updateOddsOfMethod","updateHC6TexiaoMethodItems","curSubMethod","undefined","amt","status","getCurIssue","saleend","changeTabIndex","idx","tabIndex","onCloseLimitChoiceHandler","onGameHeaderUpdateHandler","match","getGameTypeByGameId","gameLimitLevel","init","getUserPoint","getHistoryIssue","Socket","url","common","broadcaseWSUrl","receive","openWinCode","lottId","open","send","action","initSocket","on","limitListItem","openHistoryItem","unshift","code","mItems","totalAmount","amtc","tmc","historyIssue","myNewPoint","lottSets","lotteryIds","setLimitList","setLimitLevelList","removeListen","off","subMethodMenuValue","animals","ANIMALS_POULTRY","ANIMALS_BEAST","Provider","reverse","isShow"],"mappings":"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","file":"fastm/static/js/3.2fc7ed21.chunk.js","sourcesContent":["class Timer {\r\n  private timerItval: number = 0;\r\n  private fn: any;\r\n  /**\r\n   * 定时器\r\n   * @param {*} time  时间\r\n   * @param {*} fn    回调函数\r\n   * @param {*} step\r\n   */\r\n  constructor(time: number, fn: any, step?: number) {\r\n    this.fn = fn;\r\n    this.start(time, fn, step);\r\n  }\r\n  private start(time: number, fn: any, step: number = 1000): void {\r\n    this.timerItval = window.setInterval(() => {\r\n      if (time <= 0) {\r\n        clearInterval(this.timerItval);\r\n        fn(0, true);\r\n        return;\r\n      }\r\n      fn(time, false);\r\n      time--;\r\n    }, step);\r\n  }\r\n  public close(): void {\r\n    clearInterval(this.timerItval);\r\n    // this.fn(0, true);\r\n  }\r\n}\r\n\r\nexport default Timer;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport Bus from '../../utils/eventBus';\r\nimport MyScroll from '../my-scroll';\r\nimport './ludanMenu.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  tabs: any[];\r\n  selectedMenu?: string;\r\n  selectedSubMenu?: string;\r\n  updateMenu(menuName: any): void;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass LundanMenu extends Component<Props, object> {\r\n  myScrollRef: any;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.myScrollRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    Bus.emit('ludanSelectMenuChange', this.props.selectedMenu);\r\n    let selectedItem = document.querySelector('.ludan-menu-view .menu-item.selected');\r\n    selectedItem && this.myScrollRef.current.bscroll.scrollToElement('.menu-item.selected');\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    if (this.props.selectedMenu !== nextProps.selectedMenu) {\r\n      Bus.emit('ludanSelectMenuChange', nextProps.selectedMenu)\r\n    }\r\n    this.myScrollRef.current.refresh();\r\n    let selectedItem = document.querySelector('.ludan-menu-view .menu-item.selected');\r\n    this.myScrollRef.current.bscroll && selectedItem && this.myScrollRef.current.bscroll.scrollToElement(selectedItem, 150, true);\r\n  }\r\n  changeMenu = (menu: any) => {\r\n    this.props.updateMenu(menu);\r\n    // Bus.emit('ludanSelectMenuChange', menu.name);\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"ludan-menu-view\">\r\n        <MyScroll ref={this.myScrollRef}>\r\n          <nav className=\"menu\">\r\n            {this.props.tabs && this.props.tabs.length > 0 && this.props.tabs.map((menu: any, i: number) => (\r\n              <div key={i} className={`menu-item ${this.props.selectedMenu === menu.name ? 'selected' : ''}`} onClick={() => this.changeMenu(menu)}>{menu.title}</div>\r\n            ))}\r\n          </nav>\r\n        </MyScroll>\r\n      </section>  \r\n    )\r\n  }\r\n}\r\n\r\nexport default LundanMenu;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { getLuDanListByMethod, getTabsByType, getAllTabsByTypeAndName } from '../../utils/ludan';\r\nimport LudanMenu from './LudanMenu';\r\nimport LundanTable from './LundanTable';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  gameId: number;\r\n  methodMenuName: string;\r\n  maxColumns: number;\r\n  maxRows: number;\r\n  issueList: any[];\r\n  defaultMenu?: string;\r\n  isShowLudanMenu?: boolean;\r\n}\r\n\r\ninterface State {\r\n  tabs: any[];\r\n  selectedMenu?: string;\r\n  ludanList: any[];\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass Ludan extends Component<Props, object> {\r\n  state: State;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    let tabs = getAllTabsByTypeAndName(this.props.gameType, this.props.methodMenuName);\r\n    // ssc -> 整合 -> 万位大小\r\n    let selectedMenu = this.props.defaultMenu || (tabs.length > 0 ? tabs[0].name : '');\r\n    let ludanList = getLuDanListByMethod(this.props.issueList.slice(0), this.props.gameType,  selectedMenu || '', this.props.maxRows, this.props.maxColumns) || []\r\n    this.state = {\r\n      selectedMenu,\r\n      ludanList,\r\n      tabs\r\n    }\r\n  }\r\n  updateMenu = (menu: any) => {\r\n    this.setState({\r\n      selectedMenu: menu.name,\r\n    }, this.updateLudanList);\r\n  }\r\n  updateLudanList = () => {\r\n    this.setState({\r\n      ludanList: getLuDanListByMethod(this.props.issueList.slice(0), this.props.gameType, this.state.selectedMenu || '', this.props.maxRows, this.props.maxColumns) || []\r\n    });\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n      let tabs = getAllTabsByTypeAndName(this.props.gameType, this.props.methodMenuName);\r\n      let selectedMenu = nextProps.defaultMenu || (tabs.length > 0 ? tabs[0].name : '');\r\n      let ludanList = getLuDanListByMethod(nextProps.issueList.slice(0), nextProps.gameType,  this.state.selectedMenu || '', nextProps.maxRows, nextProps.maxColumns) || []\r\n      this.setState({\r\n        selectedMenu,\r\n        ludanList,\r\n        tabs\r\n      });\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"ludan-view\">\r\n        {this.props.isShowLudanMenu !== false && <LudanMenu selectedMenu={this.state.selectedMenu} tabs={this.state.tabs} updateMenu={this.updateMenu} />}\r\n        <LundanTable maxColumns={this.props.maxColumns} maxRows={this.props.maxRows} ludanList={this.state.ludanList} />\r\n      </section>  \r\n    )\r\n  }\r\n}\r\n\r\nexport default Ludan;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport Timer from '../../utils/timer';\r\nimport { timeFormat } from '../../utils/date';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { getAnimalByNum } from '../../game/hc6';\r\n\r\nimport './index.styl';\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  gameId: number;\r\n  curIssue?: string;\r\n  lastIssue?: string;\r\n  curTime?: number;\r\n  remainTime: number;\r\n  openNumbers: string[];\r\n  isExpandLudan: boolean;\r\n  getNewestIssue(gameid: number): void;\r\n  update(data: any): void;\r\n}\r\n\r\ninterface State {\r\n  timer: any;\r\n  remainTime: number;\r\n  hours: string;\r\n  minutes: string;\r\n  seconds: string;\r\n  limitLevelList: LimitLevelItem[];\r\n  curGameLimitLevel: number;\r\n  tipText: string;\r\n}\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass GameHeader extends Component<Props, object> {\r\n  state: State;\r\n  curIssue?: string;\r\n  curTime?: number;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    let limitItem = props.store.game.getLimitListItemById(props.gameId);\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    this.curIssue = props.curIssue;\r\n    this.curTime = props.curTime;\r\n    this.state = {\r\n      timer: null,\r\n      remainTime: this.props.remainTime,\r\n      hours: '00',\r\n      minutes: '00',\r\n      seconds: '00',\r\n      limitLevelList: (limitItem && limitItem.kqPrizeLimit) || [],\r\n      curGameLimitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1,\r\n      tipText: '第一次进入需选择限红；再次进入不需要选择限红；除非该游戏限红与之前游戏限红不同。当切换不同的限红模式时，再次投注同一彩种，需至少间隔1期再投注。'\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.initTimer(this.props.remainTime);\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    let limitItem = nextProps.store.game.getLimitListItemById(nextProps.gameId);\r\n    let curGameLimitLevel = nextProps.store.game.getGameLimitLevelByGameId(nextProps.gameId);\r\n    let stateData: any = {\r\n      limitLevelList: (limitItem && limitItem.kqPrizeLimit) || [],\r\n      curGameLimitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    }\r\n    if (this.curIssue !== nextProps.curIssue || this.curTime !== nextProps.curTime) {\r\n      this.curIssue = nextProps.curIssue;\r\n      this.curTime = nextProps.curTime;\r\n      stateData.remainTime = nextProps.remainTime;\r\n      this.initTimer(nextProps.remainTime);\r\n    }\r\n    this.setState(stateData);\r\n  }\r\n  initTimer(remainTime: number) {\r\n    if (remainTime <= 0) return;\r\n    let timer = this.state.timer;\r\n    let timeStr: string = '';\r\n    let times: string[] = [];\r\n    if (timer && timer.close) {\r\n      timer.close();\r\n      timer = null;\r\n    }\r\n    timer = new Timer(Math.floor(remainTime), (t: number): void => {\r\n      if (t <= 0) {\r\n        this.props.getNewestIssue(this.props.gameId);\r\n      }\r\n      timeStr = timeFormat(t * 1000);\r\n      times = timeStr.split(':');\r\n      this.setState({hours: times[0], minutes: times[1], seconds: times[2]});\r\n    });\r\n    this.setState({timer});\r\n  }\r\n  onLimitLevelChanged = (value: any) => {\r\n    this.props.store.game.updateGamesLimitLevel({gameId: this.props.gameId, level: parseInt(value, 10)});\r\n    this.setState({\r\n      curGameLimitLevel: parseInt(value, 10)\r\n    });\r\n  }\r\n  onLudanHandler = () => {\r\n    this.props.update({type: 'ludan', data: !this.props.isExpandLudan})\r\n  }\r\n  clearTimer(): void {\r\n    if (this.state.timer && this.state.timer.close) {\r\n      this.state.timer.close();\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.clearTimer();\r\n  }\r\n  isHc6() {\r\n    return this.props.gameType === LOTTERY_TYPES.HC6;\r\n  }\r\n  renderOpenNumbers(num: string, i: number) {\r\n    if (this.isHc6()) {\r\n      if (i === 5) {\r\n        return (<div key={i} className={`icon-plus`}>+</div>)\r\n      }\r\n      return (<div><div key={i} className={`open-num-item n-${String(num).padStart(2, '0')}`}>{String(num).padStart(2, '0')}</div><div className=\"animal\">{getAnimalByNum(parseInt(num, 10))}</div></div>)\r\n    } else {\r\n      return <div key={i} className=\"open-num-item\">{num}</div> \r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <section className={`game-header-view ${this.props.gameType}`}>\r\n        <section className=\"flex ai-c last-issue-sec\">\r\n          <div>第{this.props.lastIssue}期：</div>\r\n          <div className=\"nums-wp\">\r\n            {this.props.openNumbers.map((num: string, i: number) => (\r\n              this.renderOpenNumbers(num, i)\r\n            ))}\r\n          </div>\r\n        </section>\r\n        <section className=\"flex ai-c jc-sb cur-issue-sec\">\r\n          <div className=\"flex ai-c\">\r\n            <div className=\"txt-r cur-issue-wp\">距{this.props.curIssue}期截止:</div>\r\n            <div className=\"time-wp flex ai-c jc-c\">\r\n              <span className=\"hour-wp\">{this.state.hours}</span>\r\n              <span className=\"colon\">:</span>\r\n              <span className=\"minute-wp\">{this.state.minutes}</span>\r\n              <span className=\"colon\">:</span>\r\n              <span className=\"second-wp\">{this.state.seconds}</span>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex ai-c\" onClick={this.onLudanHandler}>路单走势<span className={`icon-triangle ${this.props.isExpandLudan ? 'up' : 'down'}`}></span></div>\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameHeader;\r\n","\r\nimport { LOTTERY_TYPES } from '../utils/config';\r\nimport { MethodsConfig } from '../typings/game-methods';\r\nimport { GameMethodMenu } from '../typings/games';\r\n\r\n// 近期开奖配置\r\nconst hz = (params = {}) => {\r\n  return Object.assign({\r\n    title: '和值',\r\n    type: 'hz'\r\n  }, params)\r\n}\r\n\r\nconst dx = (params = {}) => {\r\n  return Object.assign({\r\n    title: '大小',\r\n    type: 'dx'\r\n  }, params)\r\n}\r\n\r\nconst ds = {\r\n  title: '单双',\r\n  type: 'ds'\r\n}\r\n\r\nconst kd = {\r\n  title: '跨度',\r\n  type: 'kd'\r\n}\r\n\r\nconst color = {\r\n  title: '颜色',\r\n  type: 'ys'\r\n}\r\n\r\nconst lh = (params: any) => {\r\n  return Object.assign({\r\n    title: '龙虎',\r\n    type: 'lh'\r\n  }, params)\r\n}\r\n\r\n// 玩法配置\r\nexport let methodsConfig: MethodsConfig = {\r\n  [LOTTERY_TYPES.SSC]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({min: 22})],\r\n      ids: ['1251:1', '1250:1', '1274:1', '1275:1', '1276:1']\r\n    },\r\n    {\r\n      name: '定位',\r\n      ename: 'dw',\r\n      recentType: [dx({min: 4}), ds],\r\n      ids: ['1253:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lhh',\r\n      recentType: [lh({title: '万千', range: {start: 0, end: 2}})],\r\n      ids: ['1273:1']\r\n    },\r\n    {\r\n      name: '一字组合',\r\n      ename: 'yzzh',\r\n      recentType: [dx({min: 4}), ds],\r\n      ids: ['1256:1', '1257:1', '1258:1', '1259:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.G11X5]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({min: 22})],\r\n      ids: ['2050:1', '2050:2', '2053:2', '2051:1']\r\n    },\r\n    {\r\n      name: '定位',\r\n      ename: 'dw',\r\n      recentType: [dx({min: 4})],\r\n      ids: ['2052:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lh',\r\n      recentType: [lh({name: '一位VS二位', range: {start: 0, end: 2}})],\r\n      ids: ['2053:1']\r\n    },\r\n    {\r\n      name: '任选',\r\n      ename: 'rx',\r\n      recentType: [dx({min: 4})],\r\n      ids: ['2054:1:1'],\r\n      subMethods: [\r\n        {s: true, name: '一中一', v: '1z1', oddIndex: 7, class: '', mid: '2054', odd: '', ids: ['2054:1:1']},\r\n        {s: false, name: '二中二', v: '2z2', oddIndex: 6, class: '', mid: '2054', odd: '', ids: ['2054:1:2']},\r\n        {s: false, name: '三中三', v: '3z3', oddIndex: 4, class: '', mid: '2054', odd: '', ids: ['2054:1:3']},\r\n        {s: false, name: '四中四', v: '4z4', oddIndex: 2, class: '', mid: '2054', odd: '', ids: ['2054:1:4']},\r\n        {s: false, name: '五中五', v: '5z5', oddIndex: 0, class: '', mid: '2054', odd: '', ids: ['2054:1:5']},\r\n        {s: false, name: '六中五', v: '6z5', oddIndex: 1, class: '', mid: '2054', odd: '', ids: ['2054:1:6']},\r\n        {s: false, name: '七中五', v: '7z5', oddIndex: 3, class: '', mid: '2054', odd: '', ids: ['2054:1:7']},\r\n        {s: false, name: '八中五', v: '8z5', oddIndex: 5, class: 'no-bd-r', mid: '2054', odd: '', ids: ['2054:1:8']}\r\n      ]\r\n    },\r\n    {\r\n      name: '组选',\r\n      ename: 'zux',\r\n      ids: ['2055:1', '2056:1'],\r\n      recentChild: true,\r\n      // subMethods: [\r\n      //   {s: true, name: '前二组选', recentType: [hz({title: '前二和值', nForm: true, range: {start: 0, end: 2}})], oddIndex: 0, class: 'layout-lr w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2055', odd: '', ids: ['2055:1']},\r\n      //   {s: false, name: '前三组选', recentType: [hz({title: '前三和值', nForm: true,range: {start: 0, end: 3}})], oddIndex: 0, class: 'layout-lr  w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2056', odd: '', ids: ['2056:1']}\r\n      // ]\r\n    },\r\n    {\r\n      name: '直选',\r\n      ename: 'zx',\r\n      ids: ['2057:1', '2058:1'],\r\n      recentChild: true,\r\n      // subMethods: [\r\n      //   {s: true, name: '前二直选', recentType: [hz({title: '前二和值', nForm: true, range: {start: 0, end: 2}})], oddIndex: 0, class: 'layout-lr w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2057', odd: '', ids: ['2057:1']},\r\n      //   {s: false, name: '前三直选', recentType: [hz({title: '前三和值', nForm: true, range: {start: 0, end: 3}})], oddIndex: 0, class: 'layout-lr  w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2058', odd: '', ids: ['2058:1']}\r\n      // ]\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.PK10]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({range: [{start: 0, end: 1}, {start: 1, end: 2}], changeTitle: ['冠亚开奖号码'], min: 11})],\r\n      ids: ['4053:1', '4053:2', '4050:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lh',\r\n      recentType: [lh({name: '龙虎', changeTitle: ['冠军', '第十名'], range: [{start: 0, end: 1}, {start: 1, end: 2}]})],\r\n      ids: ['4054:1']\r\n    },\r\n    {\r\n      name: '定位01-05',\r\n      ename: 'dwgy',\r\n      ids: ['4055:1:1']\r\n    },\r\n    {\r\n      name: '定位05-10',\r\n      ename: 'dwgy',\r\n      ids: ['4055:1:2']\r\n    },\r\n    {\r\n      name: '冠亚组合',\r\n      ename: 'gyhz',\r\n      recentType: [hz({range: [{start: 0, end: 1}, {start: 1, end: 2}], changeTitle: ['冠亚', ['亚军']], min: 11})],\r\n      ids: ['4050:2', '4051:1', '4052:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.K3]: [\r\n    {\r\n      name: '点数',\r\n      ename: 'diansu',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5050:1', '5051:1']\r\n    },\r\n    {\r\n      name: '三军',\r\n      ename: 'shanjun',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5052:1']\r\n    },\r\n    {\r\n      name: '围骰/全骰',\r\n      ename: 'wqshai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5053:1']\r\n    },\r\n    {\r\n      name: '长牌',\r\n      ename: 'changpai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5054:1']\r\n    },\r\n    {\r\n      name: '短牌',\r\n      ename: 'duanpai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5055:1']\r\n    },\r\n    {\r\n      name: '颜色',\r\n      ename: 'yskd',\r\n      recentType: [color],\r\n      ids: ['5056:1']\r\n    },\r\n    {\r\n      name: '跨度',\r\n      ename: 'yskd',\r\n      recentType: [kd],\r\n      ids: ['5057:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.HC6]: [\r\n    {\r\n      name: '特码',\r\n      ename: 'tema',\r\n      recentType: [],\r\n      ids: ['7015:1', '7001:1']\r\n    },\r\n    {\r\n      name: '特肖',\r\n      ename: 'texiao',\r\n      recentType: [],\r\n      ids: ['7007:1'],\r\n      subMethods: [\r\n        {s: false, name: '家禽', v: '1', oddIndex: 0, class: '', odd: '', noOdd: true, ids: ['7007:1']},\r\n        {s: false, name: '野兽', v: '2', oddIndex: 0, class: '', odd: '', noOdd: true, ids: ['7007:1']}\r\n      ]\r\n    },\r\n    {\r\n      name: '色波',\r\n      ename: 'sebo',\r\n      recentType: [],\r\n      ids: ['7005:1']\r\n    },\r\n    {\r\n      name: '正一码',\r\n      ename: 'zhengyima',\r\n      recentType: [],\r\n      ids: ['7009:1']\r\n    },\r\n    {\r\n      name: '正二码',\r\n      ename: 'zhengerma',\r\n      recentType: [],\r\n      ids: ['7010:1']\r\n    },\r\n    {\r\n      name: '正三码',\r\n      ename: 'zhengshanma',\r\n      recentType: [],\r\n      ids: ['7011:1']\r\n    },\r\n    {\r\n      name: '正四码',\r\n      ename: 'zhengshima',\r\n      recentType: [],\r\n      ids: ['7012:1']\r\n    },\r\n    {\r\n      name: '正五码',\r\n      ename: 'zhengwuma',\r\n      recentType: [],\r\n      ids: ['7013:1']\r\n    },\r\n    {\r\n      name: '正六码',\r\n      ename: 'zhengliuma',\r\n      recentType: [],\r\n      ids: ['7014:1']\r\n    }\r\n  ]\r\n};\r\n\r\n// 匹配玩法对象\r\nexport function getMethodByIds(ids: string[], gameType: string) {\r\n  let curGameTypeMethods = methodsConfig[gameType] || [];\r\n  for (let i = 0; i < curGameTypeMethods.length; i++) {\r\n    if (curGameTypeMethods[i].ids.join('') === ids.join('')) {\r\n      return curGameTypeMethods[i];\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * 获取子玩法列表\r\n * @param {*} gameType 游戏类型（必须）\r\n */\r\nexport function getMethodsConfigByType(gameType: string): GameMethodMenu[] {\r\n  return methodsConfig[gameType];\r\n}\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { getMethodsConfigByType } from '../../game/gameMethods';\r\nimport { GameMethodMenu, GameSubMethodMenu } from '../../typings/games';\r\nimport MyScroll from '../my-scroll';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  curMenuIndex: number;\r\n  updateMethodMenuIndex(index: number): void;\r\n  methodMenuChangedCB(methodIds: GameMethodMenu): void;\r\n}\r\n\r\ninterface State {\r\n  menus: GameMethodMenu[];\r\n  subMenus: GameSubMethodMenu[];\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass MethodMenu extends Component<Props, object> {\r\n  state: State;\r\n  myScrollRef: any;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      menus: getMethodsConfigByType(this.props.gameType),\r\n      subMenus: []\r\n    }\r\n    this.myScrollRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    this.myScrollRef.current.refresh();\r\n  }\r\n  onMenuHandler = (menu: GameMethodMenu, index: number) => {\r\n    this.props.updateMethodMenuIndex(index);\r\n    this.props.methodMenuChangedCB(menu);\r\n  }\r\n  componentWillReceiveProps(nextProps: Props, nextState: State) {\r\n    this.myScrollRef.current.refresh();\r\n  }\r\n  render() {\r\n    let menus: GameMethodMenu[] = getMethodsConfigByType(this.props.gameType);\r\n    return (\r\n      <section className=\"method-menu-view\">\r\n        <section className=\"menu-wp\">\r\n          <MyScroll ref={this.myScrollRef}>\r\n            <nav className=\"menu-item-ls\">\r\n              {menus.map((menu, i) => (\r\n                <div key={i} className={`menu-item ${i === this.props.curMenuIndex ? 'selected' : ''}`} onClick={() => {this.onMenuHandler(menu, i)}}><span>{menu.name}</span></div>\r\n              ))}\r\n            </nav>\r\n          </MyScroll>\r\n        </section>\r\n        <section className=\"sub-menu-wp\">\r\n          <nav></nav>\r\n        </section>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MethodMenu;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { GameSubMethodMenu } from '../../typings/games';\r\nimport methodItems from '../../game/methodItems';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  subMethods?: GameSubMethodMenu[];\r\n  odds: any;\r\n  curSubMenuIndex: number;\r\n  updateSubMethods(method: GameSubMethodMenu): void;\r\n  updateSubMethodMenuIndex(index: number): void;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass SubMethodMenu extends Component<Props, object> {\r\n  methodItems: any = methodItems;\r\n  onSubMethodHandler = (subMethod: GameSubMethodMenu, index: number) => {\r\n    console.log(JSON.stringify(subMethod));\r\n    this.props.updateSubMethods(subMethod);\r\n    this.props.updateSubMethodMenuIndex(index);\r\n  }\r\n  parseId(id: string = ''): string {\r\n    return id.split(':')[0] || '';\r\n  }\r\n  getOddById(ids: string[], oddIndex: number) {\r\n    let methodOdds = this.props.odds[this.parseId(ids[0])] \r\n    return (methodOdds && methodOdds[oddIndex] && methodOdds[oddIndex].maxprize) || '';\r\n  }\r\n  render() {\r\n    let subMethods = this.props.subMethods;\r\n    return (\r\n      <section className={`sub-method-menu-view ${this.props.gameType}`}>\r\n        <ul className={`flex fw-w sub-method-item-ls`}>\r\n          {subMethods && subMethods.map((sm: GameSubMethodMenu, i: number) => (\r\n            <li className={`sub-method-item ${sm.class} ${i === this.props.curSubMenuIndex ? 'selected' : ''}`} key={i} onClick={this.onSubMethodHandler.bind(this, sm, i)}>\r\n              <div className=\"method-name\">{sm.name}</div>\r\n              {!sm.noOdd && <div className=\"odd\">{this.getOddById(sm.ids, sm.oddIndex)}</div>}\r\n            </li>  \r\n          ))}\r\n        </ul>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SubMethodMenu;\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport './row.styl';\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLDivElement>{\r\n  className?: string;\r\n}\r\n\r\nclass Row extends PureComponent<Props, object> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    return (<div className={`ds-row ${this.props.className || ''}`} onClick={this.props.onClick}>{this.props.children}</div>)\r\n  }\r\n}\r\n\r\nexport default Row;\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport './col.styl';\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\r\n  className?: string;\r\n  span?: number;\r\n  gutter?: string;\r\n}\r\n\r\nclass Col extends PureComponent<Props, object> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n  getStyle() {\r\n    let styl: any = {}\r\n    if (this.props.gutter) {\r\n      styl.padding = this.props.gutter;\r\n    }\r\n    return styl;\r\n  }\r\n  render() {\r\n    return (<div className={`ds-col ${this.props.span ? 'col-'+ this.props.span : ''} ${this.props.className}`} style={this.getStyle()} onClick={this.props.onClick}>{this.props.children}</div>)\r\n  }\r\n}\r\n\r\nexport default Col;\r\n","import React, { PureComponent, MouseEvent } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport methodItems from '../../game/methodItems';\r\nimport { Row, Col } from '../grid';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { GameSubMethodMenu } from '../../typings/games';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  curGameMethodItems: any[];\r\n  defaultInitMethodItemAmount: number;\r\n  updateMethodItem(i: number, j: number, k: number, selected?: boolean | undefined, value?: string | undefined): void;\r\n  updateMethodRow(i: number, j: number, selected?: boolean | undefined): void;\r\n  curSubMethod?: GameSubMethodMenu;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass Play extends PureComponent<Props, object> {\r\n  methodItems: any = methodItems;\r\n  onMethodItemHandler = (i: number, j: number, k: number, selected: boolean, methodTypeName: string, event: MouseEvent<HTMLElement>) => {\r\n    let amount = selected ? '' : String(this.props.defaultInitMethodItemAmount);\r\n    amount = ['rx_nzn', 'zux_q2', 'zux_q3', 'zx_q2', 'zx_q3'].includes(methodTypeName) ? '0' : amount;\r\n    this.props.updateMethodItem(i, j, k, !selected, amount);\r\n  }\r\n  onRowClickHandler = (i: number, j: number, selected?: boolean | undefined) => {\r\n    if (this.props.gameType === LOTTERY_TYPES.HC6) {\r\n      this.props.updateMethodRow(i, j, !selected);\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    this.forceUpdate();\r\n  }\r\n  render() {\r\n    let curGameMethodItems = this.props.curGameMethodItems;\r\n    return (\r\n      <article className={`play-view ${this.props.gameType}`}>\r\n        {curGameMethodItems.map((methodItem: any, i: number) => (\r\n          <div className={`method ${methodItem.layout} ${methodItem.class || ''} clear`} key={i} >\r\n            {methodItem.rows.map((row: any, j: number) => (\r\n              <Row key={j} className={`clear ${row.s ? 'selected': ''}`} onClick={() => this.onRowClickHandler(i, j, row.s)}>\r\n                <Col span={row.col} className={`flex pos-label ${row.hidePos ? 'hide' : ''}`} >\r\n                  <div className=\"pos-name\">{row.n}</div>\r\n                  {row.subpn && <div className=\"sub-pn\">{row.subpn}</div>}\r\n                  {row.posOdd === true && <div className=\"row-odd\">{row.odd}</div>}\r\n                </Col>\r\n                {row.vs.map((vsItem: any, k: number) => (\r\n                  <Col span={vsItem.col}  key={k} className={`method-item-col ${row.class || ''}`}>\r\n                    <div className={`method-item ${vsItem.class || ''} ${vsItem.s ? 'selected' : ''}`} onClick={(e: MouseEvent<HTMLElement>) => this.onMethodItemHandler(i, j, k, vsItem.s, methodItem.methodTypeName, e)}>\r\n                      <span className={`method-item-name`} n={vsItem.n}>\r\n                        {vsItem.class === 'icon' && vsItem.icons && vsItem.icons.map((iconNum: number, m: number) => (<span className={`icon-item icon-item-${iconNum}`} key={m}></span>))}\r\n                        {vsItem.class !== 'icon' && vsItem.n}\r\n                      </span>\r\n                      {row.noodd !== true && methodItem.posOdd !==true && <span className={`odd`}>{vsItem.odd || ''}</span>}\r\n                    </div>\r\n                  </Col>\r\n                ))}\r\n              </Row>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </article>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Play;\r\n","/**\r\n * 排列\r\n * @param n\r\n * @param m\r\n * @returns {Number}\r\n */\r\nfunction permutationChoice(n: number, m: number): number {\r\n  return factorial(n) / factorial(n - m);\r\n}\r\n\r\n/**\r\n * 组合\r\n * @param n\r\n * @param m\r\n * @returns {Number}\r\n * combineChoice\r\n */\r\nfunction C(n: number, m: number): number {\r\n  if (!n || !m || n < m || n < 0 || m < 0) return 0;\r\n  else if (n === m) return 1;\r\n  else if (m === 1) return n;\r\n  else {\r\n    return Math.ceil(permutationChoice(n, m) / factorial(m));\r\n  }\r\n}\r\n\r\n/**\r\n * [factorial description]\r\n * @param  {[type]} n [description]\r\n * @return {[type]}   [description]\r\n */\r\nfunction factorial(n: number): number {\r\n  if (n === 0) return 1;\r\n  return n * factorial(n - 1);\r\n}\r\n\r\n// repeat a string s t times\r\n// let repeat = (s: string, t: number) => {\r\n//   if (typeof s.repeat === 'function') return s.repeat(t)\r\n//   let r = ''\r\n//   while (t > 0) {\r\n//     r += s\r\n//     t--\r\n//   }\r\n//   return r\r\n// }\r\n\r\n// remove duplicate in a string by split by i\r\n// @params o 重复号的判断加入是否排序后比较相等\r\nlet removeDuplicate = (s: string, i: string, join: string, o: string, l: string) => {\r\n  let has = false\r\n  return { s: s.split(i).filter((n: string, i: number, arr: string[]) => {\r\n    if (!n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g'))) return false\r\n    return i === arr.findIndex((nn: string) => !o ? nn === n : (nn.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).sort((a: any, b: any) => a - b).join('') === (n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).sort((a: any, b: any) => a - b).join('')) || !(has = true)\r\n  }).join(join || ' '), has: has }\r\n}\r\n\r\n// let padStart = (s: string, l: number, w: string) => {\r\n//   s += ''\r\n//   while (s.length < l) {\r\n//     s = w + s\r\n//   }\r\n//   if (s.length > l) s = s.slice(s.length - l)\r\n//   return s\r\n// }\r\n\r\nlet isPrime = (n: number) => {\r\n  if (n <= 3) { return n > 1 }\r\n  if (n % 2 === 0 || n % 3 === 0) { return false }\r\n  for (let i = 5; i * i <= n; i += 6) {\r\n    if (n % i === 0 || n % (i + 2) === 0) { return false }\r\n  }\r\n  return true\r\n}\r\n\r\n// 空值判断\r\nlet empty = (value: string) => value.match(/^[\\s\\t\\r]*$/)\r\n\r\n/*\r\nvalue: 输入值\r\nN: 一注的长度\r\nr: 最大相同数字的长度\r\nl: 一个号码的长度 如12345有5个号码, 010203有3个号码, 号码长度为2\r\n */\r\nlet N = (value: string, N: number, r: number, l: number, max: number, min: number) => empty(value) ? [] : value.split(' ').filter(n => n.length === N).filter((n: string) => {\r\n  return (typeof r !== 'number') || r === Object.values((n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).reduce((p: any, na: any) => {\r\n    if (p[na] !== undefined) p[na] += 1\r\n    else p[na] = 1\r\n    if ((max !== undefined && parseInt(na) > max) || (min !== undefined && parseInt(na) < min)) p[na] = r + 1\r\n    return p\r\n  }, {})).sort((a: any, b: any) => b - a)[0]\r\n})\r\n\r\n// 最大重复号码为r 或小于 r\r\n// let ON = (value: string, N: number, r: number, l: number, max: number, min: number) => empty(value) ? [] : value.split(' ').filter(n => n.length === N).filter((n: string) => {\r\n//   return (typeof r !== 'number') || r >= Object.values((n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).reduce((p: any, na: any) => {\r\n//     if (p[na] !== undefined) p[na] += 1\r\n//     else p[na] = 1\r\n//     if ((max !== undefined && parseInt(na) > max) || (min !== undefined && parseInt(na) < min)) p[na] = r + 1\r\n//     return p\r\n//   }, {})).sort((a: any, b: any) => b - a)[0]\r\n// })\r\n\r\n// 数组内各长度相乘\r\nlet P = (nsl: number[]): number => {\r\n  let n = 1\r\n  nsl.forEach((nl: number) => {\r\n    n *= nl\r\n  })\r\n  return n\r\n}\r\n\r\n// 数组内各长度相加\r\nlet A = (nsl: number[]): number => {\r\n  let n = 0\r\n  nsl.forEach((nl: number) => {\r\n    n += nl\r\n  })\r\n  return n\r\n}\r\n\r\nexport {\r\n  N,\r\n  // ON,\r\n  P,\r\n  A,\r\n  C,\r\n  removeDuplicate,\r\n}\r\n","import { /*N,*/ P, A, C } from './base'\r\ninterface Params {\r\n  nsl: number[];\r\n  ns?: any[];\r\n  repeatCount?: number;\r\n}\r\n\r\nexport default {\r\n  '1250:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1251:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1252:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1253:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1254:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1256:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1257:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1258:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1259:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1273:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1274:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1275:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1276:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  \r\n  // 11x5\r\n  '2050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2050:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2053:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2054:1:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  '2054:1:2'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 2)\r\n  },\r\n  '2054:1:3'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 3)\r\n  },\r\n  '2054:1:4'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 4)\r\n  },\r\n  '2054:1:5'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 5)\r\n  },\r\n  '2054:1:6'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 6)\r\n  },\r\n  '2054:1:7'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 7)\r\n  },\r\n  '2054:1:8'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 8)\r\n  },\r\n  '2055:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 2)\r\n  },\r\n  '2056:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 3)\r\n  },\r\n  '2057:1'({nsl, repeatCount}: Params) {\r\n    return P(nsl) - (repeatCount || 0);\r\n  },\r\n  '2058:1'({ns}: Params) {\r\n    let n = 0;\r\n    if (ns) {\r\n      ns[0] && ns[0][0] && ns[0].forEach((f: number) => {\r\n        ns[1] && ns[1][0] && ns[1].forEach((s: number) => {\r\n          ns[2] && ns[2][0] && ns[2].forEach((t: number) => {\r\n            if (f !== s && f !== t && s !== t) n++;\r\n          })\r\n        })\r\n      });\r\n    }\r\n    return n;\r\n  },\r\n\r\n  // PK10\r\n  '4050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4050:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4053:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4054:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:3'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:4'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:5'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n\r\n  // K3\r\n  '5050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5054:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5055:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5056:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5057:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n\r\n  // 六合彩\r\n  // 特码\r\n  '7001:1' ({nsl}: Params) {\r\n    return C(nsl[0], 1)\r\n  },\r\n  // 正码\r\n  '7006:1' ({nsl}: Params) {\r\n    return C(nsl[0], 1)\r\n  },\r\n  // 特肖\r\n  '7007:1' ({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  // 波色\r\n  '7005:1' ({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  // 一肖\r\n  '7008:1' ({nsl}: Params) {\r\n    return C(A(nsl), 1)\r\n  },\r\n  // 2连肖\r\n  '7002:1' ({nsl}: Params) {\r\n    return C(A(nsl), 2)\r\n  },\r\n  // 3连肖\r\n  '7003:1' ({nsl}: Params) {\r\n    return C(A(nsl), 3)\r\n  },\r\n  // 4连肖\r\n  '7004:1' ({nsl}: Params) {\r\n    return C(A(nsl), 4)\r\n  },\r\n  // '正一码'\r\n  '7009:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正二码'\r\n  '7010:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正三码'\r\n  '7011:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正四码'\r\n  '7012:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正五码'\r\n  '7013:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正六码'\r\n  '7014:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '特码'\r\n  '7015:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正特和值'\r\n  '7016:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '尾数'\r\n  '7017:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  }\r\n}","/**\r\n * 二维数据元素去重\r\n * @param data 二维数组\r\n */\r\nexport function removeRepeat2DArray(data: any[]) {\r\n  return data;\r\n  // data.reverse();\r\n  // // 标识重复\r\n  // for (let i = 0; i <= data.length - 1; i++) {\r\n  //   for (let j = 0; j <= data[i].length - 1; j++) {\r\n  //     if (!data[i + 1]) continue;\r\n  //     if (data[i + 1].includes(data[i][j])) {\r\n  //       data[i].splice(j, 1, -1);\r\n  //     }\r\n  //     for (let k = 0; k <= data[i + 1].length; k++) {\r\n  //       if (!data[i + 2]) continue;\r\n  //       if (data[i + 2].includes(data[i][j])) {\r\n  //         data[i].splice(j, 1, -1);\r\n  //       }\r\n  //       if (data[i + 2].includes(data[i + 1][k])) {\r\n  //         data[i + 1].splice(k, 1, -1);\r\n  //       }\r\n  //     }\r\n  //   }\r\n  // }\r\n  // data.reverse();\r\n  // // 去重\r\n  // return data.map((d1: any[]) => {\r\n  //   return d1.filter((d2: any) => parseInt(d2, 10) > -1);\r\n  // });\r\n}\r\n\r\n/**\r\n * 计算重复元素的个数\r\n * @param data \r\n */\r\nexport function countRepeat(data: any[]): number {\r\n  if (data.length < 1) return 0;\r\n  let temp = (data.join(',').split(',') || []).filter((num) => num.length > 0);\r\n  return temp.length - Array.from(new Set(temp)).length;\r\n}\r\n","import React, { Component, ChangeEvent } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { Button, Toast, Modal } from 'antd-mobile';\r\nimport CoinSet from '../coin-set';\r\nimport APIs from '../../http/APIs';\r\nimport calc from '../../game/calc';\r\nimport { removeRepeat2DArray, countRepeat } from '../../utils/game';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameId: number;\r\n  gameType: string;\r\n  curIssue?: string;\r\n  betCount: number;\r\n  amount: number;\r\n  curGameMethodItems: any[];\r\n  defaultInitMethodItemAmount: number;\r\n  updateDefaultInitMethodItemAmount(amount: number): void;\r\n  orderFinishCB(status: boolean): void;\r\n  resetSelectedOfAllMethodItem(): void;\r\n}\r\n\r\ninterface DataMethodItem {\r\n  id: string;\r\n  rows: any[];\r\n  methodTypeName?: string;\r\n  repeatCount: number;\r\n}\r\n\r\ninterface State {\r\n  amount: number;\r\n  showCoinSet: boolean;\r\n}\r\n\r\nconst ORDER_BAR_CONTAINER_CLASS = 'order-bar-container';\r\nconst CALC_BET_NEED_COMPUTED_REPEAT = ['zx_q2', 'zx_q3'];\r\n@inject('store')\r\n@observer\r\nclass OrderBar extends Component<Props, object> {\r\n  state: State;\r\n  calc: any = calc;\r\n  orderBarContainer: HTMLDivElement;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      amount: this.props.defaultInitMethodItemAmount,\r\n      showCoinSet: false\r\n    }\r\n    this.orderBarContainer = document.createElement('div');\r\n    this.orderBarContainer.className = ORDER_BAR_CONTAINER_CLASS;\r\n  }\r\n  coinChoosed = (value: string) => {\r\n    const amount: number = value === 'all' ? parseInt(this.props.store.user.balance, 10): parseInt(value, 10);\r\n    this.setState({amount});\r\n    this.props.updateDefaultInitMethodItemAmount(amount);\r\n  }\r\n  onResetHandler = () => {\r\n    Modal.alert(' ', '您确定要重置选中的投注？',[{ text: '取消' }, { text: '确定', onPress: () => this.props.resetSelectedOfAllMethodItem() }]);\r\n  }\r\n  onOrderHandler = () => {\r\n    this.setState({showCoinSet: false});\r\n    this.order();\r\n  }\r\n  validate(params: any): boolean {\r\n    if (!params.issue) {\r\n      Toast.fail('获取游戏期号失败，请刷新后重试！');\r\n      return false;\r\n    } else if(!params.betList || params.betList.length <= 0) {\r\n      return false;\r\n    } else if(params.totMoney <= 0) {\r\n      this.setState({showCoinSet: true});\r\n      Toast.fail('请输入金额！');\r\n      return false;\r\n    } else if (!this.validateLimit(params.lotteryId, params.limitLevel, this.state.amount)) {\r\n      return false;  \r\n    } else if (params.errorMsg) {\r\n      Toast.fail(params.errorMsg);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  validateHc6(params: any): boolean {\r\n    if (!params.issue) {\r\n      Toast.fail('获取游戏期号失败，请刷新后重试！');\r\n      return false;\r\n    } else if(!params.items || params.items.length <= 0) {\r\n      return false;\r\n    } else if(params.totalmoney <= 0) {\r\n      this.setState({showCoinSet: true});\r\n      Toast.fail('请输入金额！');\r\n      return false;\r\n    } else if (!this.validateLimit(params.gameid, params.limitLevel, this.state.amount)) {\r\n      return false;\r\n    } else if (params.errorMsg) {\r\n      Toast.fail(params.errorMsg);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  validateLimit(gameId: number, level: number, amount: number) {\r\n    let limit = this.props.store.game.getLimitLevelData(gameId, level);\r\n    if (limit) {\r\n      if (amount < limit.minAmt || amount > limit.maxAmt) {\r\n        Toast.fail(amount < limit.minAmt ? '您输入的金额不能低于最低限红' : '您输入的金额超过最高限红');\r\n        return false;\r\n      } \r\n    }\r\n    return true;\r\n  }\r\n  getParams(): object {\r\n    let props = this.props;\r\n    let curGameMethodItems = props.curGameMethodItems;\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    let params: any = {\r\n      lotteryId: props.gameId,\r\n      issue: props.curIssue,\r\n      totProjs: 0,\r\n      totMoney: 0,\r\n      isusefree: 0,\r\n      betList: [],\r\n      isFastBet: 1,\r\n      limitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    };\r\n    let pos: string = '';\r\n    let val: string = '';\r\n    let content: string = '';\r\n    let betCount: number = 0;\r\n    curGameMethodItems.forEach((methodItem: any) => {\r\n      if (['rx_nzn'].includes(methodItem.methodTypeName)) {\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        content = methodItem.rows[0].nc.join(',');\r\n        params.betList.push({methodId: methodItem.id.split(':')[0], projs: 1, money: params.totMoney, content});\r\n        params.totProjs += params.betList.length;\r\n        if (content.split(',').length > 8) {\r\n          params.errorMsg = '该玩法一个方案最多选择8个号码！';\r\n        }\r\n      } else if (['zux_q2', 'zux_q3'].includes(methodItem.methodTypeName)) {\r\n        // 组选\r\n        let nc = methodItem.rows.map((row: any) => {\r\n          return row.nc;\r\n        })[0];\r\n        let contents: any[] = [];\r\n        let param = {\r\n          methodId: methodItem.id.split(':')[0],\r\n          projs: 1,\r\n          money: this.state.amount\r\n        }\r\n        for (let i = 0; i <= nc.length - 1; i++) {\r\n          for (let j = i + 1; j <= nc.length - 1; j++) {\r\n            if (['zux_q2'].includes(methodItem.methodTypeName)) {\r\n              contents.push(Object.assign({\r\n                content: `${nc[i]},${nc[j]}`\r\n              }, param));\r\n            }\r\n            if (['zux_q3'].includes(methodItem.methodTypeName)) {\r\n              for (let k = i + 2; k <= nc.length - 1; k++) {\r\n                if (nc[j] >= nc[k]) continue;\r\n                contents.push(Object.assign({\r\n                  content: `${nc[i]},${nc[j]},${nc[k]}`\r\n                }, param));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        params.betList.push(...contents);\r\n        params.totProjs += contents.length;\r\n      } else if (['zx_q2', 'zx_q3'].includes(methodItem.methodTypeName)) {\r\n        // 直选 前二、三\r\n        let nc = methodItem.rows.map((row: any) => {\r\n          return row.nc;\r\n        });\r\n        nc = removeRepeat2DArray(nc);\r\n        let contents: any[] = [];\r\n        let param = {\r\n          methodId: methodItem.id.split(':')[0],\r\n          projs: 1,\r\n          money: this.state.amount\r\n        }\r\n        for (let i = 0; i < nc.length; i++) {\r\n          for (let j = 0; j < nc[i].length; j++) {\r\n            if (!nc[i + 1]) continue;\r\n            for (let k = 0; k < nc[i + 1].length; k++) {\r\n              if (nc[i][j] === nc[i + 1][k]) continue;\r\n              if (nc.length >= 3) {\r\n                if (!nc[i + 2]) continue;\r\n                for (let m = 0; m < nc[i + 2].length; m++) {\r\n                  if (nc[i + 1][k] === nc[i + 2][m] || nc[i][j] === nc[i + 2][m]) continue;  \r\n                  contents.push(Object.assign({\r\n                    content: `${nc[i][j]},${nc[i + 1][k]},${nc[i + 2][m]}`\r\n                  }, param));\r\n                }\r\n              } else {\r\n                contents.push(Object.assign({\r\n                  content: `${nc[i][j]},${nc[i + 1][k]}`\r\n                }, param));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        params.betList.push(...contents);\r\n        params.totProjs += contents.length;\r\n      } else {\r\n        methodItem.rows.forEach((row: any) => {\r\n          row.vs.forEach((vsItem: any) => {\r\n            if (vsItem.s) {\r\n              params.totMoney += this.state.amount; // parseInt(vsItem.amt, 10);\r\n              params.totProjs++;\r\n              pos = row.nonasv ? '' : row.p || row.n;\r\n              val = vsItem.p ? (vsItem.p + '-' + (vsItem.pv || vsItem.n)) : (vsItem.pv || vsItem.n)\r\n              content = pos ? pos + '-' + val : val;\r\n              params.betList.push({methodId: methodItem.id.split(':')[0], projs: 1, money: this.state.amount, content});\r\n            }\r\n          });\r\n        });\r\n      }\r\n    });\r\n    return params;\r\n  }\r\n  getParamsHc6() {\r\n    let props = this.props;\r\n    let curGameMethodItems = props.curGameMethodItems;\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    let params: any = {\r\n      gameid: props.gameId,\r\n      issue: props.curIssue,\r\n      totalnums: 0, // 总注数\r\n      totalmoney: 0,\r\n      type: 1, // 类型：1-投注；2-追号\r\n      isusefree: 0, // 是否使用优惠券，0-否，1-是\r\n      items: [],\r\n      trace: '',\r\n      isJoinPool: 0,\r\n      isFastBet: 1,\r\n      limitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    };\r\n    let items: any[] = [];\r\n    let totalCount = 0;\r\n    curGameMethodItems.forEach((methodItem: any) => {\r\n      methodItem.rows.forEach((row: any) => {\r\n        console.log('count=', this.calcBet(), methodItem.id)\r\n        if (methodItem.calcMode === 'row') {\r\n          if (row.s) {\r\n            items.push({\r\n              methodid: methodItem.id.split(':')[0],\r\n              type: 1,\r\n              pos: '',\r\n              codes: row.pv || row.n,\r\n              count: 1,\r\n              times: this.state.amount,\r\n              money: this.state.amount,\r\n              mode: 1,\r\n              userpoint: '0.0000'\r\n            });\r\n            totalCount += 1;   \r\n          }\r\n        } else {\r\n          row.vs.forEach((vsItem: any) => {\r\n            if (vsItem.s) {\r\n              items.push({\r\n                methodid: methodItem.id.split(':')[0],\r\n                type: 1,\r\n                pos: vsItem.pos,\r\n                codes: vsItem.p ? (vsItem.p + '-' + (vsItem.pv || vsItem.n)) : (vsItem.pv || vsItem.n),\r\n                count: 1,\r\n                times: this.state.amount,\r\n                money: this.state.amount,\r\n                mode: 1,\r\n                userpoint: '0.0000'\r\n              });\r\n              totalCount += 1;            \r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n    params.totalmoney = items.length * this.state.amount;\r\n    params.totalnums = totalCount;\r\n    params.items = JSON.stringify(items);\r\n    return params;\r\n  }\r\n  calcBet() {\r\n    let curGameMethodItems = this.props.curGameMethodItems;\r\n    let methodList: DataMethodItem[] = [];\r\n    let method: any;\r\n    let betCount: number = 0;\r\n\r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n      gameMethodItem.rows.forEach((row: any) => {\r\n        method.rows.push(row.nc.slice(0));\r\n      });\r\n      methodList.push(method);\r\n    });\r\n    \r\n    // 计算重复数\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (CALC_BET_NEED_COMPUTED_REPEAT.includes(gameMethodItem.methodTypeName)) {\r\n        gameMethodItem.repeatCount = countRepeat(methodList.map((methodItem: DataMethodItem) => methodItem.id === gameMethodItem.id ? methodItem.rows : []));\r\n      }\r\n    });\r\n    \r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (!['zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        methodList = methodList.map((methodItem: DataMethodItem) => {\r\n          if (gameMethodItem.id === methodItem.id) {\r\n            methodItem.rows = methodItem.rows.map((row: any) => row.length);\r\n          }\r\n          methodItem.repeatCount = gameMethodItem.repeatCount;\r\n          return methodItem;\r\n        });\r\n      }\r\n    });\r\n\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (gameMethodItem.calcMode === 'row') {  \r\n        methodList = [];\r\n        method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n        gameMethodItem.rows.forEach((row: any) => {\r\n          if (row.s) method.rows.push(row.pv || row.n);\r\n        });\r\n        method.rows = [method.rows.length];\r\n        methodList.push(method);\r\n      }\r\n    });\r\n\r\n    // 计算总注数\r\n    methodList.forEach((methodItem: DataMethodItem) => {\r\n      betCount += this.calc[methodItem.id]({nsl: methodItem.rows, ns: methodItem.rows, repeatCount: methodItem.repeatCount});\r\n    });\r\n\r\n    return betCount;\r\n  }\r\n  order() {\r\n    const isHc6 = this.isHc6();\r\n    const params = this[isHc6 ? 'getParamsHc6' : 'getParams']();\r\n    if (!this[isHc6 ? 'validateHc6' : 'validate'](params)) {\r\n      return null;\r\n    }\r\n    Toast.loading('投注中...', 0);\r\n    const data = isHc6 ? params : { betData: JSON.stringify(params) };\r\n    setTimeout(Toast.hide, 30000);\r\n    APIs[isHc6 ? 'booking' : 'bet'](data).then(({success, msg}: any) => {\r\n      this.resetAmount();\r\n      Toast.hide();\r\n      if (success === 1) {\r\n        Toast.success('投注成功');\r\n        this.props.store.user.updateBalance();\r\n        this.props.orderFinishCB(true);\r\n      } else {\r\n        Toast.fail(msg || '投注失败');\r\n        this.props.orderFinishCB(false);\r\n      }\r\n    }).catch(() => {\r\n      Toast.hide();\r\n    });\r\n  }\r\n  onFocusHandler = () => {\r\n    this.setState({showCoinSet: true});\r\n  }\r\n  onAmountChanged = (event: ChangeEvent<HTMLInputElement>) => {\r\n    let value = event.target.value.trim();\r\n    let eType  = event.type;\r\n    if (value.length <= 0) {\r\n      value = '0';\r\n    }\r\n    console.log('type=', eType);\r\n    if (!/^\\d*$/g.test(value)) {\r\n      value = String(this.props.defaultInitMethodItemAmount);\r\n    }\r\n    this.setState({amount: parseInt(value, 10)});\r\n    this.props.updateDefaultInitMethodItemAmount(parseInt(value, 10));\r\n  }\r\n  onBlurHandler =  (event: ChangeEvent<HTMLInputElement>) => {\r\n    let value = event.target.value.trim();\r\n    if (!/^\\d+$/g.test(value)) {\r\n      value = '-1';\r\n    }\r\n    this.setState({amount: parseInt(value, 10)});\r\n    this.props.updateDefaultInitMethodItemAmount(parseInt(value, 10));\r\n  }\r\n  componentDidMount() {\r\n    document.body.appendChild(this.orderBarContainer);\r\n  }\r\n  componentWillUnmount() {\r\n    document.body.removeChild(this.orderBarContainer);\r\n  }\r\n  resetAmount() {\r\n    this.setState({amount: 0});\r\n    this.props.updateDefaultInitMethodItemAmount(0);\r\n  }\r\n  isHc6() {\r\n    return this.props.gameType === LOTTERY_TYPES.HC6;\r\n  }\r\n  render() {\r\n    let elements = (\r\n      <section className=\"order-bar-view\">\r\n        {this.state.showCoinSet && <section>{<CoinSet coinChoosed={this.coinChoosed} />}</section>}\r\n        <section className=\"flex ai-c jc-sb order-sec\">\r\n          <div>\r\n            <div className=\"flex ai-c fast-amount-wp\">\r\n              <input className=\"fast-amount\" type=\"tel\" value={this.state.amount <= 0 ? '': this.state.amount} onChange={this.onAmountChanged} onBlur={this.onBlurHandler} onFocus={this.onFocusHandler} maxLength={9} placeholder=\"请输入快捷金额\" />\r\n            </div>  \r\n          </div>\r\n          {/* <div className=\"txt-r\">\r\n            已选 <span className=\"txt-red\">{this.props.betCount}</span> 注 共 <span className=\"txt-red\">{(this.props.amount).toFixed(3)} </span>元\r\n          </div> */}\r\n          <div className=\"flex ai-c jc-e btns-wp\">\r\n            <Button type=\"primary\" className=\"btn-reset\" disabled={this.props.betCount <= 0} onClick={this.onResetHandler}>重置</Button>\r\n            <Button type=\"primary\" className=\"btn-order\" disabled={this.props.betCount <= 0} onClick={this.onOrderHandler}>一键下单</Button>\r\n          </div>\r\n        </section>\r\n      </section>\r\n    )\r\n    return ReactDOM.createPortal(elements, this.orderBarContainer);\r\n  }\r\n}\r\n\r\nexport default OrderBar;\r\n","import { createContext } from 'react';\r\n\r\nexport interface GameCommonDataType {\r\n  gameId: number;\r\n  gameType: string;\r\n}\r\n\r\nexport const GameCommonDataContext = createContext<GameCommonDataType>({\r\n  gameId: -1,\r\n  gameType: ''\r\n});\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { Button, Modal, Icon } from 'antd-mobile';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  isShowMask?: boolean;\r\n  isShow: boolean;\r\n  gameId: number;\r\n  limitLevelList: LimitLevelItem[];\r\n  isShowLimitSetDialogClose: boolean; // 是否显示弹出框关闭按钮\r\n  onLimitChoiceCB(level: number): void;\r\n  onCloseHandler?: () => void;\r\n}\r\n\r\ninterface State {\r\n  curLimitIndex: number;\r\n  level: number;\r\n}\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass LimitSetDialog extends Component<Props, object> {\r\n  state: State;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    let level = ((props.store.game.getGameLimitLevelByGameId(props.gameId) || {}).level) || 1;\r\n    let index = props.limitLevelList.findIndex((item) => item.level === level);\r\n    this.state = {\r\n      curLimitIndex: index,\r\n      level\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    let level = nextProps.store.game.getGameLimitLevelByGameId(nextProps.gameId) || 1;\r\n    let index = nextProps.limitLevelList.findIndex((item) => item.level === level);\r\n    this.setState({curLimitIndex: index});\r\n  }\r\n  onLimitChoiceHandler = (level: number, index: number) => {\r\n    this.setState({curLimitIndex: index, level});\r\n  }\r\n  onCloseHandler = () => {\r\n    if (this.props.onCloseHandler) {\r\n      this.props.onCloseHandler();\r\n    }\r\n  }\r\n  onConfirmHandler = () => {\r\n    this.props.onLimitChoiceCB(this.state.level);\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"limit-set-dialog\">\r\n         <Modal\r\n          className=\"limit-set-modal\"\r\n          visible={true}\r\n          maskClosable={false}\r\n          title=\"\"\r\n        >\r\n          <header className=\"flex ai-c jc-c limit-set-header\">限红设置{this.props.isShowLimitSetDialogClose && <Icon type=\"cross\" onClick={this.onCloseHandler} />}</header>\r\n          <div className=\"bg-white limit-set-content\">\r\n            <section className=\"flex jc-c limit-list\">\r\n              {this.props.limitLevelList.map((item: LimitLevelItem, i: number) => (\r\n                <Button key={i} className={`flex jc-c ai-c btn-limit-amount ${this.state.curLimitIndex === i ? 'selected' : ''}`} onClick={()=>this.onLimitChoiceHandler(item.level, i)}>{item.minAmt}-{item.maxAmt}</Button>\r\n              ))}\r\n            </section>\r\n            <div><Button className=\"flex jc-c ai-c btn-confirm\" onClick={this.onConfirmHandler}>确定</Button></div>\r\n            <div className=\"limit-explain-tip\">\r\n              <p>限红说明：</p>\r\n              <p>当切换不同的限红模式时，再次投注同一彩种，需至少间隔1期再投注。</p>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LimitSetDialog;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport GameHeader from 'comp/game-header';\r\nimport MethodMenu from 'comp/method-menu';\r\nimport SubMethodMenu from 'comp/sub-method-menu';\r\nimport Play from 'comp/play';\r\nimport OrderBar from 'comp/order-bar';\r\nimport { RouteComponentProps } from \"react-router-dom\";\r\nimport { getGameTypeByGameId } from '../../game/games';\r\nimport calc from '../../game/calc';\r\nimport { getMethodsConfigByType } from '../../game/gameMethods';\r\nimport { GameMethodMenu, GameSubMethodMenu } from '../../typings/games';\r\nimport methodItems from '../../game/methodItems';\r\nimport APIs from '../../http/APIs';\r\nimport { countRepeat } from '../../utils/game';\r\nimport { GameCommonDataContext } from '../../context/gameContext';\r\nimport Ludan from 'comp/ludan';\r\nimport { getLunDanTabByName, getTabsByType, getLudanTabByTypeAndName } from '../../utils/ludan';\r\nimport LimitSetDialog from 'comp/limit-set-dialog';\r\nimport Socket from '../../socket';\r\nimport Bus from '../../utils/eventBus'\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { ANIMALS_POULTRY, ANIMALS_BEAST } from '../../game/hc6';\r\nimport './index.styl';\r\n\r\ninterface IProps {\r\n  store?: any;\r\n  gameType?: string;\r\n}\r\n\r\ninterface State {\r\n  id: number;\r\n  // gameType: string;\r\n  curIssue: string;\r\n  lastIssue: string;\r\n  curTime: number;\r\n  remainTime: number;\r\n  openNumbers: string[];\r\n  curMenuIndex: number; // 玩法菜单选中玩法的index\r\n  curMenuEname: string; // 玩法菜单选中玩法的英语名\r\n  curSubMenuIndex: number;\r\n  subMethods: GameSubMethodMenu[];\r\n  curSubMethod?: GameSubMethodMenu;\r\n  curGameMethodItems: any[];\r\n  odds: any;\r\n  issueList: any[];\r\n  defaultInitMethodItemAmount: number; // 默认初始投注金额\r\n  totalBetCount: number;  // 总注数\r\n  totalBetAmount: number; // 总投注金额\r\n  tabIndex: number; //  \r\n  maxColumns: number;\r\n  maxRows: number;\r\n  defaultMenu?: string;\r\n  // defaultSubMenu?: string;\r\n  isShowLudan: boolean;\r\n  isExpandLudan: boolean;\r\n  isShowLimitSetDialog: boolean;\r\n  limitLevelList: LimitLevelItem[];\r\n  isShowLimitSetDialogClose: boolean; // 是否显示弹出框关闭按钮\r\n}\r\n\r\ninterface DataMethodItem {\r\n  id: string;\r\n  rows: any[];\r\n  repeatCount: number;\r\n  methodTypeName: string;\r\n}\r\n\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\ntype Props = IProps & RouteComponentProps<MatchParams>;\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass Game extends Component<Props, object> {\r\n  id: number = 1;\r\n  gameType: string = 'ssc';\r\n  state: State;\r\n  methodItems: any = methodItems;\r\n  calc: any = calc;\r\n  mysocket?: Socket;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.id = parseInt(this.props.match.params.id || '1', 10);\r\n    this.gameType = getGameTypeByGameId(this.id);\r\n    let menus: GameMethodMenu[] = getMethodsConfigByType(this.gameType);\r\n    let limitItem = props.store.game.getLimitListItemById(this.id);\r\n    let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n    let curMenuEname = (menus && menus[0]).ename;\r\n    let ludanTab = getLudanTabByTypeAndName(this.gameType, curMenuEname, bestLudan && bestLudan.codeStyle);\r\n    let ludanMenus = getTabsByType(this.gameType, curMenuEname);\r\n    let gameLimitLevel = this.props.store.game.getGameLimitLevelByGameId(this.id); // 设置的限红数据\r\n    let curSubMenuIndex = this.gameType === LOTTERY_TYPES.HC6 ? -1 : 0;\r\n    this.state = {\r\n      id: 1,\r\n      curIssue: '',\r\n      lastIssue: '',\r\n      curTime: 0,\r\n      remainTime: 0,\r\n      openNumbers: [],\r\n      curMenuIndex: 0,\r\n      curMenuEname,\r\n      curSubMenuIndex,\r\n      subMethods: [],\r\n      curSubMethod: undefined,\r\n      curGameMethodItems: this.getMethodItemsByIds((menus && menus[0].ids) || []),\r\n      odds: {},\r\n      issueList: [],\r\n      defaultInitMethodItemAmount: 0, //this.props.store.game.defaultInitBetAmount,\r\n      totalBetCount: 0,\r\n      totalBetAmount: 0,\r\n      tabIndex: 0,\r\n      maxColumns: 21,\r\n      maxRows: 6,\r\n      defaultMenu: (ludanTab && ludanTab.name) || '',\r\n      isShowLudan: ludanMenus && ludanMenus.length > 0,\r\n      isExpandLudan: false,\r\n      isShowLimitSetDialog: !gameLimitLevel,\r\n      limitLevelList: limitItem ? limitItem.kqPrizeLimit : [],\r\n      isShowLimitSetDialogClose: false\r\n    }\r\n    this.init();\r\n    Bus.emit('gameIdChanged', this.id);\r\n  }\r\n  init() {\r\n    this.getCurIssue(this.id);\r\n    this.getUserPoint(this.id);\r\n    this.getHistoryIssue(this.id);\r\n    // this.getLimitData(this.id);\r\n  }\r\n  initSocket() {\r\n    this.mysocket = new Socket({\r\n      url: this.props.store.common.broadcaseWSUrl,\r\n      name: 'gameIndex',\r\n      receive: (data) => {\r\n        if (data.type === 'openWinCode') {\r\n          this.openWinCode(parseInt(data.content[0].lottId, 10), data.content[0]);\r\n        }\r\n        if (data.type === 'betNotify') {\r\n          Bus.emit('__pushBetRemind', data.content)\r\n        }\r\n      },\r\n      open: () => {\r\n        this.mysocket && this.mysocket.send(JSON.stringify(Object.assign({action: 'noauth'}, {})));\r\n      }\r\n    }, true);\r\n  }\r\n  componentDidMount() {\r\n    this.initSocket();\r\n    Bus.on('onSetLimit', this.onSetLimit);\r\n  }\r\n  onSetLimit = () => {\r\n    this.setState({isShowLimitSetDialog: !this.state.isShowLimitSetDialog, isShowLimitSetDialogClose: true, limitLevelList: this.props.store.game.getLimitDataOfKqByGameId(this.id) || []});\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    // console.log(this.props.location.pathname, nextProps.location.pathname, '?????')\r\n    this.id = parseInt(nextProps.match.params.id || '1', 10);\r\n    this.gameType = getGameTypeByGameId(this.id);\r\n    Bus.emit('gameIdChanged', this.id);\r\n    if (this.props.match.params.id !== nextProps.match.params.id) {\r\n      let limitItem = this.props.store.game.getLimitListItemById(this.id);\r\n      let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n      let menus: GameMethodMenu[] = getMethodsConfigByType(this.gameType);\r\n      let curMenuEname = menus && menus[0].ename\r\n      let ludanTab = getLudanTabByTypeAndName(this.gameType, curMenuEname, bestLudan && bestLudan.codeStyle);\r\n      let ludanMenus = getTabsByType(this.gameType, curMenuEname);\r\n      let gameLimitLevel = this.props.store.game.getGameLimitLevelByGameId(this.id); // 设置的限红数据\r\n      let limitListItem = this.props.store.game.getLimitListItemById(this.id); \r\n      this.setState({\r\n        curMenuIndex: 0,\r\n        curMenuEname,\r\n        curGameMethodItems: this.getMethodItemsByIds((menus && menus[0].ids) || []),\r\n        subMethods: (menus && menus[0].subMethods) || [],\r\n        defaultMenu: (ludanTab && ludanTab.name) || '',\r\n        isShowLudan: ludanMenus && ludanMenus.length > 0,\r\n        isShowLimitSetDialog: !gameLimitLevel,\r\n        limitLevelList: !gameLimitLevel ? (limitListItem ? limitListItem.kqPrizeLimit : []) : []\r\n      });\r\n      this.init();\r\n    }\r\n  }\r\n  openWinCode(id: number, openHistoryItem: any) {\r\n    if (id === this.id) {\r\n      let issueList = this.state.issueList;\r\n      issueList.unshift(openHistoryItem);\r\n      this.setState({\r\n        lastIssue: issueList[0].issue,\r\n        openNumbers: issueList[0].code.split(','),\r\n        issueList: issueList\r\n      });\r\n      this.getCurIssue(this.id);\r\n    }\r\n  }\r\n  // 获取当前玩法下面的子玩法列表\r\n  getMethodItemsByIds(ids: string[]) {\r\n    let mItems: any[] = [];\r\n    ids.forEach((id: string) => {\r\n      let items =  this.methodItems[id]();\r\n      items.rows = items.rows.map((row: any) => {\r\n        row.vs.map((vs: any) => {\r\n          if (typeof vs === 'object') {\r\n            vs.val = '';\r\n          }\r\n          return vs;\r\n        });\r\n        return row;\r\n      })\r\n      mItems.push(Object.assign({id}, items));\r\n    });\r\n    return mItems;\r\n  }\r\n\r\n  // 更新玩法菜单选中的index\r\n  updateMethodMenuIndex = (index: number) => {\r\n    this.setState({curMenuIndex: index});\r\n  }\r\n  // 更新玩法菜单选中的index\r\n  updateSubMethodMenuIndex = (index: number) => {\r\n    this.setState({curSubMenuIndex: index});\r\n  }\r\n  methodMenuChangedCB = (method: GameMethodMenu) => {\r\n    let curGameMethodItems = this.getMethodItemsByIds(method.ids || []);\r\n    let ludanMenus = getTabsByType(this.gameType, method.ename);\r\n    let limitItem = this.props.store.game.getLimitListItemById(this.id);\r\n    let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n    let ludanTab = getLudanTabByTypeAndName(this.gameType, method.ename, bestLudan && bestLudan.codeStyle);\r\n    let curSubMenuIndex = this.gameType === LOTTERY_TYPES.HC6 ? -1 : 0;\r\n    this.setState({\r\n      subMethods: method.subMethods || [],\r\n      curGameMethodItems,\r\n      totalBetCount: 0,\r\n      totalBetAmount: 0,\r\n      curSubMenuIndex,\r\n      curMenuEname: method.ename,\r\n      defaultMenu: (ludanTab && ludanTab.name) || '',\r\n      // defaultSubMenu: '',\r\n      isShowLudan: ludanMenus && ludanMenus.length > 0\r\n    }, this.updateOddsOfMethod);\r\n  }\r\n  updateSubMethods = (method: GameSubMethodMenu) => {\r\n    let curGameMethodItems;\r\n    if (this.gameType === LOTTERY_TYPES.HC6) {\r\n      curGameMethodItems = this.state.curGameMethodItems;\r\n      if (this.state.curMenuEname === 'texiao') {\r\n        curGameMethodItems = this.updateHC6TexiaoMethodItems(curGameMethodItems, method.v)\r\n      }\r\n    } else {\r\n      curGameMethodItems = this.getMethodItemsByIds(method.ids || []);\r\n    }\r\n    this.setState({\r\n      curSubMethod: method,\r\n      curGameMethodItems\r\n    }, this.calcBet);\r\n  }\r\n  // 更新选中的玩法项数据\r\n  updateMethodItem = (i: number, j: number, k: number, selected?: boolean | undefined, value?: string | undefined) => {\r\n    let methodItems = this.state.curGameMethodItems;\r\n    if (selected !== undefined) {\r\n      methodItems[i].rows[j].vs[k].s = selected;\r\n    }\r\n    if (value !== undefined) {\r\n      methodItems[i].rows[j].vs[k].amt = value;\r\n    }\r\n    this.setState({\r\n      curGameMethodItems: methodItems\r\n    }, this.calcBet);\r\n  }\r\n  updateMethodRow = (i: number, j: number, selected?: boolean | undefined) => {\r\n    let methodItems = this.state.curGameMethodItems;\r\n    if (selected !== undefined) {\r\n      methodItems[i].rows[j].s = selected;\r\n    }\r\n    this.setState({\r\n      curGameMethodItems: methodItems\r\n    }, this.calcBet);\r\n  }\r\n  // 更新当前游戏当前玩法相关的odd\r\n  updateOddsOfMethod(odds?: any) {\r\n    if (!odds) {\r\n      this.getUserPoint(this.id);\r\n      return null;\r\n    }\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n    let methodId: string = '';\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        methodId = methodItem.id.split(':')[0];\r\n        row.vs = row.vs.map((vsItem: any) => {\r\n          if (typeof vsItem === 'object') {\r\n            if (odds[methodId] && odds[methodId][vsItem.oddIndex || 0]) {\r\n              vsItem.odd = odds[methodId][vsItem.oddIndex || 0].maxprize;\r\n            }\r\n          }\r\n          return vsItem;\r\n        });\r\n        if (row.posOdd) {\r\n          row.odd =  odds[methodId][row.oddIndex || 0].maxprize;\r\n        }\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n    this.setState({curGameMethodItems});\r\n  }\r\n\r\n  // 更新默认初始下注金额\r\n  updateDefaultInitMethodItemAmount = (amount: number): void => {\r\n    this.setState({defaultInitMethodItemAmount: amount}, this.calcBet);\r\n  }\r\n  calcBet() {\r\n    let methodList: DataMethodItem[] = [];\r\n    let method: any;\r\n    let betCount: number = 0;\r\n    let totalAmount: number = 0;\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n\r\n    // 构造选择的号码集合，金额集合, 总金额\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        row.nc = [];\r\n        row.amtc = [];\r\n        row.tmc = 0;\r\n        row.vs.forEach((vsItem: any) => {\r\n          if (typeof vsItem === 'object') {\r\n            if (vsItem.s) {\r\n              row.nc.push(vsItem.n);\r\n              row.amtc.push(vsItem.amt);\r\n              row.tmc += parseInt(vsItem.amt || '0', 10);\r\n            }\r\n          }\r\n        });\r\n        totalAmount += row.tmc;\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n\r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      method = {id: gameMethodItem.id, methodTypeName: gameMethodItem.methodTypeName, rows: [], repeatCount: 0};\r\n      gameMethodItem.rows.forEach((row: any) => {\r\n        method.rows.push(row.nc.slice(0));\r\n      });\r\n      methodList.push(method);\r\n    });\r\n\r\n    // 计算重复数\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (['zx_q2', 'zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        gameMethodItem.repeatCount = countRepeat(methodList.map((methodItem: DataMethodItem) => methodItem.id === gameMethodItem.id ? methodItem.rows : []));\r\n      }\r\n    });\r\n    \r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (!['zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        methodList = methodList.map((methodItem: DataMethodItem) => {\r\n          if (gameMethodItem.id === methodItem.id) {\r\n            methodItem.rows = methodItem.rows.map((row: any) => row.length);\r\n          }\r\n          methodItem.repeatCount = gameMethodItem.repeatCount;\r\n          return methodItem;\r\n        });\r\n      }\r\n    });\r\n\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      // if (['texiao'].includes(gameMethodItem.methodTypeName)) {\r\n      if (gameMethodItem.calcMode === 'row') {  \r\n        methodList = [];\r\n        method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n        gameMethodItem.rows.forEach((row: any) => {\r\n          if (row.s) {\r\n            method.rows.push(row.n || row.pv);\r\n          }\r\n        });\r\n        method.rows = [method.rows.length];\r\n        methodList.push(method);\r\n      }\r\n    });\r\n\r\n    // 计算总注数\r\n    methodList.forEach((methodItem: DataMethodItem) => {\r\n      betCount += this.calc[methodItem.id]({nsl: methodItem.rows, ns: methodItem.rows, repeatCount: methodItem.repeatCount});\r\n      // 任选，组选，直选金额计算\r\n      if (['rx_nzn', 'zux_q2', 'zux_q3', 'zx_q2', 'zx_q3'].includes(methodItem.methodTypeName)) {\r\n        totalAmount = betCount * this.state.defaultInitMethodItemAmount;\r\n      }\r\n    });\r\n\r\n    this.setState({totalBetCount: betCount, totalBetAmount: totalAmount});\r\n  }\r\n  // 重置所有选中玩法项\r\n  resetSelectedOfAllMethodItem = () => {\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        row.s = false;\r\n        row.vs = row.vs.map((vsItem: any) => { \r\n          if (typeof vsItem === 'object') {\r\n            vsItem.s = false; vsItem.amt = ''; return vsItem; \r\n          }\r\n        });\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n    this.setState({curGameMethodItems, totalBetCount: 0, totalBetAmount: 0});\r\n  }\r\n  orderFinishCB = (status: boolean) => {\r\n    if (status) {\r\n      this.resetSelectedOfAllMethodItem();\r\n    }\r\n  }\r\n  getCurIssue = (gameid: number) => {\r\n    APIs.curIssue({gameid}).then((data: any) => {\r\n      if (data.success > 0) {\r\n        this.setState({\r\n          curIssue: data.issue,\r\n          curTime: data.current,\r\n          remainTime: Math.floor((data.saleend - data.current) / 1000) || (this.state.remainTime + 0.05)\r\n        })\r\n      } else {\r\n        this.setState({curIssue: ''});\r\n      }\r\n    });\r\n  }\r\n  getHistoryIssue(gameid: number) {\r\n    APIs.historyIssue({gameid}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        if (data.items.length > 0) {\r\n          this.setState({\r\n            lastIssue: data.items[0].issue,\r\n            openNumbers: data.items[0].code.split(','),\r\n            issueList: data.items\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  getUserPoint(gameid: number) {\r\n    APIs.myNewPoint({gameid}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        this.setState({odds: data.items})\r\n        this.updateOddsOfMethod(data.items);\r\n      }\r\n    });\r\n  }\r\n\r\n  changeTabIndex = (idx: number) => {\r\n    this.setState({\r\n      tabIndex: idx\r\n    })\r\n  }\r\n\r\n  getLimitData(id: number) {\r\n    APIs.lottSets({lotteryIds: id, v: 1}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        this.props.store.game.setLimitList([Object.assign({id}, data.data[id])]);\r\n        this.props.store.game.setLimitLevelList(data.data[id].kqPrizeLimit);\r\n      }\r\n    });\r\n  }\r\n  onLimitChoiceCB = (level: number) => {\r\n    this.props.store.game.updateGamesLimitLevel({gameId: this.id, level});\r\n    this.onCloseLimitChoiceHandler();\r\n  }\r\n  onCloseLimitChoiceHandler = () => {\r\n    this.setState({isShowLimitSetDialog: false});\r\n  }\r\n  componentWillUnmount() {\r\n    this.mysocket && this.mysocket.removeListen();\r\n    Bus.off('onSetLimit', this.onSetLimit);\r\n  }\r\n  onGameHeaderUpdateHandler = (data: any) => {\r\n    if (data.type === 'ludan') {\r\n      this.setState({isExpandLudan: data.data});\r\n    }\r\n  }\r\n  updateHC6TexiaoMethodItems(methodItems: any, subMethodMenuValue: string = '') {\r\n    const animals = subMethodMenuValue === '1' ? ANIMALS_POULTRY : ANIMALS_BEAST;\r\n    methodItems = methodItems.map((method: any) => {\r\n      method.rows = method.rows.map((row: any) => {\r\n        row.s = animals.includes(row.n);\r\n        return row;\r\n      })\r\n      return method;\r\n    });\r\n    return methodItems;\r\n  }\r\n  render() {\r\n    return (\r\n      <article className=\"game-view\">\r\n        <GameCommonDataContext.Provider value={{gameId: this.id, gameType: this.gameType}} >\r\n          <GameHeader \r\n            gameId={this.id}\r\n            gameType={this.gameType}\r\n            curIssue={this.state.curIssue}\r\n            lastIssue={this.state.lastIssue}\r\n            curTime={this.state.curTime}\r\n            remainTime={this.state.remainTime}\r\n            openNumbers={this.state.openNumbers}\r\n            getNewestIssue={this.getCurIssue}\r\n            isExpandLudan={this.state.isExpandLudan}\r\n            update={this.onGameHeaderUpdateHandler}\r\n          />\r\n          {this.state.isShowLudan && this.state.isExpandLudan &&\r\n            <Ludan \r\n              gameId={this.id} \r\n              gameType={this.gameType} \r\n              maxColumns={this.state.maxColumns} \r\n              maxRows={this.state.maxRows} \r\n              issueList={this.state.issueList.slice(0).reverse()} \r\n              methodMenuName={this.state.curMenuEname} \r\n              defaultMenu={this.state.defaultMenu} \r\n            />\r\n          }\r\n          <section className=\"game-main\">\r\n            <MethodMenu gameType={this.gameType} curMenuIndex={this.state.curMenuIndex} methodMenuChangedCB={this.methodMenuChangedCB} updateMethodMenuIndex={this.updateMethodMenuIndex}/>\r\n            {this.state.subMethods.length > 0 && \r\n              <SubMethodMenu \r\n                gameType={this.gameType} \r\n                curSubMenuIndex={this.state.curSubMenuIndex} \r\n                subMethods={this.state.subMethods} \r\n                odds={this.state.odds} \r\n                updateSubMethods={this.updateSubMethods} \r\n                updateSubMethodMenuIndex={this.updateSubMethodMenuIndex}\r\n              />\r\n            }\r\n            <Play \r\n              curGameMethodItems={this.state.curGameMethodItems} \r\n              gameType={this.gameType} \r\n              defaultInitMethodItemAmount={this.state.defaultInitMethodItemAmount}\r\n              updateMethodItem={this.updateMethodItem} \r\n              updateMethodRow={this.updateMethodRow}\r\n              curSubMethod={this.state.curSubMethod}\r\n            />\r\n            <OrderBar \r\n              gameId={this.id} \r\n              gameType={this.gameType} \r\n              curIssue={this.state.curIssue} \r\n              betCount={this.state.totalBetCount} \r\n              amount={this.state.totalBetAmount} \r\n              curGameMethodItems={this.state.curGameMethodItems} \r\n              defaultInitMethodItemAmount={this.state.defaultInitMethodItemAmount}\r\n              updateDefaultInitMethodItemAmount={this.updateDefaultInitMethodItemAmount} \r\n              orderFinishCB={this.orderFinishCB}\r\n              resetSelectedOfAllMethodItem={this.resetSelectedOfAllMethodItem}\r\n            />\r\n           \r\n          </section>\r\n        </GameCommonDataContext.Provider>\r\n        {this.state.isShowLimitSetDialog && \r\n          <LimitSetDialog \r\n            isShow={this.state.isShowLimitSetDialog} \r\n            isShowLimitSetDialogClose={this.state.isShowLimitSetDialogClose} \r\n            gameId={this.id} \r\n            limitLevelList={this.state.limitLevelList} \r\n            onLimitChoiceCB={this.onLimitChoiceCB} \r\n            onCloseHandler={this.onCloseLimitChoiceHandler} \r\n          />\r\n        }\r\n      </article>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;\r\n"],"sourceRoot":""}