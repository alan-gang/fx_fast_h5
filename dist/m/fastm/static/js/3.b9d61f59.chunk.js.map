{"version":3,"sources":["utils/timer.ts","components/ludan/LudanMenu.tsx","components/ludan/index.tsx","components/game-header/index.tsx","game/gameMethods.ts","components/method-menu/index.tsx","components/sub-method-menu/index.tsx","components/grid/row.tsx","components/grid/col.tsx","components/play/index.tsx","game/base.ts","game/calc.ts","utils/game.ts","components/order-bar/index.tsx","context/gameContext.ts","components/limit-set-dialog/index.tsx","views/game/index.tsx"],"names":["Timer","time","fn","step","timerItval","this","start","window","setInterval","clearInterval","LundanMenu","inject","observer","props","myScrollRef","scrollToSelectedElement","selectedItem","document","querySelector","current","bscroll","x","scrollToElement","changeMenu","menu","updateMenu","React","createRef","nextProps","refresh","className","ref","tabs","length","map","i","key","selectedMenu","name","onClick","title","Component","Ludan","state","setState","updateLudanList","ludanList","getLuDanListByMethod","issueList","slice","gameType","maxRows","maxColumns","getAllTabsByTypeAndName","methodMenuName","defaultMenu","isShowLudanMenu","LudanMenu","LundanTable","isScroll","GameHeader","curIssue","curTime","onLimitLevelChanged","value","store","game","updateGamesLimitLevel","gameId","level","parseInt","curGameLimitLevel","onLudanHandler","update","type","data","isExpandLudan","getNum","n","LOTTERY_TYPES","K3","limitItem","getLimitListItemById","getGameLimitLevelByGameId","timer","remainTime","hours","minutes","seconds","limitLevelList","kqPrizeLimit","tipText","initTimer","stateData","timeStr","times","close","Math","floor","t","getNewestIssue","timeFormat","split","clearTimer","HC6","num","isHc6","String","padStart","getAnimalByNum","lastIssue","openNumbers","Fragment","renderOpenNumbers","hz","params","Object","assign","dx","ds","lh","methodsConfig","SSC","ename","recentType","min","ids","range","end","G11X5","PK10","changeTitle","subMethods","s","v","oddIndex","class","odd","noOdd","getMethodsConfigByType","getMethodPosByGameTypeAndId","methodId","findIndex","m","find","id","MethodMenu","onMenuHandler","index","updateMethodMenuIndex","methodMenuChangedCB","menus","subMenus","nextState","curMenuIndex","SubMethodMenu","methodItems","onSubMethodHandler","subMethod","updateSubMethods","updateSubMethodMenuIndex","methodOdds","odds","parseId","maxprize","sm","curSubMenuIndex","bind","getOddById","Row","children","PureComponent","Col","styl","gutter","padding","span","style","getStyle","Play","onMethodItemHandler","j","k","selected","methodTypeName","event","amount","defaultInitMethodItemAmount","includes","updateMethodItem","onRowClickHandler","updateMethodRow","forceUpdate","curGameMethodItems","methodItem","layout","rows","row","col","hidePos","subpn","posOdd","vs","vsItem","e","icons","iconNum","noodd","C","ceil","factorial","permutationChoice","A","nsl","forEach","nl","repeatCount","P","ns","f","countRepeat","temp","join","filter","Array","from","Set","ORDER_BAR_CONTAINER_CLASS","CALC_BET_NEED_COMPUTED_REPEAT","OrderBar","calc","orderBarContainer","coinChoosed","user","balance","updateDefaultInitMethodItemAmount","onResetHandler","alert","text","onPress","resetSelectedOfAllMethodItem","onOrderHandler","showCoinSet","order","onFocusHandler","onAmountChanged","target","trim","eType","console","log","test","onBlurHandler","createElement","issue","betList","totMoney","fail","validateLimit","lotteryId","limitLevel","errorMsg","items","totalmoney","gameid","limit","getLimitLevelData","minAmt","maxAmt","totProjs","isusefree","isFastBet","pos","val","content","betCount","calcBet","nc","push","projs","money","contents","param","nonasv","p","pv","totalnums","trace","isJoinPool","totalCount","calcMode","methodid","codes","count","mode","userpoint","JSON","stringify","method","methodList","gameMethodItem","loading","betData","setTimeout","hide","APIs","then","success","msg","resetAmount","updateBalance","orderFinishCB","catch","body","appendChild","removeChild","elements","onChange","onBlur","onFocus","maxLength","placeholder","disabled","ReactDOM","createPortal","GameCommonDataContext","createContext","LimitSetDialog","onLimitChoiceHandler","curLimitIndex","onCloseHandler","onConfirmHandler","onLimitChoiceCB","init","item","visible","maskClosable","isShowLimitSetDialogClose","Game","mysocket","onSetLimit","isShowLimitSetDialog","getLimitDataOfKqByGameId","getMethodItemsByIds","ludanMenus","getTabsByType","bestLudan","ludanTab","getLudanTabByTypeAndName","codeStyle","totalBetCount","totalBetAmount","curMenuEname","isShowLudan","updateOddsOfMethod","updateHC6TexiaoMethodItems","curSubMethod","undefined","amt","status","getCurIssue","saleend","changeTabIndex","idx","tabIndex","onCloseLimitChoiceHandler","onGameHeaderUpdateHandler","match","getGameTypeByGameId","gameLimitLevel","Bus","emit","getUserPoint","getHistoryIssue","getBestLudanByGameId","sessionData","sessionStorage","getItem","agentCode","getUrlParams","parse","Socket","url","common","broadcaseWSUrl","receive","openWinCode","lottId","open","send","action","initSocket","signIn","getLoginData","setBroadcaseWSUrl","on","limitListItem","openHistoryItem","unshift","code","mItems","totalAmount","amtc","tmc","historyIssue","myNewPoint","lottSets","lotteryIds","setLimitList","setLimitLevelList","removeListen","off","subMethodMenuValue","animals","ANIMALS_POULTRY","ANIMALS_BEAST","defaultSubMenu","subM","getBestLudan","updateInfoWithBestLudan","Provider","reverse","limitList","isShow"],"mappings":"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","file":"m/fastm/static/js/3.b9d61f59.chunk.js","sourcesContent":["class Timer {\r\n  private timerItval: number = 0;\r\n  private fn: any;\r\n  /**\r\n   * 定时器\r\n   * @param {*} time  时间\r\n   * @param {*} fn    回调函数\r\n   * @param {*} step\r\n   */\r\n  constructor(time: number, fn: any, step?: number) {\r\n    this.fn = fn;\r\n    this.start(time, fn, step);\r\n  }\r\n  private start(time: number, fn: any, step: number = 1000): void {\r\n    this.timerItval = window.setInterval(() => {\r\n      if (time <= 0) {\r\n        clearInterval(this.timerItval);\r\n        fn(0, true);\r\n        return;\r\n      }\r\n      fn(time, false);\r\n      time--;\r\n    }, step);\r\n  }\r\n  public close(): void {\r\n    clearInterval(this.timerItval);\r\n    // this.fn(0, true);\r\n  }\r\n}\r\n\r\nexport default Timer;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport Bus from '../../utils/eventBus';\r\nimport MyScroll from '../my-scroll';\r\nimport './ludanMenu.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  tabs: any[];\r\n  selectedMenu?: string;\r\n  selectedSubMenu?: string;\r\n  methodMenuName?: string;\r\n  updateMenu(menuName: any): void;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass LundanMenu extends Component<Props, object> {\r\n  myScrollRef: any;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.myScrollRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    this.scrollToSelectedElement();\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    this.myScrollRef.current.refresh();\r\n    this.scrollToSelectedElement();\r\n  }\r\n  scrollToSelectedElement = () => {\r\n    let selectedItem = document.querySelector('.ludan-menu-view .menu-item.selected');\r\n    if (this.myScrollRef.current.bscroll && selectedItem && this.myScrollRef.current.bscroll) {\r\n      this.myScrollRef.current.bscroll.x += 1;\r\n      this.myScrollRef.current.bscroll.scrollToElement(selectedItem, 150, true);\r\n    }\r\n  }\r\n  changeMenu = (menu: any) => {\r\n    this.props.updateMenu(menu);\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"ludan-menu-view\">\r\n        <MyScroll ref={this.myScrollRef}>\r\n          <nav className=\"menu\">\r\n            {this.props.tabs && this.props.tabs.length > 0 && this.props.tabs.map((menu: any, i: number) => (\r\n              <div key={i} className={`menu-item ${this.props.selectedMenu === menu.name ? 'selected' : ''}`} onClick={() => this.changeMenu(menu)}>{menu.title}</div>\r\n            ))}\r\n          </nav>\r\n        </MyScroll>\r\n      </section>  \r\n    )\r\n  }\r\n}\r\n\r\nexport default LundanMenu;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { getLuDanListByMethod, getTabsByType, getAllTabsByTypeAndName } from '../../utils/ludan';\r\nimport LudanMenu from './LudanMenu';\r\nimport LundanTable from './LundanTable';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  gameId: number;\r\n  methodMenuName: string;\r\n  maxColumns: number;\r\n  maxRows: number;\r\n  issueList: any[];\r\n  defaultMenu?: string;\r\n  isShowLudanMenu?: boolean;\r\n  isScroll?: boolean;\r\n}\r\n\r\ninterface State {\r\n  tabs: any[];\r\n  selectedMenu?: string;\r\n  ludanList: any[];\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass Ludan extends Component<Props, object> {\r\n  state: State;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    let tabs = getAllTabsByTypeAndName(this.props.gameType, this.props.methodMenuName);\r\n    // ssc -> 整合 -> 万位大小\r\n    let selectedMenu = this.props.defaultMenu || (tabs.length > 0 ? tabs[0].name : '');\r\n    let ludanList = getLuDanListByMethod(this.props.issueList.slice(0), this.props.gameType,  selectedMenu || '', this.props.maxRows, this.props.maxColumns - 1) || []\r\n    this.state = {\r\n      selectedMenu,\r\n      ludanList,\r\n      tabs\r\n    }\r\n  }\r\n  updateMenu = (menu: any) => {\r\n    this.setState({\r\n      selectedMenu: menu.name,\r\n    }, this.updateLudanList);\r\n  }\r\n  updateLudanList = () => {\r\n    this.setState({\r\n      ludanList: getLuDanListByMethod(this.props.issueList.slice(0), this.props.gameType, this.state.selectedMenu || '', this.props.maxRows, this.props.maxColumns) || []\r\n    });\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    let tabs = getAllTabsByTypeAndName(nextProps.gameType, nextProps.methodMenuName);\r\n    let selectedMenu = nextProps.defaultMenu || (tabs.length > 0 ? tabs[0].name : '');\r\n    let ludanList = getLuDanListByMethod(nextProps.issueList.slice(0), nextProps.gameType,  this.state.selectedMenu || '', nextProps.maxRows, nextProps.maxColumns) || []\r\n    this.setState({\r\n      selectedMenu,\r\n      ludanList,\r\n      tabs\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"ludan-view\">\r\n        {this.props.isShowLudanMenu !== false && <LudanMenu selectedMenu={this.state.selectedMenu} tabs={this.state.tabs} updateMenu={this.updateMenu} methodMenuName={this.props.methodMenuName} />}\r\n        <LundanTable maxColumns={this.props.maxColumns} maxRows={this.props.maxRows} ludanList={this.state.ludanList} isScroll={this.props.isScroll} />\r\n      </section>  \r\n    )\r\n  }\r\n}\r\n\r\nexport default Ludan;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport Timer from '../../utils/timer';\r\nimport { timeFormat } from '../../utils/date';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { getAnimalByNum } from '../../game/hc6';\r\n\r\nimport './index.styl';\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  gameId: number;\r\n  curIssue?: string;\r\n  lastIssue?: string;\r\n  curTime?: number;\r\n  remainTime: number;\r\n  openNumbers: string[];\r\n  isExpandLudan: boolean;\r\n  getNewestIssue(gameid: number): void;\r\n  update(data: any): void;\r\n}\r\n\r\ninterface State {\r\n  timer: any;\r\n  remainTime: number;\r\n  hours: string;\r\n  minutes: string;\r\n  seconds: string;\r\n  limitLevelList: LimitLevelItem[];\r\n  curGameLimitLevel: number;\r\n  tipText: string;\r\n}\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass GameHeader extends Component<Props, object> {\r\n  state: State;\r\n  curIssue?: string;\r\n  curTime?: number;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    let limitItem = props.store.game.getLimitListItemById(props.gameId);\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    this.curIssue = props.curIssue;\r\n    this.curTime = props.curTime;\r\n    this.state = {\r\n      timer: null,\r\n      remainTime: this.props.remainTime,\r\n      hours: '00',\r\n      minutes: '00',\r\n      seconds: '00',\r\n      limitLevelList: (limitItem && limitItem.kqPrizeLimit) || [],\r\n      curGameLimitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1,\r\n      tipText: '第一次进入需选择限红；再次进入不需要选择限红；除非该游戏限红与之前游戏限红不同。当切换不同的限红模式时，再次投注同一彩种，需至少间隔1期再投注。'\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.initTimer(this.props.remainTime);\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    let limitItem = nextProps.store.game.getLimitListItemById(nextProps.gameId);\r\n    let curGameLimitLevel = nextProps.store.game.getGameLimitLevelByGameId(nextProps.gameId);\r\n    let stateData: any = {\r\n      limitLevelList: (limitItem && limitItem.kqPrizeLimit) || [],\r\n      curGameLimitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    }\r\n    if (this.curIssue !== nextProps.curIssue || this.curTime !== nextProps.curTime) {\r\n      this.curIssue = nextProps.curIssue;\r\n      this.curTime = nextProps.curTime;\r\n      stateData.remainTime = nextProps.remainTime;\r\n      this.initTimer(nextProps.remainTime);\r\n    }\r\n    this.setState(stateData);\r\n  }\r\n  initTimer(remainTime: number) {\r\n    if (remainTime <= 0) return;\r\n    let timer = this.state.timer;\r\n    let timeStr: string = '';\r\n    let times: string[] = [];\r\n    if (timer && timer.close) {\r\n      timer.close();\r\n      timer = null;\r\n    }\r\n    timer = new Timer(Math.floor(remainTime), (t: number): void => {\r\n      if (t <= 0) {\r\n        this.props.getNewestIssue(this.props.gameId);\r\n      }\r\n      timeStr = timeFormat(t * 1000);\r\n      times = timeStr.split(':');\r\n      this.setState({hours: times[0], minutes: times[1], seconds: times[2]});\r\n    });\r\n    this.setState({timer});\r\n  }\r\n  onLimitLevelChanged = (value: any) => {\r\n    this.props.store.game.updateGamesLimitLevel({gameId: this.props.gameId, level: parseInt(value, 10)});\r\n    this.setState({\r\n      curGameLimitLevel: parseInt(value, 10)\r\n    });\r\n  }\r\n  onLudanHandler = () => {\r\n    this.props.update({type: 'ludan', data: !this.props.isExpandLudan})\r\n  }\r\n  clearTimer(): void {\r\n    if (this.state.timer && this.state.timer.close) {\r\n      this.state.timer.close();\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.clearTimer();\r\n  }\r\n  isHc6() {\r\n    return this.props.gameType === LOTTERY_TYPES.HC6;\r\n  }\r\n  getNum = (n: any) => {\r\n    if (LOTTERY_TYPES.K3 === this.props.gameType) {\r\n      return '';\r\n    } else {\r\n      return n;\r\n    }\r\n  }\r\n  renderOpenNumbers(num: string, i: number) {\r\n    if (this.isHc6()) {\r\n      if (i === 5) {\r\n        return (<div key={i} className={`icon-plus`}>+</div>)\r\n      }\r\n      return (<div><div key={i} className={`open-num-item n-${String(num).padStart(2, '0')}`}>{String(num).padStart(2, '0')}</div><div className=\"animal\">{getAnimalByNum(parseInt(num, 10))}</div></div>)\r\n    } else {\r\n      return <div key={i} className={`open-num-item n-${num}`}>{this.getNum(num)}</div> \r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <section className={`game-header-view ${this.props.gameType}`}>\r\n        <section className=\"flex ai-c last-issue-sec\">\r\n          <div>第{this.props.lastIssue}期：</div>\r\n          <div className=\"nums-wp\">\r\n            {this.props.openNumbers.map((num: string, i: number) => (\r\n              <React.Fragment  key={i}>{this.renderOpenNumbers(num, i)}</React.Fragment>\r\n            ))}\r\n          </div>\r\n        </section>\r\n        <section className=\"flex ai-c jc-sb cur-issue-sec\">\r\n          <div className=\"flex ai-c\">\r\n            <div className=\"txt-r cur-issue-wp\">距{this.props.curIssue}期截止:</div>\r\n            <div className=\"time-wp flex ai-c jc-c\">\r\n              <span className=\"hour-wp\">{this.state.hours}</span>\r\n              <span className=\"colon\">:</span>\r\n              <span className=\"minute-wp\">{this.state.minutes}</span>\r\n              <span className=\"colon\">:</span>\r\n              <span className=\"second-wp\">{this.state.seconds}</span>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex ai-c\" onClick={this.onLudanHandler}>路单走势<span className={`icon-triangle ${this.props.isExpandLudan ? 'up' : 'down'}`}></span></div>\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameHeader;\r\n","\r\nimport { LOTTERY_TYPES } from '../utils/config';\r\nimport { MethodsConfig } from '../typings/game-methods';\r\nimport { GameMethodMenu } from '../typings/games';\r\n\r\n// 近期开奖配置\r\nconst hz = (params = {}) => {\r\n  return Object.assign({\r\n    title: '和值',\r\n    type: 'hz'\r\n  }, params)\r\n}\r\n\r\nconst dx = (params = {}) => {\r\n  return Object.assign({\r\n    title: '大小',\r\n    type: 'dx'\r\n  }, params)\r\n}\r\n\r\nconst ds = {\r\n  title: '单双',\r\n  type: 'ds'\r\n}\r\n\r\nconst kd = {\r\n  title: '跨度',\r\n  type: 'kd'\r\n}\r\n\r\nconst color = {\r\n  title: '颜色',\r\n  type: 'ys'\r\n}\r\n\r\nconst lh = (params: any) => {\r\n  return Object.assign({\r\n    title: '龙虎',\r\n    type: 'lh'\r\n  }, params)\r\n}\r\n\r\n// 玩法配置\r\nexport let methodsConfig: MethodsConfig = {\r\n  [LOTTERY_TYPES.SSC]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({min: 22})],\r\n      ids: ['1251:1', '1250:1', '1274:1', '1275:1', '1276:1']\r\n    },\r\n    {\r\n      name: '定位',\r\n      ename: 'dw',\r\n      recentType: [dx({min: 4}), ds],\r\n      ids: ['1253:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lhh',\r\n      recentType: [lh({title: '万千', range: {start: 0, end: 2}})],\r\n      ids: ['1273:1']\r\n    },\r\n    {\r\n      name: '一字组合',\r\n      ename: 'yzzh',\r\n      recentType: [dx({min: 4}), ds],\r\n      ids: ['1256:1', '1257:1', '1258:1', '1259:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.G11X5]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({min: 22})],\r\n      ids: ['2050:1', '2050:2', '2053:2', '2051:1']\r\n    },\r\n    {\r\n      name: '定位',\r\n      ename: 'dw',\r\n      recentType: [dx({min: 4})],\r\n      ids: ['2052:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lh',\r\n      recentType: [lh({name: '一位VS二位', range: {start: 0, end: 2}})],\r\n      ids: ['2053:1']\r\n    },\r\n    // {\r\n    //   name: '任选',\r\n    //   ename: 'rx',\r\n    //   recentType: [dx({min: 4})],\r\n    //   ids: ['2054:1'],\r\n    //   subMethods: [\r\n    //     {s: true, name: '一中一', v: '1z1', oddIndex: 0, class: '', mid: '2054', odd: '', ids: ['2054:1']},\r\n    //     {s: false, name: '二中二', v: '2z2', oddIndex: 0, class: '', mid: '2077', odd: '', ids: ['2077:1']},\r\n    //     {s: false, name: '三中三', v: '3z3', oddIndex: 0, class: '', mid: '2078', odd: '', ids: ['2078:1']},\r\n    //     {s: false, name: '四中四', v: '4z4', oddIndex: 0, class: '', mid: '2079', odd: '', ids: ['2079:1']},\r\n    //     {s: false, name: '五中五', v: '5z5', oddIndex: 0, class: '', mid: '2080', odd: '', ids: ['2080:1']},\r\n    //     {s: false, name: '六中五', v: '6z5', oddIndex: 0, class: '', mid: '2081', odd: '', ids: ['2081:1']},\r\n    //     {s: false, name: '七中五', v: '7z5', oddIndex: 0, class: '', mid: '2082', odd: '', ids: ['2082:1']},\r\n    //     {s: false, name: '八中五', v: '8z5', oddIndex: 0, class: 'no-bd-r', mid: '2083', odd: '', ids: ['2083:1']}\r\n    //   ]\r\n    // },\r\n    // {\r\n    //   name: '组选',\r\n    //   ename: 'zux',\r\n    //   ids: ['2055:1', '2056:1'],\r\n    //   recentChild: true,\r\n    //   // subMethods: [\r\n    //   //   {s: true, name: '前二组选', recentType: [hz({title: '前二和值', nForm: true, range: {start: 0, end: 2}})], oddIndex: 0, class: 'layout-lr w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2055', odd: '', ids: ['2055:1']},\r\n    //   //   {s: false, name: '前三组选', recentType: [hz({title: '前三和值', nForm: true,range: {start: 0, end: 3}})], oddIndex: 0, class: 'layout-lr  w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2056', odd: '', ids: ['2056:1']}\r\n    //   // ]\r\n    // },\r\n    // {\r\n    //   name: '直选',\r\n    //   ename: 'zx',\r\n    //   ids: ['2057:1', '2058:1'],\r\n    //   recentChild: true,\r\n    //   // subMethods: [\r\n    //   //   {s: true, name: '前二直选', recentType: [hz({title: '前二和值', nForm: true, range: {start: 0, end: 2}})], oddIndex: 0, class: 'layout-lr w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2057', odd: '', ids: ['2057:1']},\r\n    //   //   {s: false, name: '前三直选', recentType: [hz({title: '前三和值', nForm: true, range: {start: 0, end: 3}})], oddIndex: 0, class: 'layout-lr  w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2058', odd: '', ids: ['2058:1']}\r\n    //   // ]\r\n    // }\r\n  ],\r\n  [LOTTERY_TYPES.PK10]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({range: [{start: 0, end: 1}, {start: 1, end: 2}], changeTitle: ['冠亚开奖号码'], min: 11})],\r\n      ids: ['4053:1', '4053:2', '4050:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lh',\r\n      recentType: [lh({name: '龙虎', changeTitle: ['冠军', '第十名'], range: [{start: 0, end: 1}, {start: 1, end: 2}]})],\r\n      ids: ['4054:1']\r\n    },\r\n    {\r\n      name: '定位01-05',\r\n      ename: 'dwgy',\r\n      ids: ['4055:1:1']\r\n    },\r\n    {\r\n      name: '定位05-10',\r\n      ename: 'dwgy',\r\n      ids: ['4055:1:2']\r\n    },\r\n    {\r\n      name: '冠亚组合',\r\n      ename: 'gyhz',\r\n      recentType: [hz({range: [{start: 0, end: 1}, {start: 1, end: 2}], changeTitle: ['冠亚', ['亚军']], min: 11})],\r\n      ids: ['4050:2', '4051:1', '4052:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.K3]: [\r\n    {\r\n      name: '点数',\r\n      ename: 'diansu',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5050:1', '5051:1']\r\n    },\r\n    {\r\n      name: '三军',\r\n      ename: 'shanjun',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5052:1']\r\n    },\r\n    {\r\n      name: '围骰/全骰',\r\n      ename: 'wqshai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5053:1']\r\n    },\r\n    {\r\n      name: '长牌',\r\n      ename: 'changpai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5054:1']\r\n    },\r\n    {\r\n      name: '短牌',\r\n      ename: 'duanpai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5055:1']\r\n    },\r\n    {\r\n      name: '颜色',\r\n      ename: 'yskd',\r\n      recentType: [color],\r\n      ids: ['5056:1']\r\n    },\r\n    {\r\n      name: '跨度',\r\n      ename: 'yskd',\r\n      recentType: [kd],\r\n      ids: ['5057:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.HC6]: [\r\n    {\r\n      name: '特码',\r\n      ename: 'tema',\r\n      recentType: [],\r\n      ids: ['7015:1', '7001:1']\r\n    },\r\n    {\r\n      name: '特肖',\r\n      ename: 'texiao',\r\n      recentType: [],\r\n      ids: ['7007:1'],\r\n      subMethods: [\r\n        {s: false, name: '家禽', v: '1', oddIndex: 0, class: '', odd: '', noOdd: true, ids: ['7007:1']},\r\n        {s: false, name: '野兽', v: '2', oddIndex: 0, class: '', odd: '', noOdd: true, ids: ['7007:1']}\r\n      ]\r\n    },\r\n    {\r\n      name: '色波',\r\n      ename: 'sebo',\r\n      recentType: [],\r\n      ids: ['7005:1']\r\n    },\r\n    {\r\n      name: '正一码',\r\n      ename: 'zhengyima',\r\n      recentType: [],\r\n      ids: ['7009:1']\r\n    },\r\n    {\r\n      name: '正二码',\r\n      ename: 'zhengerma',\r\n      recentType: [],\r\n      ids: ['7010:1']\r\n    },\r\n    {\r\n      name: '正三码',\r\n      ename: 'zhengshanma',\r\n      recentType: [],\r\n      ids: ['7011:1']\r\n    },\r\n    {\r\n      name: '正四码',\r\n      ename: 'zhengshima',\r\n      recentType: [],\r\n      ids: ['7012:1']\r\n    },\r\n    {\r\n      name: '正五码',\r\n      ename: 'zhengwuma',\r\n      recentType: [],\r\n      ids: ['7013:1']\r\n    },\r\n    {\r\n      name: '正六码',\r\n      ename: 'zhengliuma',\r\n      recentType: [],\r\n      ids: ['7014:1']\r\n    }\r\n  ]\r\n};\r\n\r\n// 匹配玩法对象\r\nexport function getMethodByIds(ids: string[], gameType: string) {\r\n  let curGameTypeMethods = methodsConfig[gameType] || [];\r\n  for (let i = 0; i < curGameTypeMethods.length; i++) {\r\n    if (curGameTypeMethods[i].ids.join('') === ids.join('')) {\r\n      return curGameTypeMethods[i];\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * 获取子玩法列表\r\n * @param {*} gameType 游戏类型（必须）\r\n */\r\nexport function getMethodsConfigByType(gameType: string): GameMethodMenu[] {\r\n  return methodsConfig[gameType];\r\n}\r\n\r\n/**\r\n * 根据游戏类型和玩法ID获取当前玩法在当前游戏类型玩法菜单中的位置\r\n * @param gameType 游戏类型\r\n * @param methodId 玩法ID\r\n */\r\nexport function getMethodPosByGameTypeAndId(gameType: string, methodId: number): number {\r\n  return (methodsConfig[gameType] || []).findIndex((m: GameMethodMenu) => {\r\n    return m.ids.find((id: string) => parseInt(id.split(':')[0], 10) === methodId)\r\n  })\r\n}\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { getMethodsConfigByType } from '../../game/gameMethods';\r\nimport { GameMethodMenu, GameSubMethodMenu } from '../../typings/games';\r\nimport MyScroll from '../my-scroll';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  curMenuIndex: number;\r\n  updateMethodMenuIndex(index: number): void;\r\n  methodMenuChangedCB(methodIds: GameMethodMenu): void;\r\n}\r\n\r\ninterface State {\r\n  menus: GameMethodMenu[];\r\n  subMenus: GameSubMethodMenu[];\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass MethodMenu extends Component<Props, object> {\r\n  state: State;\r\n  myScrollRef: any;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      menus: getMethodsConfigByType(this.props.gameType),\r\n      subMenus: []\r\n    }\r\n    this.myScrollRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    this.myScrollRef.current.refresh();\r\n  }\r\n  onMenuHandler = (menu: GameMethodMenu, index: number) => {\r\n    this.props.updateMethodMenuIndex(index);\r\n    this.props.methodMenuChangedCB(menu);\r\n  }\r\n  componentWillReceiveProps(nextProps: Props, nextState: State) {\r\n    this.myScrollRef.current.refresh();\r\n  }\r\n  render() {\r\n    let menus: GameMethodMenu[] = getMethodsConfigByType(this.props.gameType);\r\n    return (\r\n      <section className=\"method-menu-view\">\r\n        <section className=\"menu-wp\">\r\n          <MyScroll ref={this.myScrollRef}>\r\n            <nav className=\"menu-item-ls\">\r\n              {menus.map((menu, i) => (\r\n                <div key={i} className={`menu-item ${i === this.props.curMenuIndex ? 'selected' : ''}`} onClick={() => {this.onMenuHandler(menu, i)}}><span>{menu.name}</span></div>\r\n              ))}\r\n            </nav>\r\n          </MyScroll>\r\n        </section>\r\n        <section className=\"sub-menu-wp\">\r\n          <nav></nav>\r\n        </section>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MethodMenu;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { GameSubMethodMenu } from '../../typings/games';\r\nimport methodItems from '../../game/methodItems';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  subMethods?: GameSubMethodMenu[];\r\n  odds: any;\r\n  curSubMenuIndex: number;\r\n  updateSubMethods(method: GameSubMethodMenu): void;\r\n  updateSubMethodMenuIndex(index: number): void;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass SubMethodMenu extends Component<Props, object> {\r\n  methodItems: any = methodItems;\r\n  onSubMethodHandler = (subMethod: GameSubMethodMenu, index: number) => {\r\n    this.props.updateSubMethods(subMethod);\r\n    this.props.updateSubMethodMenuIndex(index);\r\n  }\r\n  parseId(id: string = ''): string {\r\n    return id.split(':')[0] || '';\r\n  }\r\n  getOddById(ids: string[], oddIndex: number) {\r\n    let methodOdds = this.props.odds[this.parseId(ids[0])] \r\n    return (methodOdds && methodOdds[oddIndex] && methodOdds[oddIndex].maxprize) || '';\r\n  }\r\n  render() {\r\n    let subMethods = this.props.subMethods;\r\n    return (\r\n      <section className={`sub-method-menu-view ${this.props.gameType}`}>\r\n        <ul className={`flex fw-w sub-method-item-ls`}>\r\n          {subMethods && subMethods.map((sm: GameSubMethodMenu, i: number) => (\r\n            <li className={`sub-method-item ${sm.class} ${i === this.props.curSubMenuIndex ? 'selected' : ''}`} key={i} onClick={this.onSubMethodHandler.bind(this, sm, i)}>\r\n              <div className=\"method-name\">{sm.name}</div>\r\n              {!sm.noOdd && <div className=\"odd\">{this.getOddById(sm.ids, sm.oddIndex)}</div>}\r\n            </li>  \r\n          ))}\r\n        </ul>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SubMethodMenu;\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport './row.styl';\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLDivElement>{\r\n  className?: string;\r\n}\r\n\r\nclass Row extends PureComponent<Props, object> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    return (<div className={`ds-row ${this.props.className || ''}`} onClick={this.props.onClick}>{this.props.children}</div>)\r\n  }\r\n}\r\n\r\nexport default Row;\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport './col.styl';\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\r\n  className?: string;\r\n  span?: number;\r\n  gutter?: string;\r\n}\r\n\r\nclass Col extends PureComponent<Props, object> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n  getStyle() {\r\n    let styl: any = {}\r\n    if (this.props.gutter) {\r\n      styl.padding = this.props.gutter;\r\n    }\r\n    return styl;\r\n  }\r\n  render() {\r\n    return (<div className={`ds-col ${this.props.span ? 'col-'+ this.props.span : ''} ${this.props.className}`} style={this.getStyle()} onClick={this.props.onClick}>{this.props.children}</div>)\r\n  }\r\n}\r\n\r\nexport default Col;\r\n","import React, { PureComponent, MouseEvent } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport methodItems from '../../game/methodItems';\r\nimport { Row, Col } from '../grid';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { GameSubMethodMenu } from '../../typings/games';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  curGameMethodItems: any[];\r\n  defaultInitMethodItemAmount: number;\r\n  updateMethodItem(i: number, j: number, k: number, selected?: boolean | undefined, value?: string | undefined): void;\r\n  updateMethodRow(i: number, j: number, selected?: boolean | undefined): void;\r\n  curSubMethod?: GameSubMethodMenu;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass Play extends PureComponent<Props, object> {\r\n  methodItems: any = methodItems;\r\n  onMethodItemHandler = (i: number, j: number, k: number, selected: boolean, methodTypeName: string, event: MouseEvent<HTMLElement>) => {\r\n    let amount = selected ? '' : String(this.props.defaultInitMethodItemAmount);\r\n    amount = ['rx_nzn', 'zux_q2', 'zux_q3', 'zx_q2', 'zx_q3'].includes(methodTypeName) ? '0' : amount;\r\n    this.props.updateMethodItem(i, j, k, !selected, amount);\r\n  }\r\n  onRowClickHandler = (i: number, j: number, selected?: boolean | undefined) => {\r\n    if (this.props.gameType === LOTTERY_TYPES.HC6) {\r\n      this.props.updateMethodRow(i, j, !selected);\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    this.forceUpdate();\r\n  }\r\n  render() {\r\n    let curGameMethodItems = this.props.curGameMethodItems;\r\n    return (\r\n      <article className={`play-view ${this.props.gameType}`}>\r\n        {curGameMethodItems.map((methodItem: any, i: number) => (\r\n          <div className={`method ${methodItem.layout} ${methodItem.class || ''} clear`} key={i} >\r\n            {methodItem.rows.map((row: any, j: number) => (\r\n              <Row key={j} className={`clear ${row.s ? 'selected': ''}`} onClick={() => this.onRowClickHandler(i, j, row.s)}>\r\n                <Col span={row.col} className={`flex pos-label ${row.hidePos ? 'hide' : ''}`} >\r\n                  <div className=\"pos-name\">{row.n}</div>\r\n                  {row.subpn && <div className=\"sub-pn\">{row.subpn}</div>}\r\n                  {row.posOdd === true && <div className=\"row-odd\">{row.odd}</div>}\r\n                </Col>\r\n                {row.vs.map((vsItem: any, k: number) => (\r\n                  <Col span={vsItem.col}  key={k} className={`method-item-col ${row.class || ''}`}>\r\n                    <div className={`method-item ${vsItem.class || ''} ${vsItem.s ? 'selected' : ''}`} onClick={(e: MouseEvent<HTMLElement>) => this.onMethodItemHandler(i, j, k, vsItem.s, methodItem.methodTypeName, e)}>\r\n                      <span className={`method-item-name`} n={vsItem.n}>\r\n                        {vsItem.class === 'icon' && vsItem.icons && vsItem.icons.map((iconNum: number, m: number) => (<span className={`icon-item icon-item-${iconNum}`} key={m}></span>))}\r\n                        {vsItem.class !== 'icon' && vsItem.n}\r\n                      </span>\r\n                      {row.noodd !== true && methodItem.posOdd !==true && <span className={`odd`}>{vsItem.odd || ''}</span>}\r\n                    </div>\r\n                  </Col>\r\n                ))}\r\n              </Row>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </article>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Play;\r\n","/**\r\n * 排列\r\n * @param n\r\n * @param m\r\n * @returns {Number}\r\n */\r\nfunction permutationChoice(n: number, m: number): number {\r\n  return factorial(n) / factorial(n - m);\r\n}\r\n\r\n/**\r\n * 组合\r\n * @param n\r\n * @param m\r\n * @returns {Number}\r\n * combineChoice\r\n */\r\nfunction C(n: number, m: number): number {\r\n  if (!n || !m || n < m || n < 0 || m < 0) return 0;\r\n  else if (n === m) return 1;\r\n  else if (m === 1) return n;\r\n  else {\r\n    return Math.ceil(permutationChoice(n, m) / factorial(m));\r\n  }\r\n}\r\n\r\n/**\r\n * [factorial description]\r\n * @param  {[type]} n [description]\r\n * @return {[type]}   [description]\r\n */\r\nfunction factorial(n: number): number {\r\n  if (n === 0) return 1;\r\n  return n * factorial(n - 1);\r\n}\r\n\r\n// repeat a string s t times\r\n// let repeat = (s: string, t: number) => {\r\n//   if (typeof s.repeat === 'function') return s.repeat(t)\r\n//   let r = ''\r\n//   while (t > 0) {\r\n//     r += s\r\n//     t--\r\n//   }\r\n//   return r\r\n// }\r\n\r\n// remove duplicate in a string by split by i\r\n// @params o 重复号的判断加入是否排序后比较相等\r\nlet removeDuplicate = (s: string, i: string, join: string, o: string, l: string) => {\r\n  let has = false\r\n  return { s: s.split(i).filter((n: string, i: number, arr: string[]) => {\r\n    if (!n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g'))) return false\r\n    return i === arr.findIndex((nn: string) => !o ? nn === n : (nn.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).sort((a: any, b: any) => a - b).join('') === (n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).sort((a: any, b: any) => a - b).join('')) || !(has = true)\r\n  }).join(join || ' '), has: has }\r\n}\r\n\r\n// let padStart = (s: string, l: number, w: string) => {\r\n//   s += ''\r\n//   while (s.length < l) {\r\n//     s = w + s\r\n//   }\r\n//   if (s.length > l) s = s.slice(s.length - l)\r\n//   return s\r\n// }\r\n\r\nlet isPrime = (n: number) => {\r\n  if (n <= 3) { return n > 1 }\r\n  if (n % 2 === 0 || n % 3 === 0) { return false }\r\n  for (let i = 5; i * i <= n; i += 6) {\r\n    if (n % i === 0 || n % (i + 2) === 0) { return false }\r\n  }\r\n  return true\r\n}\r\n\r\n// 空值判断\r\nlet empty = (value: string) => value.match(/^[\\s\\t\\r]*$/)\r\n\r\n/*\r\nvalue: 输入值\r\nN: 一注的长度\r\nr: 最大相同数字的长度\r\nl: 一个号码的长度 如12345有5个号码, 010203有3个号码, 号码长度为2\r\n */\r\nlet N = (value: string, N: number, r: number, l: number, max: number, min: number) => empty(value) ? [] : value.split(' ').filter(n => n.length === N).filter((n: string) => {\r\n  return (typeof r !== 'number') || r === Object.values((n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).reduce((p: any, na: any) => {\r\n    if (p[na] !== undefined) p[na] += 1\r\n    else p[na] = 1\r\n    if ((max !== undefined && parseInt(na) > max) || (min !== undefined && parseInt(na) < min)) p[na] = r + 1\r\n    return p\r\n  }, {})).sort((a: any, b: any) => b - a)[0]\r\n})\r\n\r\n// 最大重复号码为r 或小于 r\r\n// let ON = (value: string, N: number, r: number, l: number, max: number, min: number) => empty(value) ? [] : value.split(' ').filter(n => n.length === N).filter((n: string) => {\r\n//   return (typeof r !== 'number') || r >= Object.values((n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).reduce((p: any, na: any) => {\r\n//     if (p[na] !== undefined) p[na] += 1\r\n//     else p[na] = 1\r\n//     if ((max !== undefined && parseInt(na) > max) || (min !== undefined && parseInt(na) < min)) p[na] = r + 1\r\n//     return p\r\n//   }, {})).sort((a: any, b: any) => b - a)[0]\r\n// })\r\n\r\n// 数组内各长度相乘\r\nlet P = (nsl: number[]): number => {\r\n  let n = 1\r\n  nsl.forEach((nl: number) => {\r\n    n *= nl\r\n  })\r\n  return n\r\n}\r\n\r\n// 数组内各长度相加\r\nlet A = (nsl: number[]): number => {\r\n  let n = 0\r\n  nsl.forEach((nl: number) => {\r\n    n += nl\r\n  })\r\n  return n\r\n}\r\n\r\nexport {\r\n  N,\r\n  // ON,\r\n  P,\r\n  A,\r\n  C,\r\n  removeDuplicate,\r\n}\r\n","import { /*N,*/ P, A, C } from './base'\r\ninterface Params {\r\n  nsl: number[];\r\n  ns?: any[];\r\n  repeatCount?: number;\r\n}\r\n\r\nexport default {\r\n  '1250:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1251:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1252:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1253:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1254:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1256:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1257:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1258:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1259:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1273:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1274:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1275:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1276:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  \r\n  // 11x5\r\n  '2050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2050:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2053:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2054:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  '2077:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 2)\r\n  },\r\n  '2078:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 3)\r\n  },\r\n  '2079:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 4)\r\n  },\r\n  '2080:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 5)\r\n  },\r\n  '2081:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 6)\r\n  },\r\n  '2082:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 7)\r\n  },\r\n  '2083:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 8)\r\n  },\r\n  '2055:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 2)\r\n  },\r\n  '2056:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 3)\r\n  },\r\n  '2057:1'({nsl, repeatCount}: Params) {\r\n    return P(nsl) - (repeatCount || 0);\r\n  },\r\n  '2058:1'({ns}: Params) {\r\n    let n = 0;\r\n    if (ns) {\r\n      ns[0] && ns[0][0] && ns[0].forEach((f: number) => {\r\n        ns[1] && ns[1][0] && ns[1].forEach((s: number) => {\r\n          ns[2] && ns[2][0] && ns[2].forEach((t: number) => {\r\n            if (f !== s && f !== t && s !== t) n++;\r\n          })\r\n        })\r\n      });\r\n    }\r\n    return n;\r\n  },\r\n\r\n  // PK10\r\n  '4050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4050:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4053:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4054:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:3'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:4'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:5'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n\r\n  // K3\r\n  '5050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5054:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5055:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5056:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5057:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n\r\n  // 六合彩\r\n  // 特码\r\n  '7001:1' ({nsl}: Params) {\r\n    return C(nsl[0], 1)\r\n  },\r\n  // 正码\r\n  '7006:1' ({nsl}: Params) {\r\n    return C(nsl[0], 1)\r\n  },\r\n  // 特肖\r\n  '7007:1' ({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  // 波色\r\n  '7005:1' ({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  // 一肖\r\n  '7008:1' ({nsl}: Params) {\r\n    return C(A(nsl), 1)\r\n  },\r\n  // 2连肖\r\n  '7002:1' ({nsl}: Params) {\r\n    return C(A(nsl), 2)\r\n  },\r\n  // 3连肖\r\n  '7003:1' ({nsl}: Params) {\r\n    return C(A(nsl), 3)\r\n  },\r\n  // 4连肖\r\n  '7004:1' ({nsl}: Params) {\r\n    return C(A(nsl), 4)\r\n  },\r\n  // '正一码'\r\n  '7009:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正二码'\r\n  '7010:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正三码'\r\n  '7011:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正四码'\r\n  '7012:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正五码'\r\n  '7013:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正六码'\r\n  '7014:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '特码'\r\n  '7015:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正特和值'\r\n  '7016:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '尾数'\r\n  '7017:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  }\r\n}","\r\n/**\r\n * 计算重复元素的个数\r\n * @param data \r\n */\r\nexport function countRepeat(data: any[]): number {\r\n  if (data.length < 1) return 0;\r\n  let temp = (data.join(',').split(',') || []).filter((num) => num.length > 0);\r\n  return temp.length - Array.from(new Set(temp)).length;\r\n}\r\n","import React, { Component, ChangeEvent } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { Button, Toast, Modal } from 'antd-mobile';\r\nimport CoinSet from '../coin-set';\r\nimport APIs from '../../http/APIs';\r\nimport calc from '../../game/calc';\r\nimport { countRepeat } from '../../utils/game';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameId: number;\r\n  gameType: string;\r\n  curIssue?: string;\r\n  betCount: number;\r\n  amount: number;\r\n  curGameMethodItems: any[];\r\n  defaultInitMethodItemAmount: number;\r\n  updateDefaultInitMethodItemAmount(amount: number): void;\r\n  orderFinishCB(status: boolean): void;\r\n  resetSelectedOfAllMethodItem(): void;\r\n}\r\n\r\ninterface DataMethodItem {\r\n  id: string;\r\n  rows: any[];\r\n  methodTypeName?: string;\r\n  repeatCount: number;\r\n}\r\n\r\ninterface State {\r\n  amount: number;\r\n  showCoinSet: boolean;\r\n}\r\n\r\nconst ORDER_BAR_CONTAINER_CLASS = 'order-bar-container';\r\nconst CALC_BET_NEED_COMPUTED_REPEAT = ['zx_q2', 'zx_q3'];\r\n@inject('store')\r\n@observer\r\nclass OrderBar extends Component<Props, object> {\r\n  state: State;\r\n  calc: any = calc;\r\n  orderBarContainer: HTMLDivElement;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      amount: this.props.defaultInitMethodItemAmount,\r\n      showCoinSet: false\r\n    }\r\n    this.orderBarContainer = document.createElement('div');\r\n    this.orderBarContainer.className = ORDER_BAR_CONTAINER_CLASS;\r\n  }\r\n  coinChoosed = (value: string) => {\r\n    const amount: number = value === 'all' ? parseInt(this.props.store.user.balance, 10): parseInt(value, 10);\r\n    this.setState({amount});\r\n    this.props.updateDefaultInitMethodItemAmount(amount);\r\n  }\r\n  onResetHandler = () => {\r\n    Modal.alert(' ', '您确定要重置选中的投注？',[{ text: '取消' }, { text: '确定', onPress: () => this.props.resetSelectedOfAllMethodItem() }]);\r\n  }\r\n  onOrderHandler = () => {\r\n    this.setState({showCoinSet: false});\r\n    this.order();\r\n  }\r\n  validate(params: any): boolean {\r\n    if (!params.issue) {\r\n      Toast.fail('获取游戏期号失败，请刷新后重试！');\r\n      return false;\r\n    } else if(!params.betList || params.betList.length <= 0) {\r\n      return false;\r\n    } else if(params.totMoney <= 0) {\r\n      this.setState({showCoinSet: true});\r\n      Toast.fail('请输入金额！');\r\n      return false;\r\n    } else if (!this.validateLimit(params.lotteryId, params.limitLevel, this.state.amount)) {\r\n      return false;  \r\n    } else if (params.errorMsg) {\r\n      Toast.fail(params.errorMsg);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  validateHc6(params: any): boolean {\r\n    if (!params.issue) {\r\n      Toast.fail('获取游戏期号失败，请刷新后重试！');\r\n      return false;\r\n    } else if(!params.items || params.items.length <= 0) {\r\n      return false;\r\n    } else if(params.totalmoney <= 0) {\r\n      this.setState({showCoinSet: true});\r\n      Toast.fail('请输入金额！');\r\n      return false;\r\n    } else if (!this.validateLimit(params.gameid, params.limitLevel, this.state.amount)) {\r\n      return false;\r\n    } else if (params.errorMsg) {\r\n      Toast.fail(params.errorMsg);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  validateLimit(gameId: number, level: number, amount: number) {\r\n    let limit = this.props.store.game.getLimitLevelData(gameId, level);\r\n    if (limit) {\r\n      if (amount < limit.minAmt || amount > limit.maxAmt) {\r\n        Toast.fail(amount < limit.minAmt ? '您输入的金额不能低于最低限红' : '您输入的金额超过最高限红');\r\n        return false;\r\n      } \r\n    }\r\n    return true;\r\n  }\r\n  getParams(): object {\r\n    let props = this.props;\r\n    let curGameMethodItems = props.curGameMethodItems;\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    let params: any = {\r\n      lotteryId: props.gameId,\r\n      issue: props.curIssue,\r\n      totProjs: 0,\r\n      totMoney: 0,\r\n      isusefree: 0,\r\n      betList: [],\r\n      isFastBet: 1,\r\n      limitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    };\r\n    let pos: string = '';\r\n    let val: string = '';\r\n    let content: string = '';\r\n    let betCount: number = 0;\r\n    curGameMethodItems.forEach((methodItem: any) => {\r\n      if (['rx_nzn'].includes(methodItem.methodTypeName)) {\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        content = methodItem.rows[0].nc.join(',');\r\n        params.betList.push({methodId: methodItem.id.split(':')[0], projs: 1, money: params.totMoney, content});\r\n        params.totProjs += params.betList.length;\r\n        if (content.split(',').length > 8) {\r\n          params.errorMsg = '该玩法一个方案最多选择8个号码！';\r\n        }\r\n      } else if (['zux_q2', 'zux_q3'].includes(methodItem.methodTypeName)) {\r\n        // 组选\r\n        let nc = methodItem.rows.map((row: any) => {\r\n          return row.nc;\r\n        })[0];\r\n        let contents: any[] = [];\r\n        let param = {\r\n          methodId: methodItem.id.split(':')[0],\r\n          projs: 1,\r\n          money: this.state.amount\r\n        }\r\n        for (let i = 0; i <= nc.length - 1; i++) {\r\n          for (let j = i + 1; j <= nc.length - 1; j++) {\r\n            if (['zux_q2'].includes(methodItem.methodTypeName)) {\r\n              contents.push(Object.assign({\r\n                content: `${nc[i]},${nc[j]}`\r\n              }, param));\r\n            }\r\n            if (['zux_q3'].includes(methodItem.methodTypeName)) {\r\n              for (let k = i + 2; k <= nc.length - 1; k++) {\r\n                if (nc[j] >= nc[k]) continue;\r\n                contents.push(Object.assign({\r\n                  content: `${nc[i]},${nc[j]},${nc[k]}`\r\n                }, param));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        params.betList.push(...contents);\r\n        params.totProjs += contents.length;\r\n      } else if (['zx_q2', 'zx_q3'].includes(methodItem.methodTypeName)) {\r\n        // 直选 前二、三\r\n        let nc = methodItem.rows.map((row: any) => {\r\n          return row.nc;\r\n        });\r\n        let contents: any[] = [];\r\n        let param = {\r\n          methodId: methodItem.id.split(':')[0],\r\n          projs: 1,\r\n          money: this.state.amount\r\n        }\r\n        for (let i = 0; i < nc.length; i++) {\r\n          for (let j = 0; j < nc[i].length; j++) {\r\n            if (!nc[i + 1]) continue;\r\n            for (let k = 0; k < nc[i + 1].length; k++) {\r\n              if (nc[i][j] === nc[i + 1][k]) continue;\r\n              if (nc.length >= 3) {\r\n                if (!nc[i + 2]) continue;\r\n                for (let m = 0; m < nc[i + 2].length; m++) {\r\n                  if (nc[i + 1][k] === nc[i + 2][m] || nc[i][j] === nc[i + 2][m]) continue;  \r\n                  contents.push(Object.assign({\r\n                    content: `${nc[i][j]},${nc[i + 1][k]},${nc[i + 2][m]}`\r\n                  }, param));\r\n                }\r\n              } else {\r\n                contents.push(Object.assign({\r\n                  content: `${nc[i][j]},${nc[i + 1][k]}`\r\n                }, param));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        params.betList.push(...contents);\r\n        params.totProjs += contents.length;\r\n      } else {\r\n        methodItem.rows.forEach((row: any) => {\r\n          row.vs.forEach((vsItem: any) => {\r\n            if (vsItem.s) {\r\n              params.totMoney += this.state.amount; // parseInt(vsItem.amt, 10);\r\n              params.totProjs++;\r\n              pos = row.nonasv ? '' : row.p || row.n;\r\n              val = vsItem.p ? (vsItem.p + '-' + (vsItem.pv || vsItem.n)) : (vsItem.pv || vsItem.n)\r\n              content = pos ? pos + '-' + val : val;\r\n              params.betList.push({methodId: methodItem.id.split(':')[0], projs: 1, money: this.state.amount, content});\r\n            }\r\n          });\r\n        });\r\n      }\r\n    });\r\n    return params;\r\n  }\r\n  getParamsHc6() {\r\n    let props = this.props;\r\n    let curGameMethodItems = props.curGameMethodItems;\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    let params: any = {\r\n      gameid: props.gameId,\r\n      issue: props.curIssue,\r\n      totalnums: 0, // 总注数\r\n      totalmoney: 0,\r\n      type: 1, // 类型：1-投注；2-追号\r\n      isusefree: 0, // 是否使用优惠券，0-否，1-是\r\n      items: [],\r\n      trace: '',\r\n      isJoinPool: 0,\r\n      isFastBet: 1,\r\n      limitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    };\r\n    let items: any[] = [];\r\n    let totalCount = 0;\r\n    curGameMethodItems.forEach((methodItem: any) => {\r\n      methodItem.rows.forEach((row: any) => {\r\n        console.log('count=', this.calcBet(), methodItem.id)\r\n        if (methodItem.calcMode === 'row') {\r\n          if (row.s) {\r\n            items.push({\r\n              methodid: methodItem.id.split(':')[0],\r\n              type: 1,\r\n              pos: '',\r\n              codes: row.pv || row.n,\r\n              count: 1,\r\n              times: this.state.amount,\r\n              money: this.state.amount,\r\n              mode: 1,\r\n              userpoint: '0.0000'\r\n            });\r\n            totalCount += 1;   \r\n          }\r\n        } else {\r\n          row.vs.forEach((vsItem: any) => {\r\n            if (vsItem.s) {\r\n              items.push({\r\n                methodid: methodItem.id.split(':')[0],\r\n                type: 1,\r\n                pos: vsItem.pos,\r\n                codes: vsItem.p ? (vsItem.p + '-' + (vsItem.pv || vsItem.n)) : (vsItem.pv || vsItem.n),\r\n                count: 1,\r\n                times: this.state.amount,\r\n                money: this.state.amount,\r\n                mode: 1,\r\n                userpoint: '0.0000'\r\n              });\r\n              totalCount += 1;            \r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n    params.totalmoney = items.length * this.state.amount;\r\n    params.totalnums = totalCount;\r\n    params.items = JSON.stringify(items);\r\n    return params;\r\n  }\r\n  calcBet() {\r\n    let curGameMethodItems = this.props.curGameMethodItems;\r\n    let methodList: DataMethodItem[] = [];\r\n    let method: any;\r\n    let betCount: number = 0;\r\n\r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n      gameMethodItem.rows.forEach((row: any) => {\r\n        method.rows.push(row.nc.slice(0));\r\n      });\r\n      methodList.push(method);\r\n    });\r\n    \r\n    // 计算重复数\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (CALC_BET_NEED_COMPUTED_REPEAT.includes(gameMethodItem.methodTypeName)) {\r\n        gameMethodItem.repeatCount = countRepeat(methodList.map((methodItem: DataMethodItem) => methodItem.id === gameMethodItem.id ? methodItem.rows : []));\r\n      }\r\n    });\r\n    \r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (!['zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        methodList = methodList.map((methodItem: DataMethodItem) => {\r\n          if (gameMethodItem.id === methodItem.id) {\r\n            methodItem.rows = methodItem.rows.map((row: any) => row.length);\r\n          }\r\n          methodItem.repeatCount = gameMethodItem.repeatCount;\r\n          return methodItem;\r\n        });\r\n      }\r\n    });\r\n\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (gameMethodItem.calcMode === 'row') {  \r\n        methodList = [];\r\n        method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n        gameMethodItem.rows.forEach((row: any) => {\r\n          if (row.s) method.rows.push(row.pv || row.n);\r\n        });\r\n        method.rows = [method.rows.length];\r\n        methodList.push(method);\r\n      }\r\n    });\r\n\r\n    // 计算总注数\r\n    methodList.forEach((methodItem: DataMethodItem) => {\r\n      betCount += this.calc[methodItem.id]({nsl: methodItem.rows, ns: methodItem.rows, repeatCount: methodItem.repeatCount});\r\n    });\r\n\r\n    return betCount;\r\n  }\r\n  order() {\r\n    const isHc6 = this.isHc6();\r\n    const params = this[isHc6 ? 'getParamsHc6' : 'getParams']();\r\n    if (!this[isHc6 ? 'validateHc6' : 'validate'](params)) {\r\n      return null;\r\n    }\r\n    Toast.loading('投注中...', 0);\r\n    const data = isHc6 ? params : { betData: JSON.stringify(params) };\r\n    setTimeout(Toast.hide, 30000);\r\n    APIs[isHc6 ? 'booking' : 'bet'](data).then(({success, msg}: any) => {\r\n      this.resetAmount();\r\n      Toast.hide();\r\n      if (success === 1) {\r\n        Toast.success('投注成功', 2);\r\n        this.props.store.user.updateBalance();\r\n        this.props.orderFinishCB(true);\r\n      } else {\r\n        Toast.fail(msg || '投注失败');\r\n        this.props.orderFinishCB(false);\r\n      }\r\n    }).catch(() => {\r\n      Toast.hide();\r\n    });\r\n  }\r\n  onFocusHandler = () => {\r\n    this.setState({showCoinSet: true});\r\n  }\r\n  onAmountChanged = (event: ChangeEvent<HTMLInputElement>) => {\r\n    let value = event.target.value.trim();\r\n    let eType  = event.type;\r\n    if (value.length <= 0) {\r\n      value = '0';\r\n    }\r\n    console.log('type=', eType);\r\n    if (!/^\\d*$/g.test(value)) {\r\n      value = String(this.props.defaultInitMethodItemAmount);\r\n    }\r\n    this.setState({amount: parseInt(value, 10)});\r\n    this.props.updateDefaultInitMethodItemAmount(parseInt(value, 10));\r\n  }\r\n  onBlurHandler =  (event: ChangeEvent<HTMLInputElement>) => {\r\n    let value = event.target.value.trim();\r\n    if (!/^\\d+$/g.test(value)) {\r\n      value = '-1';\r\n    }\r\n    this.setState({amount: parseInt(value, 10)});\r\n    this.props.updateDefaultInitMethodItemAmount(parseInt(value, 10));\r\n  }\r\n  componentDidMount() {\r\n    document.body.appendChild(this.orderBarContainer);\r\n  }\r\n  componentWillUnmount() {\r\n    document.body.removeChild(this.orderBarContainer);\r\n  }\r\n  resetAmount() {\r\n    this.setState({amount: 0});\r\n    this.props.updateDefaultInitMethodItemAmount(0);\r\n  }\r\n  isHc6() {\r\n    return this.props.gameType === LOTTERY_TYPES.HC6;\r\n  }\r\n  render() {\r\n    let elements = (\r\n      <section className=\"order-bar-view\">\r\n        {this.state.showCoinSet && <section>{<CoinSet coinChoosed={this.coinChoosed} value={this.state.amount} />}</section>}\r\n        <section className=\"flex ai-c jc-sb order-sec\">\r\n          <div>\r\n            <div className=\"flex ai-c fast-amount-wp\">\r\n              <input className=\"fast-amount\" type=\"tel\" value={this.state.amount <= 0 ? '': this.state.amount} onChange={this.onAmountChanged} onBlur={this.onBlurHandler} onFocus={this.onFocusHandler} maxLength={9} placeholder=\"请输入快捷金额\" />\r\n            </div>  \r\n          </div>\r\n          {/* <div className=\"txt-r\">\r\n            已选 <span className=\"txt-red\">{this.props.betCount}</span> 注 共 <span className=\"txt-red\">{(this.props.amount).toFixed(3)} </span>元\r\n          </div> */}\r\n          <div className=\"flex ai-c jc-e btns-wp\">\r\n            <Button type=\"primary\" className=\"btn-reset\" disabled={this.props.betCount <= 0} onClick={this.onResetHandler}>重置</Button>\r\n            <Button type=\"primary\" className=\"btn-order\" disabled={this.props.betCount <= 0} onClick={this.onOrderHandler}>一键下单</Button>\r\n          </div>\r\n        </section>\r\n      </section>\r\n    )\r\n    return ReactDOM.createPortal(elements, this.orderBarContainer);\r\n  }\r\n}\r\n\r\nexport default OrderBar;\r\n","import { createContext } from 'react';\r\n\r\nexport interface GameCommonDataType {\r\n  gameId: number;\r\n  gameType: string;\r\n}\r\n\r\nexport const GameCommonDataContext = createContext<GameCommonDataType>({\r\n  gameId: -1,\r\n  gameType: ''\r\n});\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { Button, Modal, Icon } from 'antd-mobile';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  isShowMask?: boolean;\r\n  isShow: boolean;\r\n  gameId: number;\r\n  limitLevelList: LimitLevelItem[];\r\n  isShowLimitSetDialogClose: boolean; // 是否显示弹出框关闭按钮\r\n  onLimitChoiceCB(level: number): void;\r\n  onCloseHandler?: () => void;\r\n}\r\n\r\ninterface State {\r\n  limitLevelList: LimitLevelItem[];\r\n  curLimitIndex: number;\r\n  level: number;\r\n}\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass LimitSetDialog extends Component<Props, object> {\r\n  state: State;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      limitLevelList: [],\r\n      curLimitIndex: 0,\r\n      level: 1\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    this.init(this.props);\r\n  }\r\n  init(props: Props) {\r\n    let level = ((props.store.game.getGameLimitLevelByGameId(props.gameId) || {}).level) || 1;\r\n    let limitItem = props.store.game.getLimitListItemById(props.gameId);\r\n    let limitLevelList: LimitLevelItem[] = limitItem ? limitItem.kqPrizeLimit : [];\r\n    let index = limitLevelList.findIndex((item) => item.level === level);\r\n    this.setState({\r\n      limitLevelList,\r\n      curLimitIndex: index,\r\n      level\r\n    });\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    this.init(nextProps);\r\n  }\r\n  onLimitChoiceHandler = (level: number, index: number) => {\r\n    this.setState({curLimitIndex: index, level});\r\n  }\r\n  onCloseHandler = () => {\r\n    if (this.props.onCloseHandler) {\r\n      this.props.onCloseHandler();\r\n    }\r\n  }\r\n  onConfirmHandler = () => {\r\n    this.props.onLimitChoiceCB(this.state.level);\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"limit-set-dialog\">\r\n         <Modal\r\n          className=\"limit-set-modal\"\r\n          visible={true}\r\n          maskClosable={false}\r\n          title=\"\"\r\n        >\r\n          <header className=\"flex ai-c jc-c limit-set-header\">限红设置{this.props.isShowLimitSetDialogClose && <Icon type=\"cross\" onClick={this.onCloseHandler} />}</header>\r\n          <div className=\"bg-white limit-set-content\">\r\n            <section className=\"flex jc-c limit-list\">\r\n              {this.state.limitLevelList.map((item: LimitLevelItem, i: number) => (\r\n                <Button key={i} className={`flex jc-c ai-c btn-limit-amount ${this.state.curLimitIndex === i ? 'selected' : ''}`} onClick={()=>this.onLimitChoiceHandler(item.level, i)}>{item.minAmt}-{item.maxAmt}</Button>\r\n              ))}\r\n            </section>\r\n            <div><Button className=\"flex jc-c ai-c btn-confirm\" onClick={this.onConfirmHandler}>确定</Button></div>\r\n            <div className=\"limit-explain-tip\">\r\n              <p>限红说明：</p>\r\n              <p>当切换不同的限红模式时，再次投注同一彩种，需至少间隔1期再投注。</p>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LimitSetDialog;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport GameHeader from 'comp/game-header';\r\nimport MethodMenu from 'comp/method-menu';\r\nimport SubMethodMenu from 'comp/sub-method-menu';\r\nimport Play from 'comp/play';\r\nimport OrderBar from 'comp/order-bar';\r\nimport { RouteComponentProps } from \"react-router-dom\";\r\nimport { getGameTypeByGameId } from '../../game/games';\r\nimport calc from '../../game/calc';\r\nimport { getMethodsConfigByType, getMethodPosByGameTypeAndId } from '../../game/gameMethods';\r\nimport { GameMethodMenu, GameSubMethodMenu } from '../../typings/games';\r\nimport methodItems from '../../game/methodItems';\r\nimport APIs from '../../http/APIs';\r\nimport { countRepeat } from '../../utils/game';\r\nimport { GameCommonDataContext } from '../../context/gameContext';\r\nimport Ludan from 'comp/ludan';\r\nimport { getLunDanTabByName, getTabsByType, getLudanTabByTypeAndName } from '../../utils/ludan';\r\nimport LimitSetDialog from 'comp/limit-set-dialog';\r\nimport Socket from '../../socket';\r\nimport Bus from '../../utils/eventBus'\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { ANIMALS_POULTRY, ANIMALS_BEAST } from '../../game/hc6';\r\nimport './index.styl';\r\nimport { getUrlParams } from '../../utils/common';\r\n\r\ninterface IProps {\r\n  store?: any;\r\n  gameType?: string;\r\n}\r\n\r\ninterface State {\r\n  id: number;\r\n  // gameType: string;\r\n  curIssue: string;\r\n  lastIssue: string;\r\n  curTime: number;\r\n  remainTime: number;\r\n  openNumbers: string[];\r\n  curMenuIndex: number; // 玩法菜单选中玩法的index\r\n  curMenuEname: string; // 玩法菜单选中玩法的英语名\r\n  curSubMenuIndex: number;\r\n  subMethods: GameSubMethodMenu[];\r\n  curSubMethod?: GameSubMethodMenu;\r\n  curGameMethodItems: any[];\r\n  odds: any;\r\n  issueList: any[];\r\n  defaultInitMethodItemAmount: number; // 默认初始投注金额\r\n  totalBetCount: number;  // 总注数\r\n  totalBetAmount: number; // 总投注金额\r\n  tabIndex: number; //  \r\n  maxColumns: number;\r\n  maxRows: number;\r\n  defaultMenu?: string;\r\n  // defaultSubMenu?: string;\r\n  isShowLudan: boolean;\r\n  isExpandLudan: boolean;\r\n  isShowLimitSetDialog: boolean;\r\n  limitLevelList: LimitLevelItem[];\r\n  isShowLimitSetDialogClose: boolean; // 是否显示弹出框关闭按钮\r\n}\r\n\r\ninterface DataMethodItem {\r\n  id: string;\r\n  rows: any[];\r\n  repeatCount: number;\r\n  methodTypeName: string;\r\n}\r\n\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\ntype Props = IProps & RouteComponentProps<MatchParams>;\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass Game extends Component<Props, object> {\r\n  id: number = 1;\r\n  gameType: string = 'ssc';\r\n  state: State;\r\n  methodItems: any = methodItems;\r\n  calc: any = calc;\r\n  mysocket?: Socket;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.id = parseInt(this.props.match.params.id || '1', 10);\r\n    this.gameType = getGameTypeByGameId(this.id);\r\n    let menus: GameMethodMenu[] = getMethodsConfigByType(this.gameType);\r\n    let limitItem = props.store.game.getLimitListItemById(this.id);\r\n    let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n    let curMenuIndex = bestLudan && getMethodPosByGameTypeAndId(this.gameType, bestLudan.methodId) || 0;\r\n    let curMenuEname = (menus && menus[curMenuIndex]).ename;\r\n    let ludanTab = getLudanTabByTypeAndName(this.gameType, curMenuEname, bestLudan && bestLudan.codeStyle);\r\n    let ludanMenus = getTabsByType(this.gameType, curMenuEname);\r\n    let gameLimitLevel = this.props.store.game.getGameLimitLevelByGameId(this.id); // 设置的限红数据\r\n    let curSubMenuIndex = this.gameType === LOTTERY_TYPES.HC6 ? -1 : 0;\r\n    this.state = {\r\n      id: 1,\r\n      curIssue: '',\r\n      lastIssue: '',\r\n      curTime: 0,\r\n      remainTime: 0,\r\n      openNumbers: [],\r\n      curMenuIndex,\r\n      curMenuEname,\r\n      curSubMenuIndex,\r\n      subMethods: [],\r\n      curSubMethod: undefined,\r\n      curGameMethodItems: this.getMethodItemsByIds((menus && menus[curMenuIndex].ids) || []),\r\n      odds: {},\r\n      issueList: [],\r\n      defaultInitMethodItemAmount: 0, //this.props.store.game.defaultInitBetAmount,\r\n      totalBetCount: 0,\r\n      totalBetAmount: 0,\r\n      tabIndex: 0,\r\n      maxColumns: 21,\r\n      maxRows: 6,\r\n      defaultMenu: (ludanTab && ludanTab.name) || '',\r\n      isShowLudan: ludanMenus && ludanMenus.length > 0,\r\n      isExpandLudan: false,\r\n      isShowLimitSetDialog: !gameLimitLevel,\r\n      limitLevelList: limitItem ? limitItem.kqPrizeLimit : [],\r\n      isShowLimitSetDialogClose: false\r\n    }\r\n    this.init();\r\n    Bus.emit('gameIdChanged', this.id);\r\n  }\r\n  init() {\r\n    this.getCurIssue(this.id);\r\n    this.getUserPoint(this.id);\r\n    this.getHistoryIssue(this.id);\r\n    this.getBestLudanByGameId(this.id);\r\n  }\r\n  getLoginData() {\r\n    let sessionData: any = sessionStorage.getItem('sessionData');\r\n    let agentCode = getUrlParams('agentCode');\r\n    let param = getUrlParams('param');\r\n    let data = {\r\n      agentCode,\r\n      param\r\n    };\r\n    if (!agentCode && !param && sessionData) {\r\n      data = JSON.parse(sessionData);\r\n    }\r\n    return data;\r\n  }\r\n  initSocket() {\r\n    this.mysocket = new Socket({\r\n      url: this.props.store.common.broadcaseWSUrl,\r\n      name: 'gameIndex',\r\n      receive: (data) => {\r\n        if (data.type === 'openWinCode') {\r\n          this.openWinCode(parseInt(data.content[0].lottId, 10), data.content[0]);\r\n        }\r\n        if (data.type === 'betNotify') {\r\n          // Bus.emit('__pushBetRemind', data.content)\r\n        }\r\n      },\r\n      open: () => {\r\n        this.mysocket && this.mysocket.send(JSON.stringify(Object.assign({action: 'noauth'}, {})));\r\n      }\r\n    }, true);\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.store.common.broadcaseWSUrl) {\r\n      this.initSocket();\r\n    } else {\r\n      APIs.signIn(this.getLoginData()).then((data: any) => {\r\n        if (data.success > 0) {\r\n          this.props.store.common.setBroadcaseWSUrl(data.broadcaseWSUrl);\r\n          this.initSocket();\r\n        }\r\n      });\r\n    }\r\n    Bus.on('onSetLimit', this.onSetLimit);\r\n  }\r\n  onSetLimit = () => {\r\n    this.setState({isShowLimitSetDialog: !this.state.isShowLimitSetDialog, isShowLimitSetDialogClose: true, limitLevelList: this.props.store.game.getLimitDataOfKqByGameId(this.id) || []});\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    // console.log(this.props.location.pathname, nextProps.location.pathname, '?????')\r\n    this.id = parseInt(nextProps.match.params.id || '1', 10);\r\n    this.gameType = getGameTypeByGameId(this.id);\r\n    Bus.emit('gameIdChanged', this.id);\r\n    if (this.props.match.params.id !== nextProps.match.params.id) {\r\n      // let limitItem = this.props.store.game.getLimitListItemById(this.id);\r\n      // let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n      // let menus: GameMethodMenu[] = getMethodsConfigByType(this.gameType);\r\n      // let curMenuIndex = bestLudan && getMethodPosByGameTypeAndId(this.gameType, bestLudan.methodId) || 0;\r\n      // let curMenuEname = menus && menus[curMenuIndex].ename\r\n      // let ludanTab = getLudanTabByTypeAndName(this.gameType, curMenuEname, bestLudan && bestLudan.codeStyle);\r\n      // let ludanMenus = getTabsByType(this.gameType, curMenuEname);\r\n      let gameLimitLevel = this.props.store.game.getGameLimitLevelByGameId(this.id); // 设置的限红数据\r\n      let limitListItem = this.props.store.game.getLimitListItemById(this.id); \r\n      this.setState({\r\n        // curMenuIndex,\r\n        // curMenuEname,\r\n        // curGameMethodItems: this.getMethodItemsByIds((menus && menus[curMenuIndex].ids) || []),\r\n        // subMethods: (menus && menus[curMenuIndex].subMethods) || [],\r\n        // defaultMenu: (ludanTab && ludanTab.name) || '',\r\n        // isShowLudan: ludanMenus && ludanMenus.length > 0,\r\n        isShowLimitSetDialog: !gameLimitLevel,\r\n        limitLevelList: !gameLimitLevel ? (limitListItem ? limitListItem.kqPrizeLimit : []) : []\r\n      });\r\n      this.init();\r\n    }\r\n  }\r\n  openWinCode(id: number, openHistoryItem: any) {\r\n    if (id === this.id) {\r\n      let issueList = this.state.issueList;\r\n      issueList.unshift(openHistoryItem);\r\n      this.setState({\r\n        lastIssue: issueList[0].issue,\r\n        openNumbers: issueList[0].code.split(','),\r\n        issueList: issueList\r\n      });\r\n      this.getCurIssue(this.id);\r\n    }\r\n  }\r\n  // 获取当前玩法下面的子玩法列表\r\n  getMethodItemsByIds(ids: string[]) {\r\n    let mItems: any[] = [];\r\n    ids.forEach((id: string) => {\r\n      let items =  this.methodItems[id]();\r\n      items.rows = items.rows.map((row: any) => {\r\n        row.vs.map((vs: any) => {\r\n          if (typeof vs === 'object') {\r\n            vs.val = '';\r\n          }\r\n          return vs;\r\n        });\r\n        return row;\r\n      })\r\n      mItems.push(Object.assign({id}, items));\r\n    });\r\n    return mItems;\r\n  }\r\n\r\n  // 更新玩法菜单选中的index\r\n  updateMethodMenuIndex = (index: number) => {\r\n    this.setState({curMenuIndex: index});\r\n  }\r\n  // 更新玩法菜单选中的index\r\n  updateSubMethodMenuIndex = (index: number) => {\r\n    this.setState({curSubMenuIndex: index});\r\n  }\r\n  methodMenuChangedCB = (method: GameMethodMenu) => {\r\n    let curGameMethodItems = this.getMethodItemsByIds(method.ids || []);\r\n    let ludanMenus = getTabsByType(this.gameType, method.ename);\r\n    let limitItem = this.props.store.game.getLimitListItemById(this.id);\r\n    let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n    let ludanTab = getLudanTabByTypeAndName(this.gameType, method.ename, bestLudan && bestLudan.codeStyle);\r\n    let curSubMenuIndex = this.gameType === LOTTERY_TYPES.HC6 ? -1 : 0;\r\n    this.setState({\r\n      subMethods: method.subMethods || [],\r\n      curGameMethodItems,\r\n      totalBetCount: 0,\r\n      totalBetAmount: 0,\r\n      curSubMenuIndex,\r\n      curMenuEname: method.ename,\r\n      defaultMenu: (ludanTab && ludanTab.name) || '',\r\n      // defaultSubMenu: '',\r\n      isShowLudan: ludanMenus && ludanMenus.length > 0\r\n    }, this.updateOddsOfMethod);\r\n  }\r\n  updateSubMethods = (method: GameSubMethodMenu) => {\r\n    let curGameMethodItems;\r\n    if (this.gameType === LOTTERY_TYPES.HC6) {\r\n      curGameMethodItems = this.state.curGameMethodItems;\r\n      if (this.state.curMenuEname === 'texiao') {\r\n        curGameMethodItems = this.updateHC6TexiaoMethodItems(curGameMethodItems, method.v)\r\n      }\r\n    } else {\r\n      curGameMethodItems = this.getMethodItemsByIds(method.ids || []);\r\n    }\r\n    this.setState({\r\n      curSubMethod: method,\r\n      curGameMethodItems\r\n    }, this.calcBet);\r\n  }\r\n  // 更新选中的玩法项数据\r\n  updateMethodItem = (i: number, j: number, k: number, selected?: boolean | undefined, value?: string | undefined) => {\r\n    let methodItems = this.state.curGameMethodItems;\r\n    if (selected !== undefined) {\r\n      methodItems[i].rows[j].vs[k].s = selected;\r\n    }\r\n    if (value !== undefined) {\r\n      methodItems[i].rows[j].vs[k].amt = value;\r\n    }\r\n    this.setState({\r\n      curGameMethodItems: methodItems\r\n    }, this.calcBet);\r\n  }\r\n  updateMethodRow = (i: number, j: number, selected?: boolean | undefined) => {\r\n    let methodItems = this.state.curGameMethodItems;\r\n    if (selected !== undefined) {\r\n      methodItems[i].rows[j].s = selected;\r\n    }\r\n    this.setState({\r\n      curGameMethodItems: methodItems\r\n    }, this.calcBet);\r\n  }\r\n  // 更新当前游戏当前玩法相关的odd\r\n  updateOddsOfMethod(odds?: any) {\r\n    if (!odds) {\r\n      this.getUserPoint(this.id);\r\n      return null;\r\n    }\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n    let methodId: string = '';\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        methodId = methodItem.id.split(':')[0];\r\n        row.vs = row.vs.map((vsItem: any) => {\r\n          if (typeof vsItem === 'object') {\r\n            if (odds[methodId] && odds[methodId][vsItem.oddIndex || 0]) {\r\n              vsItem.odd = odds[methodId][vsItem.oddIndex || 0].maxprize;\r\n            }\r\n          }\r\n          return vsItem;\r\n        });\r\n        if (row.posOdd) {\r\n          row.odd =  odds[methodId][row.oddIndex || 0].maxprize;\r\n        }\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n    this.setState({curGameMethodItems});\r\n  }\r\n\r\n  // 更新默认初始下注金额\r\n  updateDefaultInitMethodItemAmount = (amount: number): void => {\r\n    this.setState({defaultInitMethodItemAmount: amount}, this.calcBet);\r\n  }\r\n  calcBet() {\r\n    let methodList: DataMethodItem[] = [];\r\n    let method: any;\r\n    let betCount: number = 0;\r\n    let totalAmount: number = 0;\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n\r\n    // 构造选择的号码集合，金额集合, 总金额\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        row.nc = [];\r\n        row.amtc = [];\r\n        row.tmc = 0;\r\n        row.vs.forEach((vsItem: any) => {\r\n          if (typeof vsItem === 'object') {\r\n            if (vsItem.s) {\r\n              row.nc.push(vsItem.n);\r\n              row.amtc.push(vsItem.amt);\r\n              row.tmc += parseInt(vsItem.amt || '0', 10);\r\n            }\r\n          }\r\n        });\r\n        totalAmount += row.tmc;\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n\r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      method = {id: gameMethodItem.id, methodTypeName: gameMethodItem.methodTypeName, rows: [], repeatCount: 0};\r\n      gameMethodItem.rows.forEach((row: any) => {\r\n        method.rows.push(row.nc.slice(0));\r\n      });\r\n      methodList.push(method);\r\n    });\r\n\r\n    // 计算重复数\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (['zx_q2', 'zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        gameMethodItem.repeatCount = countRepeat(methodList.map((methodItem: DataMethodItem) => methodItem.id === gameMethodItem.id ? methodItem.rows : []));\r\n      }\r\n    });\r\n    \r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (!['zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        methodList = methodList.map((methodItem: DataMethodItem) => {\r\n          if (gameMethodItem.id === methodItem.id) {\r\n            methodItem.rows = methodItem.rows.map((row: any) => row.length);\r\n          }\r\n          methodItem.repeatCount = gameMethodItem.repeatCount;\r\n          return methodItem;\r\n        });\r\n      }\r\n    });\r\n\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      // if (['texiao'].includes(gameMethodItem.methodTypeName)) {\r\n      if (gameMethodItem.calcMode === 'row') {  \r\n        methodList = [];\r\n        method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n        gameMethodItem.rows.forEach((row: any) => {\r\n          if (row.s) {\r\n            method.rows.push(row.n || row.pv);\r\n          }\r\n        });\r\n        method.rows = [method.rows.length];\r\n        methodList.push(method);\r\n      }\r\n    });\r\n\r\n    // 计算总注数\r\n    methodList.forEach((methodItem: DataMethodItem) => {\r\n      betCount += this.calc[methodItem.id]({nsl: methodItem.rows, ns: methodItem.rows, repeatCount: methodItem.repeatCount});\r\n      // 任选，组选，直选金额计算\r\n      if (['rx_nzn', 'zux_q2', 'zux_q3', 'zx_q2', 'zx_q3'].includes(methodItem.methodTypeName)) {\r\n        totalAmount = betCount * this.state.defaultInitMethodItemAmount;\r\n      }\r\n    });\r\n\r\n    this.setState({totalBetCount: betCount, totalBetAmount: totalAmount});\r\n  }\r\n  // 重置所有选中玩法项\r\n  resetSelectedOfAllMethodItem = () => {\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        row.s = false;\r\n        row.vs = row.vs.map((vsItem: any) => { \r\n          if (typeof vsItem === 'object') {\r\n            vsItem.s = false; vsItem.amt = ''; return vsItem; \r\n          }\r\n        });\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n    this.setState({curGameMethodItems, totalBetCount: 0, totalBetAmount: 0});\r\n  }\r\n  orderFinishCB = (status: boolean) => {\r\n    if (status) {\r\n      this.resetSelectedOfAllMethodItem();\r\n    }\r\n  }\r\n  getCurIssue = (gameid: number) => {\r\n    APIs.curIssue({gameid}).then((data: any) => {\r\n      if (data.success > 0) {\r\n        this.setState({\r\n          curIssue: data.issue,\r\n          curTime: data.current,\r\n          remainTime: Math.floor((data.saleend - data.current) / 1000) || (this.state.remainTime + 0.05)\r\n        })\r\n      } else {\r\n        this.setState({curIssue: ''});\r\n      }\r\n    });\r\n  }\r\n  getHistoryIssue(gameid: number) {\r\n    APIs.historyIssue({gameid}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        if (data.items.length > 0) {\r\n          this.setState({\r\n            lastIssue: data.items[0].issue,\r\n            openNumbers: data.items[0].code.split(','),\r\n            issueList: data.items\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  getUserPoint(gameid: number) {\r\n    APIs.myNewPoint({gameid}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        this.setState({odds: data.items})\r\n        this.updateOddsOfMethod(data.items);\r\n      }\r\n    });\r\n  }\r\n\r\n  changeTabIndex = (idx: number) => {\r\n    this.setState({\r\n      tabIndex: idx\r\n    })\r\n  }\r\n\r\n  getLimitData(id: number) {\r\n    APIs.lottSets({lotteryIds: id, v: 1}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        this.props.store.game.setLimitList([Object.assign({id}, data.data[id])]);\r\n        this.props.store.game.setLimitLevelList(data.data[id].kqPrizeLimit);\r\n      }\r\n    });\r\n  }\r\n  onLimitChoiceCB = (level: number) => {\r\n    this.props.store.game.updateGamesLimitLevel({gameId: this.id, level});\r\n    this.onCloseLimitChoiceHandler();\r\n  }\r\n  onCloseLimitChoiceHandler = () => {\r\n    this.setState({isShowLimitSetDialog: false});\r\n  }\r\n  componentWillUnmount() {\r\n    this.mysocket && this.mysocket.removeListen();\r\n    Bus.off('onSetLimit', this.onSetLimit);\r\n  }\r\n  onGameHeaderUpdateHandler = (data: any) => {\r\n    if (data.type === 'ludan') {\r\n      this.setState({isExpandLudan: data.data});\r\n    }\r\n  }\r\n  updateHC6TexiaoMethodItems(methodItems: any, subMethodMenuValue: string = '') {\r\n    const animals = subMethodMenuValue === '1' ? ANIMALS_POULTRY : ANIMALS_BEAST;\r\n    methodItems = methodItems.map((method: any) => {\r\n      method.rows = method.rows.map((row: any) => {\r\n        row.s = animals.includes(row.n);\r\n        return row;\r\n      })\r\n      return method;\r\n    });\r\n    return methodItems;\r\n  }\r\n  updateInfoWithBestLudan(bestLudan: BestLudanItem) {\r\n    let menus: GameMethodMenu[] = getMethodsConfigByType(this.gameType);\r\n    let curMenuIndex = bestLudan && getMethodPosByGameTypeAndId(this.gameType, bestLudan.methodId) || 0;\r\n    let curMenuEname = menus && menus[curMenuIndex] && menus[curMenuIndex].ename\r\n    let ludanTab = getLudanTabByTypeAndName(this.gameType, curMenuEname, bestLudan && bestLudan.codeStyle);\r\n    let ludanMenus = getTabsByType(this.gameType, curMenuEname);\r\n    this.setState({\r\n      curMenuIndex,\r\n      curMenuEname,\r\n      curGameMethodItems: this.getMethodItemsByIds((menus && menus[curMenuIndex] && menus[curMenuIndex].ids) || []),\r\n      subMethods: (menus && menus[curMenuIndex] && menus[curMenuIndex].subMethods) || [],\r\n      defaultMenu: (ludanTab && ludanTab.name) || '',\r\n      defaultSubMenu: (ludanTab && ludanTab.subM && ludanTab.subM.length > 0) ? bestLudan.codeStyle.split('_')[1] : '',\r\n      isShowLudan: ludanMenus && ludanMenus.length > 0\r\n    });\r\n  }\r\n  getBestLudanByGameId(id: number) {\r\n    APIs.getBestLudan({lotteryId: id}).then((data: any) => {\r\n      this.updateInfoWithBestLudan(data.bestLudan);\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <article className=\"game-view\">\r\n        <GameCommonDataContext.Provider value={{gameId: this.id, gameType: this.gameType}} >\r\n          <GameHeader \r\n            gameId={this.id}\r\n            gameType={this.gameType}\r\n            curIssue={this.state.curIssue}\r\n            lastIssue={this.state.lastIssue}\r\n            curTime={this.state.curTime}\r\n            remainTime={this.state.remainTime}\r\n            openNumbers={this.state.openNumbers}\r\n            getNewestIssue={this.getCurIssue}\r\n            isExpandLudan={this.state.isExpandLudan}\r\n            update={this.onGameHeaderUpdateHandler}\r\n          />\r\n          {this.state.isShowLudan && this.state.isExpandLudan &&\r\n            <Ludan \r\n              gameId={this.id} \r\n              gameType={this.gameType} \r\n              maxColumns={this.state.maxColumns} \r\n              maxRows={this.state.maxRows} \r\n              issueList={this.state.issueList.slice(0).reverse()} \r\n              methodMenuName={this.state.curMenuEname} \r\n              defaultMenu={this.state.defaultMenu} \r\n            />\r\n          }\r\n          <section className=\"game-main\">\r\n            <MethodMenu gameType={this.gameType} curMenuIndex={this.state.curMenuIndex} methodMenuChangedCB={this.methodMenuChangedCB} updateMethodMenuIndex={this.updateMethodMenuIndex}/>\r\n            {this.state.subMethods.length > 0 && \r\n              <SubMethodMenu \r\n                gameType={this.gameType} \r\n                curSubMenuIndex={this.state.curSubMenuIndex} \r\n                subMethods={this.state.subMethods} \r\n                odds={this.state.odds} \r\n                updateSubMethods={this.updateSubMethods} \r\n                updateSubMethodMenuIndex={this.updateSubMethodMenuIndex}\r\n              />\r\n            }\r\n            <Play \r\n              curGameMethodItems={this.state.curGameMethodItems} \r\n              gameType={this.gameType} \r\n              defaultInitMethodItemAmount={this.state.defaultInitMethodItemAmount}\r\n              updateMethodItem={this.updateMethodItem} \r\n              updateMethodRow={this.updateMethodRow}\r\n              curSubMethod={this.state.curSubMethod}\r\n            />\r\n            <OrderBar \r\n              gameId={this.id} \r\n              gameType={this.gameType} \r\n              curIssue={this.state.curIssue} \r\n              betCount={this.state.totalBetCount} \r\n              amount={this.state.totalBetAmount} \r\n              curGameMethodItems={this.state.curGameMethodItems} \r\n              defaultInitMethodItemAmount={this.state.defaultInitMethodItemAmount}\r\n              updateDefaultInitMethodItemAmount={this.updateDefaultInitMethodItemAmount} \r\n              orderFinishCB={this.orderFinishCB}\r\n              resetSelectedOfAllMethodItem={this.resetSelectedOfAllMethodItem}\r\n            />\r\n           \r\n          </section>\r\n        </GameCommonDataContext.Provider>\r\n        {this.state.isShowLimitSetDialog && this.props.store.game.limitList && this.props.store.game.limitList.length > 0 &&\r\n          <LimitSetDialog \r\n            isShow={this.state.isShowLimitSetDialog} \r\n            isShowLimitSetDialogClose={this.state.isShowLimitSetDialogClose} \r\n            gameId={this.id} \r\n            limitLevelList={this.state.limitLevelList} \r\n            onLimitChoiceCB={this.onLimitChoiceCB} \r\n            onCloseHandler={this.onCloseLimitChoiceHandler} \r\n          />\r\n        }\r\n      </article>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;\r\n"],"sourceRoot":""}