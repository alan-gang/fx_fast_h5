{"version":3,"sources":["utils/timer.ts","components/ludan/LudanMenu.tsx","components/ludan/index.tsx","components/game-header/index.tsx","game/gameMethods.ts","components/method-menu/index.tsx","components/sub-method-menu/index.tsx","components/grid/row.tsx","components/grid/col.tsx","components/play/index.tsx","game/base.ts","game/calc.ts","utils/game.ts","components/order-bar/index.tsx","context/gameContext.ts","components/limit-set-dialog/index.tsx","views/game/index.tsx"],"names":["Timer","time","fn","step","timerItval","this","start","window","setInterval","clearInterval","LundanMenu","inject","observer","props","myScrollRef","changeMenu","menu","updateMenu","React","createRef","Bus","emit","selectedMenu","document","querySelector","current","bscroll","scrollToElement","nextProps","refresh","selectedItem","className","ref","tabs","length","map","i","key","name","onClick","title","Component","Ludan","state","setState","updateLudanList","ludanList","getLuDanListByMethod","issueList","slice","gameType","maxRows","maxColumns","getAllTabsByTypeAndName","methodMenuName","defaultMenu","isShowLudanMenu","LudanMenu","LundanTable","isScroll","GameHeader","curIssue","curTime","onLimitLevelChanged","value","store","game","updateGamesLimitLevel","gameId","level","parseInt","curGameLimitLevel","onLudanHandler","update","type","data","isExpandLudan","getNum","n","LOTTERY_TYPES","K3","limitItem","getLimitListItemById","getGameLimitLevelByGameId","timer","remainTime","hours","minutes","seconds","limitLevelList","kqPrizeLimit","tipText","initTimer","stateData","timeStr","times","close","Math","floor","t","getNewestIssue","timeFormat","split","clearTimer","HC6","num","isHc6","String","padStart","getAnimalByNum","lastIssue","openNumbers","Fragment","renderOpenNumbers","hz","params","Object","assign","dx","ds","lh","methodsConfig","SSC","ename","recentType","min","ids","range","end","G11X5","subMethods","s","v","oddIndex","class","mid","odd","recentChild","PK10","changeTitle","noOdd","getMethodsConfigByType","getMethodPosByGameTypeAndId","methodId","findIndex","m","find","id","MethodMenu","onMenuHandler","index","updateMethodMenuIndex","methodMenuChangedCB","menus","subMenus","nextState","curMenuIndex","SubMethodMenu","methodItems","onSubMethodHandler","subMethod","console","log","JSON","stringify","updateSubMethods","updateSubMethodMenuIndex","methodOdds","odds","parseId","maxprize","sm","curSubMenuIndex","bind","getOddById","Row","children","PureComponent","Col","styl","gutter","padding","span","style","getStyle","Play","onMethodItemHandler","j","k","selected","methodTypeName","event","amount","defaultInitMethodItemAmount","includes","updateMethodItem","onRowClickHandler","updateMethodRow","forceUpdate","curGameMethodItems","methodItem","layout","rows","row","col","hidePos","subpn","posOdd","vs","vsItem","e","icons","iconNum","noodd","C","ceil","factorial","permutationChoice","A","nsl","forEach","nl","repeatCount","P","ns","f","countRepeat","temp","join","filter","Array","from","Set","ORDER_BAR_CONTAINER_CLASS","CALC_BET_NEED_COMPUTED_REPEAT","OrderBar","calc","orderBarContainer","coinChoosed","user","balance","updateDefaultInitMethodItemAmount","onResetHandler","alert","text","onPress","resetSelectedOfAllMethodItem","onOrderHandler","showCoinSet","order","onFocusHandler","onAmountChanged","target","trim","eType","test","onBlurHandler","createElement","issue","betList","totMoney","fail","validateLimit","lotteryId","limitLevel","errorMsg","items","totalmoney","gameid","limit","getLimitLevelData","minAmt","maxAmt","totProjs","isusefree","isFastBet","pos","val","content","betCount","calcBet","nc","push","projs","money","contents","param","nonasv","p","pv","totalnums","trace","isJoinPool","totalCount","calcMode","methodid","codes","count","mode","userpoint","method","methodList","gameMethodItem","loading","betData","setTimeout","hide","APIs","then","success","msg","resetAmount","updateBalance","orderFinishCB","catch","body","appendChild","removeChild","elements","onChange","onBlur","onFocus","maxLength","placeholder","disabled","ReactDOM","createPortal","GameCommonDataContext","createContext","LimitSetDialog","onLimitChoiceHandler","curLimitIndex","onCloseHandler","onConfirmHandler","onLimitChoiceCB","init","item","visible","maskClosable","isShowLimitSetDialogClose","Game","mysocket","onSetLimit","isShowLimitSetDialog","getLimitDataOfKqByGameId","getMethodItemsByIds","ludanMenus","getTabsByType","bestLudan","ludanTab","getLudanTabByTypeAndName","codeStyle","totalBetCount","totalBetAmount","curMenuEname","isShowLudan","updateOddsOfMethod","updateHC6TexiaoMethodItems","curSubMethod","undefined","amt","status","getCurIssue","saleend","changeTabIndex","idx","tabIndex","onCloseLimitChoiceHandler","onGameHeaderUpdateHandler","match","getGameTypeByGameId","gameLimitLevel","getUserPoint","getHistoryIssue","sessionData","sessionStorage","getItem","agentCode","getUrlParams","parse","Socket","url","common","broadcaseWSUrl","receive","openWinCode","lottId","open","send","action","initSocket","signIn","getLoginData","setBroadcaseWSUrl","on","limitListItem","openHistoryItem","unshift","code","mItems","totalAmount","amtc","tmc","historyIssue","myNewPoint","lottSets","lotteryIds","setLimitList","setLimitLevelList","removeListen","off","subMethodMenuValue","animals","ANIMALS_POULTRY","ANIMALS_BEAST","Provider","reverse","limitList","isShow"],"mappings":"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","file":"m/fastm/static/js/3.b8d042d7.chunk.js","sourcesContent":["class Timer {\r\n  private timerItval: number = 0;\r\n  private fn: any;\r\n  /**\r\n   * 定时器\r\n   * @param {*} time  时间\r\n   * @param {*} fn    回调函数\r\n   * @param {*} step\r\n   */\r\n  constructor(time: number, fn: any, step?: number) {\r\n    this.fn = fn;\r\n    this.start(time, fn, step);\r\n  }\r\n  private start(time: number, fn: any, step: number = 1000): void {\r\n    this.timerItval = window.setInterval(() => {\r\n      if (time <= 0) {\r\n        clearInterval(this.timerItval);\r\n        fn(0, true);\r\n        return;\r\n      }\r\n      fn(time, false);\r\n      time--;\r\n    }, step);\r\n  }\r\n  public close(): void {\r\n    clearInterval(this.timerItval);\r\n    // this.fn(0, true);\r\n  }\r\n}\r\n\r\nexport default Timer;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport Bus from '../../utils/eventBus';\r\nimport MyScroll from '../my-scroll';\r\nimport './ludanMenu.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  tabs: any[];\r\n  selectedMenu?: string;\r\n  selectedSubMenu?: string;\r\n  updateMenu(menuName: any): void;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass LundanMenu extends Component<Props, object> {\r\n  myScrollRef: any;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.myScrollRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    Bus.emit('ludanSelectMenuChange', this.props.selectedMenu);\r\n    let selectedItem = document.querySelector('.ludan-menu-view .menu-item.selected');\r\n    selectedItem && this.myScrollRef.current.bscroll.scrollToElement('.menu-item.selected');\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    if (this.props.selectedMenu !== nextProps.selectedMenu) {\r\n      Bus.emit('ludanSelectMenuChange', nextProps.selectedMenu)\r\n    }\r\n    this.myScrollRef.current.refresh();\r\n    let selectedItem = document.querySelector('.ludan-menu-view .menu-item.selected');\r\n    this.myScrollRef.current.bscroll && selectedItem && this.myScrollRef.current.bscroll.scrollToElement(selectedItem, 150, true);\r\n  }\r\n  changeMenu = (menu: any) => {\r\n    this.props.updateMenu(menu);\r\n    // Bus.emit('ludanSelectMenuChange', menu.name);\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"ludan-menu-view\">\r\n        <MyScroll ref={this.myScrollRef}>\r\n          <nav className=\"menu\">\r\n            {this.props.tabs && this.props.tabs.length > 0 && this.props.tabs.map((menu: any, i: number) => (\r\n              <div key={i} className={`menu-item ${this.props.selectedMenu === menu.name ? 'selected' : ''}`} onClick={() => this.changeMenu(menu)}>{menu.title}</div>\r\n            ))}\r\n          </nav>\r\n        </MyScroll>\r\n      </section>  \r\n    )\r\n  }\r\n}\r\n\r\nexport default LundanMenu;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { getLuDanListByMethod, getTabsByType, getAllTabsByTypeAndName } from '../../utils/ludan';\r\nimport LudanMenu from './LudanMenu';\r\nimport LundanTable from './LundanTable';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  gameId: number;\r\n  methodMenuName: string;\r\n  maxColumns: number;\r\n  maxRows: number;\r\n  issueList: any[];\r\n  defaultMenu?: string;\r\n  isShowLudanMenu?: boolean;\r\n  isScroll?: boolean;\r\n}\r\n\r\ninterface State {\r\n  tabs: any[];\r\n  selectedMenu?: string;\r\n  ludanList: any[];\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass Ludan extends Component<Props, object> {\r\n  state: State;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    let tabs = getAllTabsByTypeAndName(this.props.gameType, this.props.methodMenuName);\r\n    // ssc -> 整合 -> 万位大小\r\n    let selectedMenu = this.props.defaultMenu || (tabs.length > 0 ? tabs[0].name : '');\r\n    let ludanList = getLuDanListByMethod(this.props.issueList.slice(0), this.props.gameType,  selectedMenu || '', this.props.maxRows, this.props.maxColumns - 1) || []\r\n    this.state = {\r\n      selectedMenu,\r\n      ludanList,\r\n      tabs\r\n    }\r\n  }\r\n  updateMenu = (menu: any) => {\r\n    this.setState({\r\n      selectedMenu: menu.name,\r\n    }, this.updateLudanList);\r\n  }\r\n  updateLudanList = () => {\r\n    this.setState({\r\n      ludanList: getLuDanListByMethod(this.props.issueList.slice(0), this.props.gameType, this.state.selectedMenu || '', this.props.maxRows, this.props.maxColumns) || []\r\n    });\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    let tabs = getAllTabsByTypeAndName(nextProps.gameType, nextProps.methodMenuName);\r\n    let selectedMenu = nextProps.defaultMenu || (tabs.length > 0 ? tabs[0].name : '');\r\n    let ludanList = getLuDanListByMethod(nextProps.issueList.slice(0), nextProps.gameType,  this.state.selectedMenu || '', nextProps.maxRows, nextProps.maxColumns) || []\r\n    this.setState({\r\n      selectedMenu,\r\n      ludanList,\r\n      tabs\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"ludan-view\">\r\n        {this.props.isShowLudanMenu !== false && <LudanMenu selectedMenu={this.state.selectedMenu} tabs={this.state.tabs} updateMenu={this.updateMenu} />}\r\n        <LundanTable maxColumns={this.props.maxColumns} maxRows={this.props.maxRows} ludanList={this.state.ludanList} isScroll={this.props.isScroll} />\r\n      </section>  \r\n    )\r\n  }\r\n}\r\n\r\nexport default Ludan;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport Timer from '../../utils/timer';\r\nimport { timeFormat } from '../../utils/date';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { getAnimalByNum } from '../../game/hc6';\r\n\r\nimport './index.styl';\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  gameId: number;\r\n  curIssue?: string;\r\n  lastIssue?: string;\r\n  curTime?: number;\r\n  remainTime: number;\r\n  openNumbers: string[];\r\n  isExpandLudan: boolean;\r\n  getNewestIssue(gameid: number): void;\r\n  update(data: any): void;\r\n}\r\n\r\ninterface State {\r\n  timer: any;\r\n  remainTime: number;\r\n  hours: string;\r\n  minutes: string;\r\n  seconds: string;\r\n  limitLevelList: LimitLevelItem[];\r\n  curGameLimitLevel: number;\r\n  tipText: string;\r\n}\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass GameHeader extends Component<Props, object> {\r\n  state: State;\r\n  curIssue?: string;\r\n  curTime?: number;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    let limitItem = props.store.game.getLimitListItemById(props.gameId);\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    this.curIssue = props.curIssue;\r\n    this.curTime = props.curTime;\r\n    this.state = {\r\n      timer: null,\r\n      remainTime: this.props.remainTime,\r\n      hours: '00',\r\n      minutes: '00',\r\n      seconds: '00',\r\n      limitLevelList: (limitItem && limitItem.kqPrizeLimit) || [],\r\n      curGameLimitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1,\r\n      tipText: '第一次进入需选择限红；再次进入不需要选择限红；除非该游戏限红与之前游戏限红不同。当切换不同的限红模式时，再次投注同一彩种，需至少间隔1期再投注。'\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.initTimer(this.props.remainTime);\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    let limitItem = nextProps.store.game.getLimitListItemById(nextProps.gameId);\r\n    let curGameLimitLevel = nextProps.store.game.getGameLimitLevelByGameId(nextProps.gameId);\r\n    let stateData: any = {\r\n      limitLevelList: (limitItem && limitItem.kqPrizeLimit) || [],\r\n      curGameLimitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    }\r\n    if (this.curIssue !== nextProps.curIssue || this.curTime !== nextProps.curTime) {\r\n      this.curIssue = nextProps.curIssue;\r\n      this.curTime = nextProps.curTime;\r\n      stateData.remainTime = nextProps.remainTime;\r\n      this.initTimer(nextProps.remainTime);\r\n    }\r\n    this.setState(stateData);\r\n  }\r\n  initTimer(remainTime: number) {\r\n    if (remainTime <= 0) return;\r\n    let timer = this.state.timer;\r\n    let timeStr: string = '';\r\n    let times: string[] = [];\r\n    if (timer && timer.close) {\r\n      timer.close();\r\n      timer = null;\r\n    }\r\n    timer = new Timer(Math.floor(remainTime), (t: number): void => {\r\n      if (t <= 0) {\r\n        this.props.getNewestIssue(this.props.gameId);\r\n      }\r\n      timeStr = timeFormat(t * 1000);\r\n      times = timeStr.split(':');\r\n      this.setState({hours: times[0], minutes: times[1], seconds: times[2]});\r\n    });\r\n    this.setState({timer});\r\n  }\r\n  onLimitLevelChanged = (value: any) => {\r\n    this.props.store.game.updateGamesLimitLevel({gameId: this.props.gameId, level: parseInt(value, 10)});\r\n    this.setState({\r\n      curGameLimitLevel: parseInt(value, 10)\r\n    });\r\n  }\r\n  onLudanHandler = () => {\r\n    this.props.update({type: 'ludan', data: !this.props.isExpandLudan})\r\n  }\r\n  clearTimer(): void {\r\n    if (this.state.timer && this.state.timer.close) {\r\n      this.state.timer.close();\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.clearTimer();\r\n  }\r\n  isHc6() {\r\n    return this.props.gameType === LOTTERY_TYPES.HC6;\r\n  }\r\n  getNum = (n: any) => {\r\n    if (LOTTERY_TYPES.K3 === this.props.gameType) {\r\n      return '';\r\n    } else {\r\n      return n;\r\n    }\r\n  }\r\n  renderOpenNumbers(num: string, i: number) {\r\n    if (this.isHc6()) {\r\n      if (i === 5) {\r\n        return (<div key={i} className={`icon-plus`}>+</div>)\r\n      }\r\n      return (<div><div key={i} className={`open-num-item n-${String(num).padStart(2, '0')}`}>{String(num).padStart(2, '0')}</div><div className=\"animal\">{getAnimalByNum(parseInt(num, 10))}</div></div>)\r\n    } else {\r\n      return <div key={i} className={`open-num-item n-${num}`}>{this.getNum(num)}</div> \r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <section className={`game-header-view ${this.props.gameType}`}>\r\n        <section className=\"flex ai-c last-issue-sec\">\r\n          <div>第{this.props.lastIssue}期：</div>\r\n          <div className=\"nums-wp\">\r\n            {this.props.openNumbers.map((num: string, i: number) => (\r\n              <React.Fragment  key={i}>{this.renderOpenNumbers(num, i)}</React.Fragment>\r\n            ))}\r\n          </div>\r\n        </section>\r\n        <section className=\"flex ai-c jc-sb cur-issue-sec\">\r\n          <div className=\"flex ai-c\">\r\n            <div className=\"txt-r cur-issue-wp\">距{this.props.curIssue}期截止:</div>\r\n            <div className=\"time-wp flex ai-c jc-c\">\r\n              <span className=\"hour-wp\">{this.state.hours}</span>\r\n              <span className=\"colon\">:</span>\r\n              <span className=\"minute-wp\">{this.state.minutes}</span>\r\n              <span className=\"colon\">:</span>\r\n              <span className=\"second-wp\">{this.state.seconds}</span>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex ai-c\" onClick={this.onLudanHandler}>路单走势<span className={`icon-triangle ${this.props.isExpandLudan ? 'up' : 'down'}`}></span></div>\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameHeader;\r\n","\r\nimport { LOTTERY_TYPES } from '../utils/config';\r\nimport { MethodsConfig } from '../typings/game-methods';\r\nimport { GameMethodMenu } from '../typings/games';\r\n\r\n// 近期开奖配置\r\nconst hz = (params = {}) => {\r\n  return Object.assign({\r\n    title: '和值',\r\n    type: 'hz'\r\n  }, params)\r\n}\r\n\r\nconst dx = (params = {}) => {\r\n  return Object.assign({\r\n    title: '大小',\r\n    type: 'dx'\r\n  }, params)\r\n}\r\n\r\nconst ds = {\r\n  title: '单双',\r\n  type: 'ds'\r\n}\r\n\r\nconst kd = {\r\n  title: '跨度',\r\n  type: 'kd'\r\n}\r\n\r\nconst color = {\r\n  title: '颜色',\r\n  type: 'ys'\r\n}\r\n\r\nconst lh = (params: any) => {\r\n  return Object.assign({\r\n    title: '龙虎',\r\n    type: 'lh'\r\n  }, params)\r\n}\r\n\r\n// 玩法配置\r\nexport let methodsConfig: MethodsConfig = {\r\n  [LOTTERY_TYPES.SSC]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({min: 22})],\r\n      ids: ['1251:1', '1250:1', '1274:1', '1275:1', '1276:1']\r\n    },\r\n    {\r\n      name: '定位',\r\n      ename: 'dw',\r\n      recentType: [dx({min: 4}), ds],\r\n      ids: ['1253:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lhh',\r\n      recentType: [lh({title: '万千', range: {start: 0, end: 2}})],\r\n      ids: ['1273:1']\r\n    },\r\n    {\r\n      name: '一字组合',\r\n      ename: 'yzzh',\r\n      recentType: [dx({min: 4}), ds],\r\n      ids: ['1256:1', '1257:1', '1258:1', '1259:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.G11X5]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({min: 22})],\r\n      ids: ['2050:1', '2050:2', '2053:2', '2051:1']\r\n    },\r\n    {\r\n      name: '定位',\r\n      ename: 'dw',\r\n      recentType: [dx({min: 4})],\r\n      ids: ['2052:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lh',\r\n      recentType: [lh({name: '一位VS二位', range: {start: 0, end: 2}})],\r\n      ids: ['2053:1']\r\n    },\r\n    {\r\n      name: '任选',\r\n      ename: 'rx',\r\n      recentType: [dx({min: 4})],\r\n      ids: ['2054:1:1'],\r\n      subMethods: [\r\n        {s: true, name: '一中一', v: '1z1', oddIndex: 7, class: '', mid: '2054', odd: '', ids: ['2054:1:1']},\r\n        {s: false, name: '二中二', v: '2z2', oddIndex: 6, class: '', mid: '2054', odd: '', ids: ['2054:1:2']},\r\n        {s: false, name: '三中三', v: '3z3', oddIndex: 4, class: '', mid: '2054', odd: '', ids: ['2054:1:3']},\r\n        {s: false, name: '四中四', v: '4z4', oddIndex: 2, class: '', mid: '2054', odd: '', ids: ['2054:1:4']},\r\n        {s: false, name: '五中五', v: '5z5', oddIndex: 0, class: '', mid: '2054', odd: '', ids: ['2054:1:5']},\r\n        {s: false, name: '六中五', v: '6z5', oddIndex: 1, class: '', mid: '2054', odd: '', ids: ['2054:1:6']},\r\n        {s: false, name: '七中五', v: '7z5', oddIndex: 3, class: '', mid: '2054', odd: '', ids: ['2054:1:7']},\r\n        {s: false, name: '八中五', v: '8z5', oddIndex: 5, class: 'no-bd-r', mid: '2054', odd: '', ids: ['2054:1:8']}\r\n      ]\r\n    },\r\n    {\r\n      name: '组选',\r\n      ename: 'zux',\r\n      ids: ['2055:1', '2056:1'],\r\n      recentChild: true,\r\n      // subMethods: [\r\n      //   {s: true, name: '前二组选', recentType: [hz({title: '前二和值', nForm: true, range: {start: 0, end: 2}})], oddIndex: 0, class: 'layout-lr w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2055', odd: '', ids: ['2055:1']},\r\n      //   {s: false, name: '前三组选', recentType: [hz({title: '前三和值', nForm: true,range: {start: 0, end: 3}})], oddIndex: 0, class: 'layout-lr  w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2056', odd: '', ids: ['2056:1']}\r\n      // ]\r\n    },\r\n    {\r\n      name: '直选',\r\n      ename: 'zx',\r\n      ids: ['2057:1', '2058:1'],\r\n      recentChild: true,\r\n      // subMethods: [\r\n      //   {s: true, name: '前二直选', recentType: [hz({title: '前二和值', nForm: true, range: {start: 0, end: 2}})], oddIndex: 0, class: 'layout-lr w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2057', odd: '', ids: ['2057:1']},\r\n      //   {s: false, name: '前三直选', recentType: [hz({title: '前三和值', nForm: true, range: {start: 0, end: 3}})], oddIndex: 0, class: 'layout-lr  w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2058', odd: '', ids: ['2058:1']}\r\n      // ]\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.PK10]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({range: [{start: 0, end: 1}, {start: 1, end: 2}], changeTitle: ['冠亚开奖号码'], min: 11})],\r\n      ids: ['4053:1', '4053:2', '4050:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lh',\r\n      recentType: [lh({name: '龙虎', changeTitle: ['冠军', '第十名'], range: [{start: 0, end: 1}, {start: 1, end: 2}]})],\r\n      ids: ['4054:1']\r\n    },\r\n    {\r\n      name: '定位01-05',\r\n      ename: 'dwgy',\r\n      ids: ['4055:1:1']\r\n    },\r\n    {\r\n      name: '定位05-10',\r\n      ename: 'dwgy',\r\n      ids: ['4055:1:2']\r\n    },\r\n    {\r\n      name: '冠亚组合',\r\n      ename: 'gyhz',\r\n      recentType: [hz({range: [{start: 0, end: 1}, {start: 1, end: 2}], changeTitle: ['冠亚', ['亚军']], min: 11})],\r\n      ids: ['4050:2', '4051:1', '4052:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.K3]: [\r\n    {\r\n      name: '点数',\r\n      ename: 'diansu',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5050:1', '5051:1']\r\n    },\r\n    {\r\n      name: '三军',\r\n      ename: 'shanjun',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5052:1']\r\n    },\r\n    {\r\n      name: '围骰/全骰',\r\n      ename: 'wqshai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5053:1']\r\n    },\r\n    {\r\n      name: '长牌',\r\n      ename: 'changpai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5054:1']\r\n    },\r\n    {\r\n      name: '短牌',\r\n      ename: 'duanpai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5055:1']\r\n    },\r\n    {\r\n      name: '颜色',\r\n      ename: 'yskd',\r\n      recentType: [color],\r\n      ids: ['5056:1']\r\n    },\r\n    {\r\n      name: '跨度',\r\n      ename: 'yskd',\r\n      recentType: [kd],\r\n      ids: ['5057:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.HC6]: [\r\n    {\r\n      name: '特码',\r\n      ename: 'tema',\r\n      recentType: [],\r\n      ids: ['7015:1', '7001:1']\r\n    },\r\n    {\r\n      name: '特肖',\r\n      ename: 'texiao',\r\n      recentType: [],\r\n      ids: ['7007:1'],\r\n      subMethods: [\r\n        {s: false, name: '家禽', v: '1', oddIndex: 0, class: '', odd: '', noOdd: true, ids: ['7007:1']},\r\n        {s: false, name: '野兽', v: '2', oddIndex: 0, class: '', odd: '', noOdd: true, ids: ['7007:1']}\r\n      ]\r\n    },\r\n    {\r\n      name: '色波',\r\n      ename: 'sebo',\r\n      recentType: [],\r\n      ids: ['7005:1']\r\n    },\r\n    {\r\n      name: '正一码',\r\n      ename: 'zhengyima',\r\n      recentType: [],\r\n      ids: ['7009:1']\r\n    },\r\n    {\r\n      name: '正二码',\r\n      ename: 'zhengerma',\r\n      recentType: [],\r\n      ids: ['7010:1']\r\n    },\r\n    {\r\n      name: '正三码',\r\n      ename: 'zhengshanma',\r\n      recentType: [],\r\n      ids: ['7011:1']\r\n    },\r\n    {\r\n      name: '正四码',\r\n      ename: 'zhengshima',\r\n      recentType: [],\r\n      ids: ['7012:1']\r\n    },\r\n    {\r\n      name: '正五码',\r\n      ename: 'zhengwuma',\r\n      recentType: [],\r\n      ids: ['7013:1']\r\n    },\r\n    {\r\n      name: '正六码',\r\n      ename: 'zhengliuma',\r\n      recentType: [],\r\n      ids: ['7014:1']\r\n    }\r\n  ]\r\n};\r\n\r\n// 匹配玩法对象\r\nexport function getMethodByIds(ids: string[], gameType: string) {\r\n  let curGameTypeMethods = methodsConfig[gameType] || [];\r\n  for (let i = 0; i < curGameTypeMethods.length; i++) {\r\n    if (curGameTypeMethods[i].ids.join('') === ids.join('')) {\r\n      return curGameTypeMethods[i];\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * 获取子玩法列表\r\n * @param {*} gameType 游戏类型（必须）\r\n */\r\nexport function getMethodsConfigByType(gameType: string): GameMethodMenu[] {\r\n  return methodsConfig[gameType];\r\n}\r\n\r\n/**\r\n * 根据游戏类型和玩法ID获取当前玩法在当前游戏类型玩法菜单中的位置\r\n * @param gameType 游戏类型\r\n * @param methodId 玩法ID\r\n */\r\nexport function getMethodPosByGameTypeAndId(gameType: string, methodId: number): number {\r\n  return (methodsConfig[gameType] || []).findIndex((m: GameMethodMenu) => {\r\n    return m.ids.find((id: string) => parseInt(id.split(':')[0], 10) === methodId)\r\n  })\r\n}\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { getMethodsConfigByType } from '../../game/gameMethods';\r\nimport { GameMethodMenu, GameSubMethodMenu } from '../../typings/games';\r\nimport MyScroll from '../my-scroll';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  curMenuIndex: number;\r\n  updateMethodMenuIndex(index: number): void;\r\n  methodMenuChangedCB(methodIds: GameMethodMenu): void;\r\n}\r\n\r\ninterface State {\r\n  menus: GameMethodMenu[];\r\n  subMenus: GameSubMethodMenu[];\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass MethodMenu extends Component<Props, object> {\r\n  state: State;\r\n  myScrollRef: any;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      menus: getMethodsConfigByType(this.props.gameType),\r\n      subMenus: []\r\n    }\r\n    this.myScrollRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    this.myScrollRef.current.refresh();\r\n  }\r\n  onMenuHandler = (menu: GameMethodMenu, index: number) => {\r\n    this.props.updateMethodMenuIndex(index);\r\n    this.props.methodMenuChangedCB(menu);\r\n  }\r\n  componentWillReceiveProps(nextProps: Props, nextState: State) {\r\n    this.myScrollRef.current.refresh();\r\n  }\r\n  render() {\r\n    let menus: GameMethodMenu[] = getMethodsConfigByType(this.props.gameType);\r\n    return (\r\n      <section className=\"method-menu-view\">\r\n        <section className=\"menu-wp\">\r\n          <MyScroll ref={this.myScrollRef}>\r\n            <nav className=\"menu-item-ls\">\r\n              {menus.map((menu, i) => (\r\n                <div key={i} className={`menu-item ${i === this.props.curMenuIndex ? 'selected' : ''}`} onClick={() => {this.onMenuHandler(menu, i)}}><span>{menu.name}</span></div>\r\n              ))}\r\n            </nav>\r\n          </MyScroll>\r\n        </section>\r\n        <section className=\"sub-menu-wp\">\r\n          <nav></nav>\r\n        </section>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MethodMenu;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { GameSubMethodMenu } from '../../typings/games';\r\nimport methodItems from '../../game/methodItems';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  subMethods?: GameSubMethodMenu[];\r\n  odds: any;\r\n  curSubMenuIndex: number;\r\n  updateSubMethods(method: GameSubMethodMenu): void;\r\n  updateSubMethodMenuIndex(index: number): void;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass SubMethodMenu extends Component<Props, object> {\r\n  methodItems: any = methodItems;\r\n  onSubMethodHandler = (subMethod: GameSubMethodMenu, index: number) => {\r\n    console.log(JSON.stringify(subMethod));\r\n    this.props.updateSubMethods(subMethod);\r\n    this.props.updateSubMethodMenuIndex(index);\r\n  }\r\n  parseId(id: string = ''): string {\r\n    return id.split(':')[0] || '';\r\n  }\r\n  getOddById(ids: string[], oddIndex: number) {\r\n    let methodOdds = this.props.odds[this.parseId(ids[0])] \r\n    return (methodOdds && methodOdds[oddIndex] && methodOdds[oddIndex].maxprize) || '';\r\n  }\r\n  render() {\r\n    let subMethods = this.props.subMethods;\r\n    return (\r\n      <section className={`sub-method-menu-view ${this.props.gameType}`}>\r\n        <ul className={`flex fw-w sub-method-item-ls`}>\r\n          {subMethods && subMethods.map((sm: GameSubMethodMenu, i: number) => (\r\n            <li className={`sub-method-item ${sm.class} ${i === this.props.curSubMenuIndex ? 'selected' : ''}`} key={i} onClick={this.onSubMethodHandler.bind(this, sm, i)}>\r\n              <div className=\"method-name\">{sm.name}</div>\r\n              {!sm.noOdd && <div className=\"odd\">{this.getOddById(sm.ids, sm.oddIndex)}</div>}\r\n            </li>  \r\n          ))}\r\n        </ul>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SubMethodMenu;\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport './row.styl';\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLDivElement>{\r\n  className?: string;\r\n}\r\n\r\nclass Row extends PureComponent<Props, object> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    return (<div className={`ds-row ${this.props.className || ''}`} onClick={this.props.onClick}>{this.props.children}</div>)\r\n  }\r\n}\r\n\r\nexport default Row;\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport './col.styl';\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\r\n  className?: string;\r\n  span?: number;\r\n  gutter?: string;\r\n}\r\n\r\nclass Col extends PureComponent<Props, object> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n  getStyle() {\r\n    let styl: any = {}\r\n    if (this.props.gutter) {\r\n      styl.padding = this.props.gutter;\r\n    }\r\n    return styl;\r\n  }\r\n  render() {\r\n    return (<div className={`ds-col ${this.props.span ? 'col-'+ this.props.span : ''} ${this.props.className}`} style={this.getStyle()} onClick={this.props.onClick}>{this.props.children}</div>)\r\n  }\r\n}\r\n\r\nexport default Col;\r\n","import React, { PureComponent, MouseEvent } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport methodItems from '../../game/methodItems';\r\nimport { Row, Col } from '../grid';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { GameSubMethodMenu } from '../../typings/games';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  curGameMethodItems: any[];\r\n  defaultInitMethodItemAmount: number;\r\n  updateMethodItem(i: number, j: number, k: number, selected?: boolean | undefined, value?: string | undefined): void;\r\n  updateMethodRow(i: number, j: number, selected?: boolean | undefined): void;\r\n  curSubMethod?: GameSubMethodMenu;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass Play extends PureComponent<Props, object> {\r\n  methodItems: any = methodItems;\r\n  onMethodItemHandler = (i: number, j: number, k: number, selected: boolean, methodTypeName: string, event: MouseEvent<HTMLElement>) => {\r\n    let amount = selected ? '' : String(this.props.defaultInitMethodItemAmount);\r\n    amount = ['rx_nzn', 'zux_q2', 'zux_q3', 'zx_q2', 'zx_q3'].includes(methodTypeName) ? '0' : amount;\r\n    this.props.updateMethodItem(i, j, k, !selected, amount);\r\n  }\r\n  onRowClickHandler = (i: number, j: number, selected?: boolean | undefined) => {\r\n    if (this.props.gameType === LOTTERY_TYPES.HC6) {\r\n      this.props.updateMethodRow(i, j, !selected);\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    this.forceUpdate();\r\n  }\r\n  render() {\r\n    let curGameMethodItems = this.props.curGameMethodItems;\r\n    return (\r\n      <article className={`play-view ${this.props.gameType}`}>\r\n        {curGameMethodItems.map((methodItem: any, i: number) => (\r\n          <div className={`method ${methodItem.layout} ${methodItem.class || ''} clear`} key={i} >\r\n            {methodItem.rows.map((row: any, j: number) => (\r\n              <Row key={j} className={`clear ${row.s ? 'selected': ''}`} onClick={() => this.onRowClickHandler(i, j, row.s)}>\r\n                <Col span={row.col} className={`flex pos-label ${row.hidePos ? 'hide' : ''}`} >\r\n                  <div className=\"pos-name\">{row.n}</div>\r\n                  {row.subpn && <div className=\"sub-pn\">{row.subpn}</div>}\r\n                  {row.posOdd === true && <div className=\"row-odd\">{row.odd}</div>}\r\n                </Col>\r\n                {row.vs.map((vsItem: any, k: number) => (\r\n                  <Col span={vsItem.col}  key={k} className={`method-item-col ${row.class || ''}`}>\r\n                    <div className={`method-item ${vsItem.class || ''} ${vsItem.s ? 'selected' : ''}`} onClick={(e: MouseEvent<HTMLElement>) => this.onMethodItemHandler(i, j, k, vsItem.s, methodItem.methodTypeName, e)}>\r\n                      <span className={`method-item-name`} n={vsItem.n}>\r\n                        {vsItem.class === 'icon' && vsItem.icons && vsItem.icons.map((iconNum: number, m: number) => (<span className={`icon-item icon-item-${iconNum}`} key={m}></span>))}\r\n                        {vsItem.class !== 'icon' && vsItem.n}\r\n                      </span>\r\n                      {row.noodd !== true && methodItem.posOdd !==true && <span className={`odd`}>{vsItem.odd || ''}</span>}\r\n                    </div>\r\n                  </Col>\r\n                ))}\r\n              </Row>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </article>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Play;\r\n","/**\r\n * 排列\r\n * @param n\r\n * @param m\r\n * @returns {Number}\r\n */\r\nfunction permutationChoice(n: number, m: number): number {\r\n  return factorial(n) / factorial(n - m);\r\n}\r\n\r\n/**\r\n * 组合\r\n * @param n\r\n * @param m\r\n * @returns {Number}\r\n * combineChoice\r\n */\r\nfunction C(n: number, m: number): number {\r\n  if (!n || !m || n < m || n < 0 || m < 0) return 0;\r\n  else if (n === m) return 1;\r\n  else if (m === 1) return n;\r\n  else {\r\n    return Math.ceil(permutationChoice(n, m) / factorial(m));\r\n  }\r\n}\r\n\r\n/**\r\n * [factorial description]\r\n * @param  {[type]} n [description]\r\n * @return {[type]}   [description]\r\n */\r\nfunction factorial(n: number): number {\r\n  if (n === 0) return 1;\r\n  return n * factorial(n - 1);\r\n}\r\n\r\n// repeat a string s t times\r\n// let repeat = (s: string, t: number) => {\r\n//   if (typeof s.repeat === 'function') return s.repeat(t)\r\n//   let r = ''\r\n//   while (t > 0) {\r\n//     r += s\r\n//     t--\r\n//   }\r\n//   return r\r\n// }\r\n\r\n// remove duplicate in a string by split by i\r\n// @params o 重复号的判断加入是否排序后比较相等\r\nlet removeDuplicate = (s: string, i: string, join: string, o: string, l: string) => {\r\n  let has = false\r\n  return { s: s.split(i).filter((n: string, i: number, arr: string[]) => {\r\n    if (!n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g'))) return false\r\n    return i === arr.findIndex((nn: string) => !o ? nn === n : (nn.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).sort((a: any, b: any) => a - b).join('') === (n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).sort((a: any, b: any) => a - b).join('')) || !(has = true)\r\n  }).join(join || ' '), has: has }\r\n}\r\n\r\n// let padStart = (s: string, l: number, w: string) => {\r\n//   s += ''\r\n//   while (s.length < l) {\r\n//     s = w + s\r\n//   }\r\n//   if (s.length > l) s = s.slice(s.length - l)\r\n//   return s\r\n// }\r\n\r\nlet isPrime = (n: number) => {\r\n  if (n <= 3) { return n > 1 }\r\n  if (n % 2 === 0 || n % 3 === 0) { return false }\r\n  for (let i = 5; i * i <= n; i += 6) {\r\n    if (n % i === 0 || n % (i + 2) === 0) { return false }\r\n  }\r\n  return true\r\n}\r\n\r\n// 空值判断\r\nlet empty = (value: string) => value.match(/^[\\s\\t\\r]*$/)\r\n\r\n/*\r\nvalue: 输入值\r\nN: 一注的长度\r\nr: 最大相同数字的长度\r\nl: 一个号码的长度 如12345有5个号码, 010203有3个号码, 号码长度为2\r\n */\r\nlet N = (value: string, N: number, r: number, l: number, max: number, min: number) => empty(value) ? [] : value.split(' ').filter(n => n.length === N).filter((n: string) => {\r\n  return (typeof r !== 'number') || r === Object.values((n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).reduce((p: any, na: any) => {\r\n    if (p[na] !== undefined) p[na] += 1\r\n    else p[na] = 1\r\n    if ((max !== undefined && parseInt(na) > max) || (min !== undefined && parseInt(na) < min)) p[na] = r + 1\r\n    return p\r\n  }, {})).sort((a: any, b: any) => b - a)[0]\r\n})\r\n\r\n// 最大重复号码为r 或小于 r\r\n// let ON = (value: string, N: number, r: number, l: number, max: number, min: number) => empty(value) ? [] : value.split(' ').filter(n => n.length === N).filter((n: string) => {\r\n//   return (typeof r !== 'number') || r >= Object.values((n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).reduce((p: any, na: any) => {\r\n//     if (p[na] !== undefined) p[na] += 1\r\n//     else p[na] = 1\r\n//     if ((max !== undefined && parseInt(na) > max) || (min !== undefined && parseInt(na) < min)) p[na] = r + 1\r\n//     return p\r\n//   }, {})).sort((a: any, b: any) => b - a)[0]\r\n// })\r\n\r\n// 数组内各长度相乘\r\nlet P = (nsl: number[]): number => {\r\n  let n = 1\r\n  nsl.forEach((nl: number) => {\r\n    n *= nl\r\n  })\r\n  return n\r\n}\r\n\r\n// 数组内各长度相加\r\nlet A = (nsl: number[]): number => {\r\n  let n = 0\r\n  nsl.forEach((nl: number) => {\r\n    n += nl\r\n  })\r\n  return n\r\n}\r\n\r\nexport {\r\n  N,\r\n  // ON,\r\n  P,\r\n  A,\r\n  C,\r\n  removeDuplicate,\r\n}\r\n","import { /*N,*/ P, A, C } from './base'\r\ninterface Params {\r\n  nsl: number[];\r\n  ns?: any[];\r\n  repeatCount?: number;\r\n}\r\n\r\nexport default {\r\n  '1250:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1251:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1252:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1253:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1254:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1256:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1257:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1258:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1259:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1273:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1274:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1275:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1276:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  \r\n  // 11x5\r\n  '2050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2050:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2053:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2054:1:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  '2054:1:2'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 2)\r\n  },\r\n  '2054:1:3'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 3)\r\n  },\r\n  '2054:1:4'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 4)\r\n  },\r\n  '2054:1:5'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 5)\r\n  },\r\n  '2054:1:6'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 6)\r\n  },\r\n  '2054:1:7'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 7)\r\n  },\r\n  '2054:1:8'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 8)\r\n  },\r\n  '2055:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 2)\r\n  },\r\n  '2056:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 3)\r\n  },\r\n  '2057:1'({nsl, repeatCount}: Params) {\r\n    return P(nsl) - (repeatCount || 0);\r\n  },\r\n  '2058:1'({ns}: Params) {\r\n    let n = 0;\r\n    if (ns) {\r\n      ns[0] && ns[0][0] && ns[0].forEach((f: number) => {\r\n        ns[1] && ns[1][0] && ns[1].forEach((s: number) => {\r\n          ns[2] && ns[2][0] && ns[2].forEach((t: number) => {\r\n            if (f !== s && f !== t && s !== t) n++;\r\n          })\r\n        })\r\n      });\r\n    }\r\n    return n;\r\n  },\r\n\r\n  // PK10\r\n  '4050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4050:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4053:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4054:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:3'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:4'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:5'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n\r\n  // K3\r\n  '5050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5054:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5055:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5056:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5057:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n\r\n  // 六合彩\r\n  // 特码\r\n  '7001:1' ({nsl}: Params) {\r\n    return C(nsl[0], 1)\r\n  },\r\n  // 正码\r\n  '7006:1' ({nsl}: Params) {\r\n    return C(nsl[0], 1)\r\n  },\r\n  // 特肖\r\n  '7007:1' ({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  // 波色\r\n  '7005:1' ({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  // 一肖\r\n  '7008:1' ({nsl}: Params) {\r\n    return C(A(nsl), 1)\r\n  },\r\n  // 2连肖\r\n  '7002:1' ({nsl}: Params) {\r\n    return C(A(nsl), 2)\r\n  },\r\n  // 3连肖\r\n  '7003:1' ({nsl}: Params) {\r\n    return C(A(nsl), 3)\r\n  },\r\n  // 4连肖\r\n  '7004:1' ({nsl}: Params) {\r\n    return C(A(nsl), 4)\r\n  },\r\n  // '正一码'\r\n  '7009:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正二码'\r\n  '7010:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正三码'\r\n  '7011:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正四码'\r\n  '7012:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正五码'\r\n  '7013:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正六码'\r\n  '7014:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '特码'\r\n  '7015:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正特和值'\r\n  '7016:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '尾数'\r\n  '7017:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  }\r\n}","\r\n/**\r\n * 计算重复元素的个数\r\n * @param data \r\n */\r\nexport function countRepeat(data: any[]): number {\r\n  if (data.length < 1) return 0;\r\n  let temp = (data.join(',').split(',') || []).filter((num) => num.length > 0);\r\n  return temp.length - Array.from(new Set(temp)).length;\r\n}\r\n","import React, { Component, ChangeEvent } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { Button, Toast, Modal } from 'antd-mobile';\r\nimport CoinSet from '../coin-set';\r\nimport APIs from '../../http/APIs';\r\nimport calc from '../../game/calc';\r\nimport { countRepeat } from '../../utils/game';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameId: number;\r\n  gameType: string;\r\n  curIssue?: string;\r\n  betCount: number;\r\n  amount: number;\r\n  curGameMethodItems: any[];\r\n  defaultInitMethodItemAmount: number;\r\n  updateDefaultInitMethodItemAmount(amount: number): void;\r\n  orderFinishCB(status: boolean): void;\r\n  resetSelectedOfAllMethodItem(): void;\r\n}\r\n\r\ninterface DataMethodItem {\r\n  id: string;\r\n  rows: any[];\r\n  methodTypeName?: string;\r\n  repeatCount: number;\r\n}\r\n\r\ninterface State {\r\n  amount: number;\r\n  showCoinSet: boolean;\r\n}\r\n\r\nconst ORDER_BAR_CONTAINER_CLASS = 'order-bar-container';\r\nconst CALC_BET_NEED_COMPUTED_REPEAT = ['zx_q2', 'zx_q3'];\r\n@inject('store')\r\n@observer\r\nclass OrderBar extends Component<Props, object> {\r\n  state: State;\r\n  calc: any = calc;\r\n  orderBarContainer: HTMLDivElement;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      amount: this.props.defaultInitMethodItemAmount,\r\n      showCoinSet: false\r\n    }\r\n    this.orderBarContainer = document.createElement('div');\r\n    this.orderBarContainer.className = ORDER_BAR_CONTAINER_CLASS;\r\n  }\r\n  coinChoosed = (value: string) => {\r\n    const amount: number = value === 'all' ? parseInt(this.props.store.user.balance, 10): parseInt(value, 10);\r\n    this.setState({amount});\r\n    this.props.updateDefaultInitMethodItemAmount(amount);\r\n  }\r\n  onResetHandler = () => {\r\n    Modal.alert(' ', '您确定要重置选中的投注？',[{ text: '取消' }, { text: '确定', onPress: () => this.props.resetSelectedOfAllMethodItem() }]);\r\n  }\r\n  onOrderHandler = () => {\r\n    this.setState({showCoinSet: false});\r\n    this.order();\r\n  }\r\n  validate(params: any): boolean {\r\n    if (!params.issue) {\r\n      Toast.fail('获取游戏期号失败，请刷新后重试！');\r\n      return false;\r\n    } else if(!params.betList || params.betList.length <= 0) {\r\n      return false;\r\n    } else if(params.totMoney <= 0) {\r\n      this.setState({showCoinSet: true});\r\n      Toast.fail('请输入金额！');\r\n      return false;\r\n    } else if (!this.validateLimit(params.lotteryId, params.limitLevel, this.state.amount)) {\r\n      return false;  \r\n    } else if (params.errorMsg) {\r\n      Toast.fail(params.errorMsg);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  validateHc6(params: any): boolean {\r\n    if (!params.issue) {\r\n      Toast.fail('获取游戏期号失败，请刷新后重试！');\r\n      return false;\r\n    } else if(!params.items || params.items.length <= 0) {\r\n      return false;\r\n    } else if(params.totalmoney <= 0) {\r\n      this.setState({showCoinSet: true});\r\n      Toast.fail('请输入金额！');\r\n      return false;\r\n    } else if (!this.validateLimit(params.gameid, params.limitLevel, this.state.amount)) {\r\n      return false;\r\n    } else if (params.errorMsg) {\r\n      Toast.fail(params.errorMsg);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  validateLimit(gameId: number, level: number, amount: number) {\r\n    let limit = this.props.store.game.getLimitLevelData(gameId, level);\r\n    if (limit) {\r\n      if (amount < limit.minAmt || amount > limit.maxAmt) {\r\n        Toast.fail(amount < limit.minAmt ? '您输入的金额不能低于最低限红' : '您输入的金额超过最高限红');\r\n        return false;\r\n      } \r\n    }\r\n    return true;\r\n  }\r\n  getParams(): object {\r\n    let props = this.props;\r\n    let curGameMethodItems = props.curGameMethodItems;\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    let params: any = {\r\n      lotteryId: props.gameId,\r\n      issue: props.curIssue,\r\n      totProjs: 0,\r\n      totMoney: 0,\r\n      isusefree: 0,\r\n      betList: [],\r\n      isFastBet: 1,\r\n      limitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    };\r\n    let pos: string = '';\r\n    let val: string = '';\r\n    let content: string = '';\r\n    let betCount: number = 0;\r\n    curGameMethodItems.forEach((methodItem: any) => {\r\n      if (['rx_nzn'].includes(methodItem.methodTypeName)) {\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        content = methodItem.rows[0].nc.join(',');\r\n        params.betList.push({methodId: methodItem.id.split(':')[0], projs: 1, money: params.totMoney, content});\r\n        params.totProjs += params.betList.length;\r\n        if (content.split(',').length > 8) {\r\n          params.errorMsg = '该玩法一个方案最多选择8个号码！';\r\n        }\r\n      } else if (['zux_q2', 'zux_q3'].includes(methodItem.methodTypeName)) {\r\n        // 组选\r\n        let nc = methodItem.rows.map((row: any) => {\r\n          return row.nc;\r\n        })[0];\r\n        let contents: any[] = [];\r\n        let param = {\r\n          methodId: methodItem.id.split(':')[0],\r\n          projs: 1,\r\n          money: this.state.amount\r\n        }\r\n        for (let i = 0; i <= nc.length - 1; i++) {\r\n          for (let j = i + 1; j <= nc.length - 1; j++) {\r\n            if (['zux_q2'].includes(methodItem.methodTypeName)) {\r\n              contents.push(Object.assign({\r\n                content: `${nc[i]},${nc[j]}`\r\n              }, param));\r\n            }\r\n            if (['zux_q3'].includes(methodItem.methodTypeName)) {\r\n              for (let k = i + 2; k <= nc.length - 1; k++) {\r\n                if (nc[j] >= nc[k]) continue;\r\n                contents.push(Object.assign({\r\n                  content: `${nc[i]},${nc[j]},${nc[k]}`\r\n                }, param));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        params.betList.push(...contents);\r\n        params.totProjs += contents.length;\r\n      } else if (['zx_q2', 'zx_q3'].includes(methodItem.methodTypeName)) {\r\n        // 直选 前二、三\r\n        let nc = methodItem.rows.map((row: any) => {\r\n          return row.nc;\r\n        });\r\n        let contents: any[] = [];\r\n        let param = {\r\n          methodId: methodItem.id.split(':')[0],\r\n          projs: 1,\r\n          money: this.state.amount\r\n        }\r\n        for (let i = 0; i < nc.length; i++) {\r\n          for (let j = 0; j < nc[i].length; j++) {\r\n            if (!nc[i + 1]) continue;\r\n            for (let k = 0; k < nc[i + 1].length; k++) {\r\n              if (nc[i][j] === nc[i + 1][k]) continue;\r\n              if (nc.length >= 3) {\r\n                if (!nc[i + 2]) continue;\r\n                for (let m = 0; m < nc[i + 2].length; m++) {\r\n                  if (nc[i + 1][k] === nc[i + 2][m] || nc[i][j] === nc[i + 2][m]) continue;  \r\n                  contents.push(Object.assign({\r\n                    content: `${nc[i][j]},${nc[i + 1][k]},${nc[i + 2][m]}`\r\n                  }, param));\r\n                }\r\n              } else {\r\n                contents.push(Object.assign({\r\n                  content: `${nc[i][j]},${nc[i + 1][k]}`\r\n                }, param));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        params.betList.push(...contents);\r\n        params.totProjs += contents.length;\r\n      } else {\r\n        methodItem.rows.forEach((row: any) => {\r\n          row.vs.forEach((vsItem: any) => {\r\n            if (vsItem.s) {\r\n              params.totMoney += this.state.amount; // parseInt(vsItem.amt, 10);\r\n              params.totProjs++;\r\n              pos = row.nonasv ? '' : row.p || row.n;\r\n              val = vsItem.p ? (vsItem.p + '-' + (vsItem.pv || vsItem.n)) : (vsItem.pv || vsItem.n)\r\n              content = pos ? pos + '-' + val : val;\r\n              params.betList.push({methodId: methodItem.id.split(':')[0], projs: 1, money: this.state.amount, content});\r\n            }\r\n          });\r\n        });\r\n      }\r\n    });\r\n    return params;\r\n  }\r\n  getParamsHc6() {\r\n    let props = this.props;\r\n    let curGameMethodItems = props.curGameMethodItems;\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    let params: any = {\r\n      gameid: props.gameId,\r\n      issue: props.curIssue,\r\n      totalnums: 0, // 总注数\r\n      totalmoney: 0,\r\n      type: 1, // 类型：1-投注；2-追号\r\n      isusefree: 0, // 是否使用优惠券，0-否，1-是\r\n      items: [],\r\n      trace: '',\r\n      isJoinPool: 0,\r\n      isFastBet: 1,\r\n      limitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    };\r\n    let items: any[] = [];\r\n    let totalCount = 0;\r\n    curGameMethodItems.forEach((methodItem: any) => {\r\n      methodItem.rows.forEach((row: any) => {\r\n        console.log('count=', this.calcBet(), methodItem.id)\r\n        if (methodItem.calcMode === 'row') {\r\n          if (row.s) {\r\n            items.push({\r\n              methodid: methodItem.id.split(':')[0],\r\n              type: 1,\r\n              pos: '',\r\n              codes: row.pv || row.n,\r\n              count: 1,\r\n              times: this.state.amount,\r\n              money: this.state.amount,\r\n              mode: 1,\r\n              userpoint: '0.0000'\r\n            });\r\n            totalCount += 1;   \r\n          }\r\n        } else {\r\n          row.vs.forEach((vsItem: any) => {\r\n            if (vsItem.s) {\r\n              items.push({\r\n                methodid: methodItem.id.split(':')[0],\r\n                type: 1,\r\n                pos: vsItem.pos,\r\n                codes: vsItem.p ? (vsItem.p + '-' + (vsItem.pv || vsItem.n)) : (vsItem.pv || vsItem.n),\r\n                count: 1,\r\n                times: this.state.amount,\r\n                money: this.state.amount,\r\n                mode: 1,\r\n                userpoint: '0.0000'\r\n              });\r\n              totalCount += 1;            \r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n    params.totalmoney = items.length * this.state.amount;\r\n    params.totalnums = totalCount;\r\n    params.items = JSON.stringify(items);\r\n    return params;\r\n  }\r\n  calcBet() {\r\n    let curGameMethodItems = this.props.curGameMethodItems;\r\n    let methodList: DataMethodItem[] = [];\r\n    let method: any;\r\n    let betCount: number = 0;\r\n\r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n      gameMethodItem.rows.forEach((row: any) => {\r\n        method.rows.push(row.nc.slice(0));\r\n      });\r\n      methodList.push(method);\r\n    });\r\n    \r\n    // 计算重复数\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (CALC_BET_NEED_COMPUTED_REPEAT.includes(gameMethodItem.methodTypeName)) {\r\n        gameMethodItem.repeatCount = countRepeat(methodList.map((methodItem: DataMethodItem) => methodItem.id === gameMethodItem.id ? methodItem.rows : []));\r\n      }\r\n    });\r\n    \r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (!['zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        methodList = methodList.map((methodItem: DataMethodItem) => {\r\n          if (gameMethodItem.id === methodItem.id) {\r\n            methodItem.rows = methodItem.rows.map((row: any) => row.length);\r\n          }\r\n          methodItem.repeatCount = gameMethodItem.repeatCount;\r\n          return methodItem;\r\n        });\r\n      }\r\n    });\r\n\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (gameMethodItem.calcMode === 'row') {  \r\n        methodList = [];\r\n        method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n        gameMethodItem.rows.forEach((row: any) => {\r\n          if (row.s) method.rows.push(row.pv || row.n);\r\n        });\r\n        method.rows = [method.rows.length];\r\n        methodList.push(method);\r\n      }\r\n    });\r\n\r\n    // 计算总注数\r\n    methodList.forEach((methodItem: DataMethodItem) => {\r\n      betCount += this.calc[methodItem.id]({nsl: methodItem.rows, ns: methodItem.rows, repeatCount: methodItem.repeatCount});\r\n    });\r\n\r\n    return betCount;\r\n  }\r\n  order() {\r\n    const isHc6 = this.isHc6();\r\n    const params = this[isHc6 ? 'getParamsHc6' : 'getParams']();\r\n    if (!this[isHc6 ? 'validateHc6' : 'validate'](params)) {\r\n      return null;\r\n    }\r\n    Toast.loading('投注中...', 0);\r\n    const data = isHc6 ? params : { betData: JSON.stringify(params) };\r\n    setTimeout(Toast.hide, 30000);\r\n    APIs[isHc6 ? 'booking' : 'bet'](data).then(({success, msg}: any) => {\r\n      this.resetAmount();\r\n      Toast.hide();\r\n      if (success === 1) {\r\n        Toast.success('投注成功', 2);\r\n        this.props.store.user.updateBalance();\r\n        this.props.orderFinishCB(true);\r\n      } else {\r\n        Toast.fail(msg || '投注失败');\r\n        this.props.orderFinishCB(false);\r\n      }\r\n    }).catch(() => {\r\n      Toast.hide();\r\n    });\r\n  }\r\n  onFocusHandler = () => {\r\n    this.setState({showCoinSet: true});\r\n  }\r\n  onAmountChanged = (event: ChangeEvent<HTMLInputElement>) => {\r\n    let value = event.target.value.trim();\r\n    let eType  = event.type;\r\n    if (value.length <= 0) {\r\n      value = '0';\r\n    }\r\n    console.log('type=', eType);\r\n    if (!/^\\d*$/g.test(value)) {\r\n      value = String(this.props.defaultInitMethodItemAmount);\r\n    }\r\n    this.setState({amount: parseInt(value, 10)});\r\n    this.props.updateDefaultInitMethodItemAmount(parseInt(value, 10));\r\n  }\r\n  onBlurHandler =  (event: ChangeEvent<HTMLInputElement>) => {\r\n    let value = event.target.value.trim();\r\n    if (!/^\\d+$/g.test(value)) {\r\n      value = '-1';\r\n    }\r\n    this.setState({amount: parseInt(value, 10)});\r\n    this.props.updateDefaultInitMethodItemAmount(parseInt(value, 10));\r\n  }\r\n  componentDidMount() {\r\n    document.body.appendChild(this.orderBarContainer);\r\n  }\r\n  componentWillUnmount() {\r\n    document.body.removeChild(this.orderBarContainer);\r\n  }\r\n  resetAmount() {\r\n    this.setState({amount: 0});\r\n    this.props.updateDefaultInitMethodItemAmount(0);\r\n  }\r\n  isHc6() {\r\n    return this.props.gameType === LOTTERY_TYPES.HC6;\r\n  }\r\n  render() {\r\n    let elements = (\r\n      <section className=\"order-bar-view\">\r\n        {this.state.showCoinSet && <section>{<CoinSet coinChoosed={this.coinChoosed} value={this.state.amount} />}</section>}\r\n        <section className=\"flex ai-c jc-sb order-sec\">\r\n          <div>\r\n            <div className=\"flex ai-c fast-amount-wp\">\r\n              <input className=\"fast-amount\" type=\"tel\" value={this.state.amount <= 0 ? '': this.state.amount} onChange={this.onAmountChanged} onBlur={this.onBlurHandler} onFocus={this.onFocusHandler} maxLength={9} placeholder=\"请输入快捷金额\" />\r\n            </div>  \r\n          </div>\r\n          {/* <div className=\"txt-r\">\r\n            已选 <span className=\"txt-red\">{this.props.betCount}</span> 注 共 <span className=\"txt-red\">{(this.props.amount).toFixed(3)} </span>元\r\n          </div> */}\r\n          <div className=\"flex ai-c jc-e btns-wp\">\r\n            <Button type=\"primary\" className=\"btn-reset\" disabled={this.props.betCount <= 0} onClick={this.onResetHandler}>重置</Button>\r\n            <Button type=\"primary\" className=\"btn-order\" disabled={this.props.betCount <= 0} onClick={this.onOrderHandler}>一键下单</Button>\r\n          </div>\r\n        </section>\r\n      </section>\r\n    )\r\n    return ReactDOM.createPortal(elements, this.orderBarContainer);\r\n  }\r\n}\r\n\r\nexport default OrderBar;\r\n","import { createContext } from 'react';\r\n\r\nexport interface GameCommonDataType {\r\n  gameId: number;\r\n  gameType: string;\r\n}\r\n\r\nexport const GameCommonDataContext = createContext<GameCommonDataType>({\r\n  gameId: -1,\r\n  gameType: ''\r\n});\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { Button, Modal, Icon } from 'antd-mobile';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  isShowMask?: boolean;\r\n  isShow: boolean;\r\n  gameId: number;\r\n  limitLevelList: LimitLevelItem[];\r\n  isShowLimitSetDialogClose: boolean; // 是否显示弹出框关闭按钮\r\n  onLimitChoiceCB(level: number): void;\r\n  onCloseHandler?: () => void;\r\n}\r\n\r\ninterface State {\r\n  limitLevelList: LimitLevelItem[];\r\n  curLimitIndex: number;\r\n  level: number;\r\n}\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass LimitSetDialog extends Component<Props, object> {\r\n  state: State;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      limitLevelList: [],\r\n      curLimitIndex: 0,\r\n      level: 1\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    this.init(this.props);\r\n  }\r\n  init(props: Props) {\r\n    let level = ((props.store.game.getGameLimitLevelByGameId(props.gameId) || {}).level) || 1;\r\n    let limitItem = props.store.game.getLimitListItemById(props.gameId);\r\n    let limitLevelList: LimitLevelItem[] = limitItem ? limitItem.kqPrizeLimit : [];\r\n    let index = limitLevelList.findIndex((item) => item.level === level);\r\n    this.setState({\r\n      limitLevelList,\r\n      curLimitIndex: index,\r\n      level\r\n    });\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    this.init(nextProps);\r\n  }\r\n  onLimitChoiceHandler = (level: number, index: number) => {\r\n    this.setState({curLimitIndex: index, level});\r\n  }\r\n  onCloseHandler = () => {\r\n    if (this.props.onCloseHandler) {\r\n      this.props.onCloseHandler();\r\n    }\r\n  }\r\n  onConfirmHandler = () => {\r\n    this.props.onLimitChoiceCB(this.state.level);\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"limit-set-dialog\">\r\n         <Modal\r\n          className=\"limit-set-modal\"\r\n          visible={true}\r\n          maskClosable={false}\r\n          title=\"\"\r\n        >\r\n          <header className=\"flex ai-c jc-c limit-set-header\">限红设置{this.props.isShowLimitSetDialogClose && <Icon type=\"cross\" onClick={this.onCloseHandler} />}</header>\r\n          <div className=\"bg-white limit-set-content\">\r\n            <section className=\"flex jc-c limit-list\">\r\n              {this.state.limitLevelList.map((item: LimitLevelItem, i: number) => (\r\n                <Button key={i} className={`flex jc-c ai-c btn-limit-amount ${this.state.curLimitIndex === i ? 'selected' : ''}`} onClick={()=>this.onLimitChoiceHandler(item.level, i)}>{item.minAmt}-{item.maxAmt}</Button>\r\n              ))}\r\n            </section>\r\n            <div><Button className=\"flex jc-c ai-c btn-confirm\" onClick={this.onConfirmHandler}>确定</Button></div>\r\n            <div className=\"limit-explain-tip\">\r\n              <p>限红说明：</p>\r\n              <p>当切换不同的限红模式时，再次投注同一彩种，需至少间隔1期再投注。</p>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LimitSetDialog;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport GameHeader from 'comp/game-header';\r\nimport MethodMenu from 'comp/method-menu';\r\nimport SubMethodMenu from 'comp/sub-method-menu';\r\nimport Play from 'comp/play';\r\nimport OrderBar from 'comp/order-bar';\r\nimport { RouteComponentProps } from \"react-router-dom\";\r\nimport { getGameTypeByGameId } from '../../game/games';\r\nimport calc from '../../game/calc';\r\nimport { getMethodsConfigByType, getMethodPosByGameTypeAndId } from '../../game/gameMethods';\r\nimport { GameMethodMenu, GameSubMethodMenu } from '../../typings/games';\r\nimport methodItems from '../../game/methodItems';\r\nimport APIs from '../../http/APIs';\r\nimport { countRepeat } from '../../utils/game';\r\nimport { GameCommonDataContext } from '../../context/gameContext';\r\nimport Ludan from 'comp/ludan';\r\nimport { getLunDanTabByName, getTabsByType, getLudanTabByTypeAndName } from '../../utils/ludan';\r\nimport LimitSetDialog from 'comp/limit-set-dialog';\r\nimport Socket from '../../socket';\r\nimport Bus from '../../utils/eventBus'\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { ANIMALS_POULTRY, ANIMALS_BEAST } from '../../game/hc6';\r\nimport './index.styl';\r\nimport { getUrlParams } from '../../utils/common';\r\n\r\ninterface IProps {\r\n  store?: any;\r\n  gameType?: string;\r\n}\r\n\r\ninterface State {\r\n  id: number;\r\n  // gameType: string;\r\n  curIssue: string;\r\n  lastIssue: string;\r\n  curTime: number;\r\n  remainTime: number;\r\n  openNumbers: string[];\r\n  curMenuIndex: number; // 玩法菜单选中玩法的index\r\n  curMenuEname: string; // 玩法菜单选中玩法的英语名\r\n  curSubMenuIndex: number;\r\n  subMethods: GameSubMethodMenu[];\r\n  curSubMethod?: GameSubMethodMenu;\r\n  curGameMethodItems: any[];\r\n  odds: any;\r\n  issueList: any[];\r\n  defaultInitMethodItemAmount: number; // 默认初始投注金额\r\n  totalBetCount: number;  // 总注数\r\n  totalBetAmount: number; // 总投注金额\r\n  tabIndex: number; //  \r\n  maxColumns: number;\r\n  maxRows: number;\r\n  defaultMenu?: string;\r\n  // defaultSubMenu?: string;\r\n  isShowLudan: boolean;\r\n  isExpandLudan: boolean;\r\n  isShowLimitSetDialog: boolean;\r\n  limitLevelList: LimitLevelItem[];\r\n  isShowLimitSetDialogClose: boolean; // 是否显示弹出框关闭按钮\r\n}\r\n\r\ninterface DataMethodItem {\r\n  id: string;\r\n  rows: any[];\r\n  repeatCount: number;\r\n  methodTypeName: string;\r\n}\r\n\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\ntype Props = IProps & RouteComponentProps<MatchParams>;\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass Game extends Component<Props, object> {\r\n  id: number = 1;\r\n  gameType: string = 'ssc';\r\n  state: State;\r\n  methodItems: any = methodItems;\r\n  calc: any = calc;\r\n  mysocket?: Socket;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.id = parseInt(this.props.match.params.id || '1', 10);\r\n    this.gameType = getGameTypeByGameId(this.id);\r\n    let menus: GameMethodMenu[] = getMethodsConfigByType(this.gameType);\r\n    let limitItem = props.store.game.getLimitListItemById(this.id);\r\n    let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n    let curMenuIndex = bestLudan && getMethodPosByGameTypeAndId(this.gameType, bestLudan.methodId) || 0;\r\n    let curMenuEname = (menus && menus[curMenuIndex]).ename;\r\n    let ludanTab = getLudanTabByTypeAndName(this.gameType, curMenuEname, bestLudan && bestLudan.codeStyle);\r\n    let ludanMenus = getTabsByType(this.gameType, curMenuEname);\r\n    let gameLimitLevel = this.props.store.game.getGameLimitLevelByGameId(this.id); // 设置的限红数据\r\n    let curSubMenuIndex = this.gameType === LOTTERY_TYPES.HC6 ? -1 : 0;\r\n    this.state = {\r\n      id: 1,\r\n      curIssue: '',\r\n      lastIssue: '',\r\n      curTime: 0,\r\n      remainTime: 0,\r\n      openNumbers: [],\r\n      curMenuIndex,\r\n      curMenuEname,\r\n      curSubMenuIndex,\r\n      subMethods: [],\r\n      curSubMethod: undefined,\r\n      curGameMethodItems: this.getMethodItemsByIds((menus && menus[curMenuIndex].ids) || []),\r\n      odds: {},\r\n      issueList: [],\r\n      defaultInitMethodItemAmount: 0, //this.props.store.game.defaultInitBetAmount,\r\n      totalBetCount: 0,\r\n      totalBetAmount: 0,\r\n      tabIndex: 0,\r\n      maxColumns: 21,\r\n      maxRows: 6,\r\n      defaultMenu: (ludanTab && ludanTab.name) || '',\r\n      isShowLudan: ludanMenus && ludanMenus.length > 0,\r\n      isExpandLudan: false,\r\n      isShowLimitSetDialog: !gameLimitLevel,\r\n      limitLevelList: limitItem ? limitItem.kqPrizeLimit : [],\r\n      isShowLimitSetDialogClose: false\r\n    }\r\n    this.init();\r\n    Bus.emit('gameIdChanged', this.id);\r\n  }\r\n  init() {\r\n    this.getCurIssue(this.id);\r\n    this.getUserPoint(this.id);\r\n    this.getHistoryIssue(this.id);\r\n    // this.getLimitData(this.id);\r\n  }\r\n  getLoginData() {\r\n    let sessionData: any = sessionStorage.getItem('sessionData');\r\n    let agentCode = getUrlParams('agentCode');\r\n    let param = getUrlParams('param');\r\n    let data = {\r\n      agentCode,\r\n      param\r\n    };\r\n    if (!agentCode && !param && sessionData) {\r\n      data = JSON.parse(sessionData);\r\n    }\r\n    return data;\r\n  }\r\n  initSocket() {\r\n    this.mysocket = new Socket({\r\n      url: this.props.store.common.broadcaseWSUrl,\r\n      name: 'gameIndex',\r\n      receive: (data) => {\r\n        if (data.type === 'openWinCode') {\r\n          this.openWinCode(parseInt(data.content[0].lottId, 10), data.content[0]);\r\n        }\r\n        if (data.type === 'betNotify') {\r\n          Bus.emit('__pushBetRemind', data.content)\r\n        }\r\n      },\r\n      open: () => {\r\n        this.mysocket && this.mysocket.send(JSON.stringify(Object.assign({action: 'noauth'}, {})));\r\n      }\r\n    }, true);\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.store.common.broadcaseWSUrl) {\r\n      this.initSocket();\r\n    } else {\r\n      APIs.signIn(this.getLoginData()).then((data: any) => {\r\n        if (data.success > 0) {\r\n          this.props.store.common.setBroadcaseWSUrl(data.broadcaseWSUrl);\r\n          this.initSocket();\r\n        }\r\n      });\r\n    }\r\n    Bus.on('onSetLimit', this.onSetLimit);\r\n  }\r\n  onSetLimit = () => {\r\n    this.setState({isShowLimitSetDialog: !this.state.isShowLimitSetDialog, isShowLimitSetDialogClose: true, limitLevelList: this.props.store.game.getLimitDataOfKqByGameId(this.id) || []});\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    // console.log(this.props.location.pathname, nextProps.location.pathname, '?????')\r\n    this.id = parseInt(nextProps.match.params.id || '1', 10);\r\n    this.gameType = getGameTypeByGameId(this.id);\r\n    Bus.emit('gameIdChanged', this.id);\r\n    if (this.props.match.params.id !== nextProps.match.params.id) {\r\n      let limitItem = this.props.store.game.getLimitListItemById(this.id);\r\n      let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n      let menus: GameMethodMenu[] = getMethodsConfigByType(this.gameType);\r\n      let curMenuIndex = bestLudan && getMethodPosByGameTypeAndId(this.gameType, bestLudan.methodId) || 0;\r\n      let curMenuEname = menus && menus[curMenuIndex].ename\r\n      let ludanTab = getLudanTabByTypeAndName(this.gameType, curMenuEname, bestLudan && bestLudan.codeStyle);\r\n      let ludanMenus = getTabsByType(this.gameType, curMenuEname);\r\n      let gameLimitLevel = this.props.store.game.getGameLimitLevelByGameId(this.id); // 设置的限红数据\r\n      let limitListItem = this.props.store.game.getLimitListItemById(this.id); \r\n      this.setState({\r\n        curMenuIndex,\r\n        curMenuEname,\r\n        curGameMethodItems: this.getMethodItemsByIds((menus && menus[curMenuIndex].ids) || []),\r\n        subMethods: (menus && menus[curMenuIndex].subMethods) || [],\r\n        defaultMenu: (ludanTab && ludanTab.name) || '',\r\n        isShowLudan: ludanMenus && ludanMenus.length > 0,\r\n        isShowLimitSetDialog: !gameLimitLevel,\r\n        limitLevelList: !gameLimitLevel ? (limitListItem ? limitListItem.kqPrizeLimit : []) : []\r\n      });\r\n      this.init();\r\n    }\r\n  }\r\n  openWinCode(id: number, openHistoryItem: any) {\r\n    if (id === this.id) {\r\n      let issueList = this.state.issueList;\r\n      issueList.unshift(openHistoryItem);\r\n      this.setState({\r\n        lastIssue: issueList[0].issue,\r\n        openNumbers: issueList[0].code.split(','),\r\n        issueList: issueList\r\n      });\r\n      this.getCurIssue(this.id);\r\n    }\r\n  }\r\n  // 获取当前玩法下面的子玩法列表\r\n  getMethodItemsByIds(ids: string[]) {\r\n    let mItems: any[] = [];\r\n    ids.forEach((id: string) => {\r\n      let items =  this.methodItems[id]();\r\n      items.rows = items.rows.map((row: any) => {\r\n        row.vs.map((vs: any) => {\r\n          if (typeof vs === 'object') {\r\n            vs.val = '';\r\n          }\r\n          return vs;\r\n        });\r\n        return row;\r\n      })\r\n      mItems.push(Object.assign({id}, items));\r\n    });\r\n    return mItems;\r\n  }\r\n\r\n  // 更新玩法菜单选中的index\r\n  updateMethodMenuIndex = (index: number) => {\r\n    this.setState({curMenuIndex: index});\r\n  }\r\n  // 更新玩法菜单选中的index\r\n  updateSubMethodMenuIndex = (index: number) => {\r\n    this.setState({curSubMenuIndex: index});\r\n  }\r\n  methodMenuChangedCB = (method: GameMethodMenu) => {\r\n    let curGameMethodItems = this.getMethodItemsByIds(method.ids || []);\r\n    let ludanMenus = getTabsByType(this.gameType, method.ename);\r\n    let limitItem = this.props.store.game.getLimitListItemById(this.id);\r\n    let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n    let ludanTab = getLudanTabByTypeAndName(this.gameType, method.ename, bestLudan && bestLudan.codeStyle);\r\n    let curSubMenuIndex = this.gameType === LOTTERY_TYPES.HC6 ? -1 : 0;\r\n    this.setState({\r\n      subMethods: method.subMethods || [],\r\n      curGameMethodItems,\r\n      totalBetCount: 0,\r\n      totalBetAmount: 0,\r\n      curSubMenuIndex,\r\n      curMenuEname: method.ename,\r\n      defaultMenu: (ludanTab && ludanTab.name) || '',\r\n      // defaultSubMenu: '',\r\n      isShowLudan: ludanMenus && ludanMenus.length > 0\r\n    }, this.updateOddsOfMethod);\r\n  }\r\n  updateSubMethods = (method: GameSubMethodMenu) => {\r\n    let curGameMethodItems;\r\n    if (this.gameType === LOTTERY_TYPES.HC6) {\r\n      curGameMethodItems = this.state.curGameMethodItems;\r\n      if (this.state.curMenuEname === 'texiao') {\r\n        curGameMethodItems = this.updateHC6TexiaoMethodItems(curGameMethodItems, method.v)\r\n      }\r\n    } else {\r\n      curGameMethodItems = this.getMethodItemsByIds(method.ids || []);\r\n    }\r\n    this.setState({\r\n      curSubMethod: method,\r\n      curGameMethodItems\r\n    }, this.calcBet);\r\n  }\r\n  // 更新选中的玩法项数据\r\n  updateMethodItem = (i: number, j: number, k: number, selected?: boolean | undefined, value?: string | undefined) => {\r\n    let methodItems = this.state.curGameMethodItems;\r\n    if (selected !== undefined) {\r\n      methodItems[i].rows[j].vs[k].s = selected;\r\n    }\r\n    if (value !== undefined) {\r\n      methodItems[i].rows[j].vs[k].amt = value;\r\n    }\r\n    this.setState({\r\n      curGameMethodItems: methodItems\r\n    }, this.calcBet);\r\n  }\r\n  updateMethodRow = (i: number, j: number, selected?: boolean | undefined) => {\r\n    let methodItems = this.state.curGameMethodItems;\r\n    if (selected !== undefined) {\r\n      methodItems[i].rows[j].s = selected;\r\n    }\r\n    this.setState({\r\n      curGameMethodItems: methodItems\r\n    }, this.calcBet);\r\n  }\r\n  // 更新当前游戏当前玩法相关的odd\r\n  updateOddsOfMethod(odds?: any) {\r\n    if (!odds) {\r\n      this.getUserPoint(this.id);\r\n      return null;\r\n    }\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n    let methodId: string = '';\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        methodId = methodItem.id.split(':')[0];\r\n        row.vs = row.vs.map((vsItem: any) => {\r\n          if (typeof vsItem === 'object') {\r\n            if (odds[methodId] && odds[methodId][vsItem.oddIndex || 0]) {\r\n              vsItem.odd = odds[methodId][vsItem.oddIndex || 0].maxprize;\r\n            }\r\n          }\r\n          return vsItem;\r\n        });\r\n        if (row.posOdd) {\r\n          row.odd =  odds[methodId][row.oddIndex || 0].maxprize;\r\n        }\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n    this.setState({curGameMethodItems});\r\n  }\r\n\r\n  // 更新默认初始下注金额\r\n  updateDefaultInitMethodItemAmount = (amount: number): void => {\r\n    this.setState({defaultInitMethodItemAmount: amount}, this.calcBet);\r\n  }\r\n  calcBet() {\r\n    let methodList: DataMethodItem[] = [];\r\n    let method: any;\r\n    let betCount: number = 0;\r\n    let totalAmount: number = 0;\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n\r\n    // 构造选择的号码集合，金额集合, 总金额\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        row.nc = [];\r\n        row.amtc = [];\r\n        row.tmc = 0;\r\n        row.vs.forEach((vsItem: any) => {\r\n          if (typeof vsItem === 'object') {\r\n            if (vsItem.s) {\r\n              row.nc.push(vsItem.n);\r\n              row.amtc.push(vsItem.amt);\r\n              row.tmc += parseInt(vsItem.amt || '0', 10);\r\n            }\r\n          }\r\n        });\r\n        totalAmount += row.tmc;\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n\r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      method = {id: gameMethodItem.id, methodTypeName: gameMethodItem.methodTypeName, rows: [], repeatCount: 0};\r\n      gameMethodItem.rows.forEach((row: any) => {\r\n        method.rows.push(row.nc.slice(0));\r\n      });\r\n      methodList.push(method);\r\n    });\r\n\r\n    // 计算重复数\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (['zx_q2', 'zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        gameMethodItem.repeatCount = countRepeat(methodList.map((methodItem: DataMethodItem) => methodItem.id === gameMethodItem.id ? methodItem.rows : []));\r\n      }\r\n    });\r\n    \r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (!['zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        methodList = methodList.map((methodItem: DataMethodItem) => {\r\n          if (gameMethodItem.id === methodItem.id) {\r\n            methodItem.rows = methodItem.rows.map((row: any) => row.length);\r\n          }\r\n          methodItem.repeatCount = gameMethodItem.repeatCount;\r\n          return methodItem;\r\n        });\r\n      }\r\n    });\r\n\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      // if (['texiao'].includes(gameMethodItem.methodTypeName)) {\r\n      if (gameMethodItem.calcMode === 'row') {  \r\n        methodList = [];\r\n        method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n        gameMethodItem.rows.forEach((row: any) => {\r\n          if (row.s) {\r\n            method.rows.push(row.n || row.pv);\r\n          }\r\n        });\r\n        method.rows = [method.rows.length];\r\n        methodList.push(method);\r\n      }\r\n    });\r\n\r\n    // 计算总注数\r\n    methodList.forEach((methodItem: DataMethodItem) => {\r\n      betCount += this.calc[methodItem.id]({nsl: methodItem.rows, ns: methodItem.rows, repeatCount: methodItem.repeatCount});\r\n      // 任选，组选，直选金额计算\r\n      if (['rx_nzn', 'zux_q2', 'zux_q3', 'zx_q2', 'zx_q3'].includes(methodItem.methodTypeName)) {\r\n        totalAmount = betCount * this.state.defaultInitMethodItemAmount;\r\n      }\r\n    });\r\n\r\n    this.setState({totalBetCount: betCount, totalBetAmount: totalAmount});\r\n  }\r\n  // 重置所有选中玩法项\r\n  resetSelectedOfAllMethodItem = () => {\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        row.s = false;\r\n        row.vs = row.vs.map((vsItem: any) => { \r\n          if (typeof vsItem === 'object') {\r\n            vsItem.s = false; vsItem.amt = ''; return vsItem; \r\n          }\r\n        });\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n    this.setState({curGameMethodItems, totalBetCount: 0, totalBetAmount: 0});\r\n  }\r\n  orderFinishCB = (status: boolean) => {\r\n    if (status) {\r\n      this.resetSelectedOfAllMethodItem();\r\n    }\r\n  }\r\n  getCurIssue = (gameid: number) => {\r\n    APIs.curIssue({gameid}).then((data: any) => {\r\n      if (data.success > 0) {\r\n        this.setState({\r\n          curIssue: data.issue,\r\n          curTime: data.current,\r\n          remainTime: Math.floor((data.saleend - data.current) / 1000) || (this.state.remainTime + 0.05)\r\n        })\r\n      } else {\r\n        this.setState({curIssue: ''});\r\n      }\r\n    });\r\n  }\r\n  getHistoryIssue(gameid: number) {\r\n    APIs.historyIssue({gameid}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        if (data.items.length > 0) {\r\n          this.setState({\r\n            lastIssue: data.items[0].issue,\r\n            openNumbers: data.items[0].code.split(','),\r\n            issueList: data.items\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  getUserPoint(gameid: number) {\r\n    APIs.myNewPoint({gameid}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        this.setState({odds: data.items})\r\n        this.updateOddsOfMethod(data.items);\r\n      }\r\n    });\r\n  }\r\n\r\n  changeTabIndex = (idx: number) => {\r\n    this.setState({\r\n      tabIndex: idx\r\n    })\r\n  }\r\n\r\n  getLimitData(id: number) {\r\n    APIs.lottSets({lotteryIds: id, v: 1}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        this.props.store.game.setLimitList([Object.assign({id}, data.data[id])]);\r\n        this.props.store.game.setLimitLevelList(data.data[id].kqPrizeLimit);\r\n      }\r\n    });\r\n  }\r\n  onLimitChoiceCB = (level: number) => {\r\n    this.props.store.game.updateGamesLimitLevel({gameId: this.id, level});\r\n    this.onCloseLimitChoiceHandler();\r\n  }\r\n  onCloseLimitChoiceHandler = () => {\r\n    this.setState({isShowLimitSetDialog: false});\r\n  }\r\n  componentWillUnmount() {\r\n    this.mysocket && this.mysocket.removeListen();\r\n    Bus.off('onSetLimit', this.onSetLimit);\r\n  }\r\n  onGameHeaderUpdateHandler = (data: any) => {\r\n    if (data.type === 'ludan') {\r\n      this.setState({isExpandLudan: data.data});\r\n    }\r\n  }\r\n  updateHC6TexiaoMethodItems(methodItems: any, subMethodMenuValue: string = '') {\r\n    const animals = subMethodMenuValue === '1' ? ANIMALS_POULTRY : ANIMALS_BEAST;\r\n    methodItems = methodItems.map((method: any) => {\r\n      method.rows = method.rows.map((row: any) => {\r\n        row.s = animals.includes(row.n);\r\n        return row;\r\n      })\r\n      return method;\r\n    });\r\n    return methodItems;\r\n  }\r\n  render() {\r\n    return (\r\n      <article className=\"game-view\">\r\n        <GameCommonDataContext.Provider value={{gameId: this.id, gameType: this.gameType}} >\r\n          <GameHeader \r\n            gameId={this.id}\r\n            gameType={this.gameType}\r\n            curIssue={this.state.curIssue}\r\n            lastIssue={this.state.lastIssue}\r\n            curTime={this.state.curTime}\r\n            remainTime={this.state.remainTime}\r\n            openNumbers={this.state.openNumbers}\r\n            getNewestIssue={this.getCurIssue}\r\n            isExpandLudan={this.state.isExpandLudan}\r\n            update={this.onGameHeaderUpdateHandler}\r\n          />\r\n          {this.state.isShowLudan && this.state.isExpandLudan &&\r\n            <Ludan \r\n              gameId={this.id} \r\n              gameType={this.gameType} \r\n              maxColumns={this.state.maxColumns} \r\n              maxRows={this.state.maxRows} \r\n              issueList={this.state.issueList.slice(0).reverse()} \r\n              methodMenuName={this.state.curMenuEname} \r\n              defaultMenu={this.state.defaultMenu} \r\n            />\r\n          }\r\n          <section className=\"game-main\">\r\n            <MethodMenu gameType={this.gameType} curMenuIndex={this.state.curMenuIndex} methodMenuChangedCB={this.methodMenuChangedCB} updateMethodMenuIndex={this.updateMethodMenuIndex}/>\r\n            {this.state.subMethods.length > 0 && \r\n              <SubMethodMenu \r\n                gameType={this.gameType} \r\n                curSubMenuIndex={this.state.curSubMenuIndex} \r\n                subMethods={this.state.subMethods} \r\n                odds={this.state.odds} \r\n                updateSubMethods={this.updateSubMethods} \r\n                updateSubMethodMenuIndex={this.updateSubMethodMenuIndex}\r\n              />\r\n            }\r\n            <Play \r\n              curGameMethodItems={this.state.curGameMethodItems} \r\n              gameType={this.gameType} \r\n              defaultInitMethodItemAmount={this.state.defaultInitMethodItemAmount}\r\n              updateMethodItem={this.updateMethodItem} \r\n              updateMethodRow={this.updateMethodRow}\r\n              curSubMethod={this.state.curSubMethod}\r\n            />\r\n            <OrderBar \r\n              gameId={this.id} \r\n              gameType={this.gameType} \r\n              curIssue={this.state.curIssue} \r\n              betCount={this.state.totalBetCount} \r\n              amount={this.state.totalBetAmount} \r\n              curGameMethodItems={this.state.curGameMethodItems} \r\n              defaultInitMethodItemAmount={this.state.defaultInitMethodItemAmount}\r\n              updateDefaultInitMethodItemAmount={this.updateDefaultInitMethodItemAmount} \r\n              orderFinishCB={this.orderFinishCB}\r\n              resetSelectedOfAllMethodItem={this.resetSelectedOfAllMethodItem}\r\n            />\r\n           \r\n          </section>\r\n        </GameCommonDataContext.Provider>\r\n        {this.state.isShowLimitSetDialog && this.props.store.game.limitList && this.props.store.game.limitList.length > 0 &&\r\n          <LimitSetDialog \r\n            isShow={this.state.isShowLimitSetDialog} \r\n            isShowLimitSetDialogClose={this.state.isShowLimitSetDialogClose} \r\n            gameId={this.id} \r\n            limitLevelList={this.state.limitLevelList} \r\n            onLimitChoiceCB={this.onLimitChoiceCB} \r\n            onCloseHandler={this.onCloseLimitChoiceHandler} \r\n          />\r\n        }\r\n      </article>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;\r\n"],"sourceRoot":""}