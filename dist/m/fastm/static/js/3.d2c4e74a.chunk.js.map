{"version":3,"sources":["utils/timer.ts","components/ludan/LudanMenu.tsx","components/ludan/index.tsx","components/game-header/index.tsx","game/gameMethods.ts","components/method-menu/index.tsx","components/sub-method-menu/index.tsx","components/grid/row.tsx","components/grid/col.tsx","components/play/index.tsx","game/base.ts","game/calc.ts","utils/game.ts","components/order-bar/index.tsx","context/gameContext.ts","components/limit-set-dialog/index.tsx","views/game/index.tsx"],"names":["Timer","time","fn","step","timerItval","this","start","window","setInterval","clearInterval","LundanMenu","inject","observer","props","myScrollRef","changeMenu","menu","updateMenu","React","createRef","Bus","emit","selectedMenu","document","querySelector","current","bscroll","scrollToElement","nextProps","refresh","selectedItem","className","ref","tabs","length","map","i","key","name","onClick","title","Component","Ludan","state","setState","updateLudanList","ludanList","getLuDanListByMethod","issueList","slice","gameType","maxRows","maxColumns","getAllTabsByTypeAndName","methodMenuName","defaultMenu","isShowLudanMenu","LudanMenu","LundanTable","isScroll","GameHeader","curIssue","curTime","onLimitLevelChanged","value","store","game","updateGamesLimitLevel","gameId","level","parseInt","curGameLimitLevel","onLudanHandler","update","type","data","isExpandLudan","limitItem","getLimitListItemById","getGameLimitLevelByGameId","timer","remainTime","hours","minutes","seconds","limitLevelList","kqPrizeLimit","tipText","initTimer","stateData","timeStr","times","close","Math","floor","t","getNewestIssue","timeFormat","split","clearTimer","LOTTERY_TYPES","HC6","num","isHc6","String","padStart","getAnimalByNum","lastIssue","openNumbers","Fragment","renderOpenNumbers","hz","params","Object","assign","dx","ds","lh","methodsConfig","SSC","ename","recentType","min","ids","range","end","G11X5","subMethods","s","v","oddIndex","class","mid","odd","recentChild","PK10","changeTitle","K3","noOdd","getMethodsConfigByType","getMethodPosByGameTypeAndId","methodId","findIndex","m","find","id","MethodMenu","onMenuHandler","index","updateMethodMenuIndex","methodMenuChangedCB","menus","subMenus","nextState","curMenuIndex","SubMethodMenu","methodItems","onSubMethodHandler","subMethod","console","log","JSON","stringify","updateSubMethods","updateSubMethodMenuIndex","methodOdds","odds","parseId","maxprize","sm","curSubMenuIndex","bind","getOddById","Row","children","PureComponent","Col","styl","gutter","padding","span","style","getStyle","Play","onMethodItemHandler","j","k","selected","methodTypeName","event","amount","defaultInitMethodItemAmount","includes","updateMethodItem","onRowClickHandler","updateMethodRow","forceUpdate","curGameMethodItems","methodItem","layout","rows","row","col","hidePos","n","subpn","posOdd","vs","vsItem","e","icons","iconNum","noodd","C","ceil","factorial","permutationChoice","A","nsl","forEach","nl","repeatCount","P","ns","f","countRepeat","temp","join","filter","Array","from","Set","ORDER_BAR_CONTAINER_CLASS","CALC_BET_NEED_COMPUTED_REPEAT","OrderBar","calc","orderBarContainer","coinChoosed","user","balance","updateDefaultInitMethodItemAmount","onResetHandler","alert","text","onPress","resetSelectedOfAllMethodItem","onOrderHandler","showCoinSet","order","onFocusHandler","onAmountChanged","target","trim","eType","test","onBlurHandler","createElement","issue","betList","totMoney","fail","validateLimit","lotteryId","limitLevel","errorMsg","items","totalmoney","gameid","limit","getLimitLevelData","minAmt","maxAmt","totProjs","isusefree","isFastBet","pos","val","content","betCount","calcBet","nc","push","projs","money","contents","param","nonasv","p","pv","totalnums","trace","isJoinPool","totalCount","calcMode","methodid","codes","count","mode","userpoint","method","methodList","gameMethodItem","loading","betData","setTimeout","hide","APIs","then","success","msg","resetAmount","updateBalance","orderFinishCB","catch","body","appendChild","removeChild","elements","onChange","onBlur","onFocus","maxLength","placeholder","disabled","ReactDOM","createPortal","GameCommonDataContext","createContext","LimitSetDialog","onLimitChoiceHandler","curLimitIndex","onCloseHandler","onConfirmHandler","onLimitChoiceCB","init","item","visible","maskClosable","isShowLimitSetDialogClose","Game","mysocket","onSetLimit","isShowLimitSetDialog","getLimitDataOfKqByGameId","getMethodItemsByIds","ludanMenus","getTabsByType","bestLudan","ludanTab","getLudanTabByTypeAndName","codeStyle","totalBetCount","totalBetAmount","curMenuEname","isShowLudan","updateOddsOfMethod","updateHC6TexiaoMethodItems","curSubMethod","undefined","amt","status","getCurIssue","saleend","changeTabIndex","idx","tabIndex","onCloseLimitChoiceHandler","onGameHeaderUpdateHandler","match","getGameTypeByGameId","gameLimitLevel","getUserPoint","getHistoryIssue","sessionData","sessionStorage","getItem","agentCode","getUrlParams","parse","Socket","url","common","broadcaseWSUrl","receive","openWinCode","lottId","open","send","action","initSocket","signIn","getLoginData","setBroadcaseWSUrl","on","limitListItem","openHistoryItem","unshift","code","mItems","totalAmount","amtc","tmc","historyIssue","myNewPoint","lottSets","lotteryIds","setLimitList","setLimitLevelList","removeListen","off","subMethodMenuValue","animals","ANIMALS_POULTRY","ANIMALS_BEAST","Provider","reverse","limitList","isShow"],"mappings":"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","file":"m/fastm/static/js/3.d2c4e74a.chunk.js","sourcesContent":["class Timer {\r\n  private timerItval: number = 0;\r\n  private fn: any;\r\n  /**\r\n   * 定时器\r\n   * @param {*} time  时间\r\n   * @param {*} fn    回调函数\r\n   * @param {*} step\r\n   */\r\n  constructor(time: number, fn: any, step?: number) {\r\n    this.fn = fn;\r\n    this.start(time, fn, step);\r\n  }\r\n  private start(time: number, fn: any, step: number = 1000): void {\r\n    this.timerItval = window.setInterval(() => {\r\n      if (time <= 0) {\r\n        clearInterval(this.timerItval);\r\n        fn(0, true);\r\n        return;\r\n      }\r\n      fn(time, false);\r\n      time--;\r\n    }, step);\r\n  }\r\n  public close(): void {\r\n    clearInterval(this.timerItval);\r\n    // this.fn(0, true);\r\n  }\r\n}\r\n\r\nexport default Timer;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport Bus from '../../utils/eventBus';\r\nimport MyScroll from '../my-scroll';\r\nimport './ludanMenu.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  tabs: any[];\r\n  selectedMenu?: string;\r\n  selectedSubMenu?: string;\r\n  updateMenu(menuName: any): void;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass LundanMenu extends Component<Props, object> {\r\n  myScrollRef: any;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.myScrollRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    Bus.emit('ludanSelectMenuChange', this.props.selectedMenu);\r\n    let selectedItem = document.querySelector('.ludan-menu-view .menu-item.selected');\r\n    selectedItem && this.myScrollRef.current.bscroll.scrollToElement('.menu-item.selected');\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    if (this.props.selectedMenu !== nextProps.selectedMenu) {\r\n      Bus.emit('ludanSelectMenuChange', nextProps.selectedMenu)\r\n    }\r\n    this.myScrollRef.current.refresh();\r\n    let selectedItem = document.querySelector('.ludan-menu-view .menu-item.selected');\r\n    this.myScrollRef.current.bscroll && selectedItem && this.myScrollRef.current.bscroll.scrollToElement(selectedItem, 150, true);\r\n  }\r\n  changeMenu = (menu: any) => {\r\n    this.props.updateMenu(menu);\r\n    // Bus.emit('ludanSelectMenuChange', menu.name);\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"ludan-menu-view\">\r\n        <MyScroll ref={this.myScrollRef}>\r\n          <nav className=\"menu\">\r\n            {this.props.tabs && this.props.tabs.length > 0 && this.props.tabs.map((menu: any, i: number) => (\r\n              <div key={i} className={`menu-item ${this.props.selectedMenu === menu.name ? 'selected' : ''}`} onClick={() => this.changeMenu(menu)}>{menu.title}</div>\r\n            ))}\r\n          </nav>\r\n        </MyScroll>\r\n      </section>  \r\n    )\r\n  }\r\n}\r\n\r\nexport default LundanMenu;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { getLuDanListByMethod, getTabsByType, getAllTabsByTypeAndName } from '../../utils/ludan';\r\nimport LudanMenu from './LudanMenu';\r\nimport LundanTable from './LundanTable';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  gameId: number;\r\n  methodMenuName: string;\r\n  maxColumns: number;\r\n  maxRows: number;\r\n  issueList: any[];\r\n  defaultMenu?: string;\r\n  isShowLudanMenu?: boolean;\r\n  isScroll?: boolean;\r\n}\r\n\r\ninterface State {\r\n  tabs: any[];\r\n  selectedMenu?: string;\r\n  ludanList: any[];\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass Ludan extends Component<Props, object> {\r\n  state: State;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    let tabs = getAllTabsByTypeAndName(this.props.gameType, this.props.methodMenuName);\r\n    // ssc -> 整合 -> 万位大小\r\n    let selectedMenu = this.props.defaultMenu || (tabs.length > 0 ? tabs[0].name : '');\r\n    let ludanList = getLuDanListByMethod(this.props.issueList.slice(0), this.props.gameType,  selectedMenu || '', this.props.maxRows, this.props.maxColumns - 1) || []\r\n    this.state = {\r\n      selectedMenu,\r\n      ludanList,\r\n      tabs\r\n    }\r\n  }\r\n  updateMenu = (menu: any) => {\r\n    this.setState({\r\n      selectedMenu: menu.name,\r\n    }, this.updateLudanList);\r\n  }\r\n  updateLudanList = () => {\r\n    this.setState({\r\n      ludanList: getLuDanListByMethod(this.props.issueList.slice(0), this.props.gameType, this.state.selectedMenu || '', this.props.maxRows, this.props.maxColumns) || []\r\n    });\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n      let tabs = getAllTabsByTypeAndName(this.props.gameType, this.props.methodMenuName);\r\n      let selectedMenu = nextProps.defaultMenu || (tabs.length > 0 ? tabs[0].name : '');\r\n      let ludanList = getLuDanListByMethod(nextProps.issueList.slice(0), nextProps.gameType,  this.state.selectedMenu || '', nextProps.maxRows, nextProps.maxColumns) || []\r\n      this.setState({\r\n        selectedMenu,\r\n        ludanList,\r\n        tabs\r\n      });\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"ludan-view\">\r\n        {this.props.isShowLudanMenu !== false && <LudanMenu selectedMenu={this.state.selectedMenu} tabs={this.state.tabs} updateMenu={this.updateMenu} />}\r\n        <LundanTable maxColumns={this.props.maxColumns} maxRows={this.props.maxRows} ludanList={this.state.ludanList} isScroll={this.props.isScroll} />\r\n      </section>  \r\n    )\r\n  }\r\n}\r\n\r\nexport default Ludan;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport Timer from '../../utils/timer';\r\nimport { timeFormat } from '../../utils/date';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { getAnimalByNum } from '../../game/hc6';\r\n\r\nimport './index.styl';\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  gameId: number;\r\n  curIssue?: string;\r\n  lastIssue?: string;\r\n  curTime?: number;\r\n  remainTime: number;\r\n  openNumbers: string[];\r\n  isExpandLudan: boolean;\r\n  getNewestIssue(gameid: number): void;\r\n  update(data: any): void;\r\n}\r\n\r\ninterface State {\r\n  timer: any;\r\n  remainTime: number;\r\n  hours: string;\r\n  minutes: string;\r\n  seconds: string;\r\n  limitLevelList: LimitLevelItem[];\r\n  curGameLimitLevel: number;\r\n  tipText: string;\r\n}\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass GameHeader extends Component<Props, object> {\r\n  state: State;\r\n  curIssue?: string;\r\n  curTime?: number;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    let limitItem = props.store.game.getLimitListItemById(props.gameId);\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    this.curIssue = props.curIssue;\r\n    this.curTime = props.curTime;\r\n    this.state = {\r\n      timer: null,\r\n      remainTime: this.props.remainTime,\r\n      hours: '00',\r\n      minutes: '00',\r\n      seconds: '00',\r\n      limitLevelList: (limitItem && limitItem.kqPrizeLimit) || [],\r\n      curGameLimitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1,\r\n      tipText: '第一次进入需选择限红；再次进入不需要选择限红；除非该游戏限红与之前游戏限红不同。当切换不同的限红模式时，再次投注同一彩种，需至少间隔1期再投注。'\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.initTimer(this.props.remainTime);\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    let limitItem = nextProps.store.game.getLimitListItemById(nextProps.gameId);\r\n    let curGameLimitLevel = nextProps.store.game.getGameLimitLevelByGameId(nextProps.gameId);\r\n    let stateData: any = {\r\n      limitLevelList: (limitItem && limitItem.kqPrizeLimit) || [],\r\n      curGameLimitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    }\r\n    if (this.curIssue !== nextProps.curIssue || this.curTime !== nextProps.curTime) {\r\n      this.curIssue = nextProps.curIssue;\r\n      this.curTime = nextProps.curTime;\r\n      stateData.remainTime = nextProps.remainTime;\r\n      this.initTimer(nextProps.remainTime);\r\n    }\r\n    this.setState(stateData);\r\n  }\r\n  initTimer(remainTime: number) {\r\n    if (remainTime <= 0) return;\r\n    let timer = this.state.timer;\r\n    let timeStr: string = '';\r\n    let times: string[] = [];\r\n    if (timer && timer.close) {\r\n      timer.close();\r\n      timer = null;\r\n    }\r\n    timer = new Timer(Math.floor(remainTime), (t: number): void => {\r\n      if (t <= 0) {\r\n        this.props.getNewestIssue(this.props.gameId);\r\n      }\r\n      timeStr = timeFormat(t * 1000);\r\n      times = timeStr.split(':');\r\n      this.setState({hours: times[0], minutes: times[1], seconds: times[2]});\r\n    });\r\n    this.setState({timer});\r\n  }\r\n  onLimitLevelChanged = (value: any) => {\r\n    this.props.store.game.updateGamesLimitLevel({gameId: this.props.gameId, level: parseInt(value, 10)});\r\n    this.setState({\r\n      curGameLimitLevel: parseInt(value, 10)\r\n    });\r\n  }\r\n  onLudanHandler = () => {\r\n    this.props.update({type: 'ludan', data: !this.props.isExpandLudan})\r\n  }\r\n  clearTimer(): void {\r\n    if (this.state.timer && this.state.timer.close) {\r\n      this.state.timer.close();\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.clearTimer();\r\n  }\r\n  isHc6() {\r\n    return this.props.gameType === LOTTERY_TYPES.HC6;\r\n  }\r\n  renderOpenNumbers(num: string, i: number) {\r\n    if (this.isHc6()) {\r\n      if (i === 5) {\r\n        return (<div key={i} className={`icon-plus`}>+</div>)\r\n      }\r\n      return (<div><div key={i} className={`open-num-item n-${String(num).padStart(2, '0')}`}>{String(num).padStart(2, '0')}</div><div className=\"animal\">{getAnimalByNum(parseInt(num, 10))}</div></div>)\r\n    } else {\r\n      return <div key={i} className=\"open-num-item\">{num}</div> \r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <section className={`game-header-view ${this.props.gameType}`}>\r\n        <section className=\"flex ai-c last-issue-sec\">\r\n          <div>第{this.props.lastIssue}期：</div>\r\n          <div className=\"nums-wp\">\r\n            {this.props.openNumbers.map((num: string, i: number) => (\r\n              <React.Fragment  key={i}>{this.renderOpenNumbers(num, i)}</React.Fragment>\r\n            ))}\r\n          </div>\r\n        </section>\r\n        <section className=\"flex ai-c jc-sb cur-issue-sec\">\r\n          <div className=\"flex ai-c\">\r\n            <div className=\"txt-r cur-issue-wp\">距{this.props.curIssue}期截止:</div>\r\n            <div className=\"time-wp flex ai-c jc-c\">\r\n              <span className=\"hour-wp\">{this.state.hours}</span>\r\n              <span className=\"colon\">:</span>\r\n              <span className=\"minute-wp\">{this.state.minutes}</span>\r\n              <span className=\"colon\">:</span>\r\n              <span className=\"second-wp\">{this.state.seconds}</span>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex ai-c\" onClick={this.onLudanHandler}>路单走势<span className={`icon-triangle ${this.props.isExpandLudan ? 'up' : 'down'}`}></span></div>\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GameHeader;\r\n","\r\nimport { LOTTERY_TYPES } from '../utils/config';\r\nimport { MethodsConfig } from '../typings/game-methods';\r\nimport { GameMethodMenu } from '../typings/games';\r\n\r\n// 近期开奖配置\r\nconst hz = (params = {}) => {\r\n  return Object.assign({\r\n    title: '和值',\r\n    type: 'hz'\r\n  }, params)\r\n}\r\n\r\nconst dx = (params = {}) => {\r\n  return Object.assign({\r\n    title: '大小',\r\n    type: 'dx'\r\n  }, params)\r\n}\r\n\r\nconst ds = {\r\n  title: '单双',\r\n  type: 'ds'\r\n}\r\n\r\nconst kd = {\r\n  title: '跨度',\r\n  type: 'kd'\r\n}\r\n\r\nconst color = {\r\n  title: '颜色',\r\n  type: 'ys'\r\n}\r\n\r\nconst lh = (params: any) => {\r\n  return Object.assign({\r\n    title: '龙虎',\r\n    type: 'lh'\r\n  }, params)\r\n}\r\n\r\n// 玩法配置\r\nexport let methodsConfig: MethodsConfig = {\r\n  [LOTTERY_TYPES.SSC]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({min: 22})],\r\n      ids: ['1251:1', '1250:1', '1274:1', '1275:1', '1276:1']\r\n    },\r\n    {\r\n      name: '定位',\r\n      ename: 'dw',\r\n      recentType: [dx({min: 4}), ds],\r\n      ids: ['1253:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lhh',\r\n      recentType: [lh({title: '万千', range: {start: 0, end: 2}})],\r\n      ids: ['1273:1']\r\n    },\r\n    {\r\n      name: '一字组合',\r\n      ename: 'yzzh',\r\n      recentType: [dx({min: 4}), ds],\r\n      ids: ['1256:1', '1257:1', '1258:1', '1259:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.G11X5]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({min: 22})],\r\n      ids: ['2050:1', '2050:2', '2053:2', '2051:1']\r\n    },\r\n    {\r\n      name: '定位',\r\n      ename: 'dw',\r\n      recentType: [dx({min: 4})],\r\n      ids: ['2052:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lh',\r\n      recentType: [lh({name: '一位VS二位', range: {start: 0, end: 2}})],\r\n      ids: ['2053:1']\r\n    },\r\n    {\r\n      name: '任选',\r\n      ename: 'rx',\r\n      recentType: [dx({min: 4})],\r\n      ids: ['2054:1:1'],\r\n      subMethods: [\r\n        {s: true, name: '一中一', v: '1z1', oddIndex: 7, class: '', mid: '2054', odd: '', ids: ['2054:1:1']},\r\n        {s: false, name: '二中二', v: '2z2', oddIndex: 6, class: '', mid: '2054', odd: '', ids: ['2054:1:2']},\r\n        {s: false, name: '三中三', v: '3z3', oddIndex: 4, class: '', mid: '2054', odd: '', ids: ['2054:1:3']},\r\n        {s: false, name: '四中四', v: '4z4', oddIndex: 2, class: '', mid: '2054', odd: '', ids: ['2054:1:4']},\r\n        {s: false, name: '五中五', v: '5z5', oddIndex: 0, class: '', mid: '2054', odd: '', ids: ['2054:1:5']},\r\n        {s: false, name: '六中五', v: '6z5', oddIndex: 1, class: '', mid: '2054', odd: '', ids: ['2054:1:6']},\r\n        {s: false, name: '七中五', v: '7z5', oddIndex: 3, class: '', mid: '2054', odd: '', ids: ['2054:1:7']},\r\n        {s: false, name: '八中五', v: '8z5', oddIndex: 5, class: 'no-bd-r', mid: '2054', odd: '', ids: ['2054:1:8']}\r\n      ]\r\n    },\r\n    {\r\n      name: '组选',\r\n      ename: 'zux',\r\n      ids: ['2055:1', '2056:1'],\r\n      recentChild: true,\r\n      // subMethods: [\r\n      //   {s: true, name: '前二组选', recentType: [hz({title: '前二和值', nForm: true, range: {start: 0, end: 2}})], oddIndex: 0, class: 'layout-lr w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2055', odd: '', ids: ['2055:1']},\r\n      //   {s: false, name: '前三组选', recentType: [hz({title: '前三和值', nForm: true,range: {start: 0, end: 3}})], oddIndex: 0, class: 'layout-lr  w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2056', odd: '', ids: ['2056:1']}\r\n      // ]\r\n    },\r\n    {\r\n      name: '直选',\r\n      ename: 'zx',\r\n      ids: ['2057:1', '2058:1'],\r\n      recentChild: true,\r\n      // subMethods: [\r\n      //   {s: true, name: '前二直选', recentType: [hz({title: '前二和值', nForm: true, range: {start: 0, end: 2}})], oddIndex: 0, class: 'layout-lr w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2057', odd: '', ids: ['2057:1']},\r\n      //   {s: false, name: '前三直选', recentType: [hz({title: '前三和值', nForm: true, range: {start: 0, end: 3}})], oddIndex: 0, class: 'layout-lr  w180 h40 flex ai-c jc-c odd-pd-l-5', mid: '2058', odd: '', ids: ['2058:1']}\r\n      // ]\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.PK10]: [\r\n    {\r\n      name: '整合',\r\n      ename: 'zhenghe',\r\n      recentType: [hz({range: [{start: 0, end: 1}, {start: 1, end: 2}], changeTitle: ['冠亚开奖号码'], min: 11})],\r\n      ids: ['4053:1', '4053:2', '4050:1']\r\n    },\r\n    {\r\n      name: '龙虎',\r\n      ename: 'lh',\r\n      recentType: [lh({name: '龙虎', changeTitle: ['冠军', '第十名'], range: [{start: 0, end: 1}, {start: 1, end: 2}]})],\r\n      ids: ['4054:1']\r\n    },\r\n    {\r\n      name: '定位01-05',\r\n      ename: 'dwgy',\r\n      ids: ['4055:1:1']\r\n    },\r\n    {\r\n      name: '定位05-10',\r\n      ename: 'dwgy',\r\n      ids: ['4055:1:2']\r\n    },\r\n    {\r\n      name: '冠亚组合',\r\n      ename: 'gyhz',\r\n      recentType: [hz({range: [{start: 0, end: 1}, {start: 1, end: 2}], changeTitle: ['冠亚', ['亚军']], min: 11})],\r\n      ids: ['4050:2', '4051:1', '4052:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.K3]: [\r\n    {\r\n      name: '点数',\r\n      ename: 'diansu',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5050:1', '5051:1']\r\n    },\r\n    {\r\n      name: '三军',\r\n      ename: 'shanjun',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5052:1']\r\n    },\r\n    {\r\n      name: '围骰/全骰',\r\n      ename: 'wqshai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5053:1']\r\n    },\r\n    {\r\n      name: '长牌',\r\n      ename: 'changpai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5054:1']\r\n    },\r\n    {\r\n      name: '短牌',\r\n      ename: 'duanpai',\r\n      recentType: [hz({min: 10})],\r\n      ids: ['5055:1']\r\n    },\r\n    {\r\n      name: '颜色',\r\n      ename: 'yskd',\r\n      recentType: [color],\r\n      ids: ['5056:1']\r\n    },\r\n    {\r\n      name: '跨度',\r\n      ename: 'yskd',\r\n      recentType: [kd],\r\n      ids: ['5057:1']\r\n    }\r\n  ],\r\n  [LOTTERY_TYPES.HC6]: [\r\n    {\r\n      name: '特码',\r\n      ename: 'tema',\r\n      recentType: [],\r\n      ids: ['7015:1', '7001:1']\r\n    },\r\n    {\r\n      name: '特肖',\r\n      ename: 'texiao',\r\n      recentType: [],\r\n      ids: ['7007:1'],\r\n      subMethods: [\r\n        {s: false, name: '家禽', v: '1', oddIndex: 0, class: '', odd: '', noOdd: true, ids: ['7007:1']},\r\n        {s: false, name: '野兽', v: '2', oddIndex: 0, class: '', odd: '', noOdd: true, ids: ['7007:1']}\r\n      ]\r\n    },\r\n    {\r\n      name: '色波',\r\n      ename: 'sebo',\r\n      recentType: [],\r\n      ids: ['7005:1']\r\n    },\r\n    {\r\n      name: '正一码',\r\n      ename: 'zhengyima',\r\n      recentType: [],\r\n      ids: ['7009:1']\r\n    },\r\n    {\r\n      name: '正二码',\r\n      ename: 'zhengerma',\r\n      recentType: [],\r\n      ids: ['7010:1']\r\n    },\r\n    {\r\n      name: '正三码',\r\n      ename: 'zhengshanma',\r\n      recentType: [],\r\n      ids: ['7011:1']\r\n    },\r\n    {\r\n      name: '正四码',\r\n      ename: 'zhengshima',\r\n      recentType: [],\r\n      ids: ['7012:1']\r\n    },\r\n    {\r\n      name: '正五码',\r\n      ename: 'zhengwuma',\r\n      recentType: [],\r\n      ids: ['7013:1']\r\n    },\r\n    {\r\n      name: '正六码',\r\n      ename: 'zhengliuma',\r\n      recentType: [],\r\n      ids: ['7014:1']\r\n    }\r\n  ]\r\n};\r\n\r\n// 匹配玩法对象\r\nexport function getMethodByIds(ids: string[], gameType: string) {\r\n  let curGameTypeMethods = methodsConfig[gameType] || [];\r\n  for (let i = 0; i < curGameTypeMethods.length; i++) {\r\n    if (curGameTypeMethods[i].ids.join('') === ids.join('')) {\r\n      return curGameTypeMethods[i];\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\n/**\r\n * 获取子玩法列表\r\n * @param {*} gameType 游戏类型（必须）\r\n */\r\nexport function getMethodsConfigByType(gameType: string): GameMethodMenu[] {\r\n  return methodsConfig[gameType];\r\n}\r\n\r\n/**\r\n * 根据游戏类型和玩法ID获取当前玩法在当前游戏类型玩法菜单中的位置\r\n * @param gameType 游戏类型\r\n * @param methodId 玩法ID\r\n */\r\nexport function getMethodPosByGameTypeAndId(gameType: string, methodId: number): number {\r\n  return (methodsConfig[gameType] || []).findIndex((m: GameMethodMenu) => {\r\n    return m.ids.find((id: string) => parseInt(id.split(':')[0], 10) === methodId)\r\n  })\r\n}\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { getMethodsConfigByType } from '../../game/gameMethods';\r\nimport { GameMethodMenu, GameSubMethodMenu } from '../../typings/games';\r\nimport MyScroll from '../my-scroll';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  curMenuIndex: number;\r\n  updateMethodMenuIndex(index: number): void;\r\n  methodMenuChangedCB(methodIds: GameMethodMenu): void;\r\n}\r\n\r\ninterface State {\r\n  menus: GameMethodMenu[];\r\n  subMenus: GameSubMethodMenu[];\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass MethodMenu extends Component<Props, object> {\r\n  state: State;\r\n  myScrollRef: any;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      menus: getMethodsConfigByType(this.props.gameType),\r\n      subMenus: []\r\n    }\r\n    this.myScrollRef = React.createRef();\r\n  }\r\n  componentDidMount() {\r\n    this.myScrollRef.current.refresh();\r\n  }\r\n  onMenuHandler = (menu: GameMethodMenu, index: number) => {\r\n    this.props.updateMethodMenuIndex(index);\r\n    this.props.methodMenuChangedCB(menu);\r\n  }\r\n  componentWillReceiveProps(nextProps: Props, nextState: State) {\r\n    this.myScrollRef.current.refresh();\r\n  }\r\n  render() {\r\n    let menus: GameMethodMenu[] = getMethodsConfigByType(this.props.gameType);\r\n    return (\r\n      <section className=\"method-menu-view\">\r\n        <section className=\"menu-wp\">\r\n          <MyScroll ref={this.myScrollRef}>\r\n            <nav className=\"menu-item-ls\">\r\n              {menus.map((menu, i) => (\r\n                <div key={i} className={`menu-item ${i === this.props.curMenuIndex ? 'selected' : ''}`} onClick={() => {this.onMenuHandler(menu, i)}}><span>{menu.name}</span></div>\r\n              ))}\r\n            </nav>\r\n          </MyScroll>\r\n        </section>\r\n        <section className=\"sub-menu-wp\">\r\n          <nav></nav>\r\n        </section>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MethodMenu;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { GameSubMethodMenu } from '../../typings/games';\r\nimport methodItems from '../../game/methodItems';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  subMethods?: GameSubMethodMenu[];\r\n  odds: any;\r\n  curSubMenuIndex: number;\r\n  updateSubMethods(method: GameSubMethodMenu): void;\r\n  updateSubMethodMenuIndex(index: number): void;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass SubMethodMenu extends Component<Props, object> {\r\n  methodItems: any = methodItems;\r\n  onSubMethodHandler = (subMethod: GameSubMethodMenu, index: number) => {\r\n    console.log(JSON.stringify(subMethod));\r\n    this.props.updateSubMethods(subMethod);\r\n    this.props.updateSubMethodMenuIndex(index);\r\n  }\r\n  parseId(id: string = ''): string {\r\n    return id.split(':')[0] || '';\r\n  }\r\n  getOddById(ids: string[], oddIndex: number) {\r\n    let methodOdds = this.props.odds[this.parseId(ids[0])] \r\n    return (methodOdds && methodOdds[oddIndex] && methodOdds[oddIndex].maxprize) || '';\r\n  }\r\n  render() {\r\n    let subMethods = this.props.subMethods;\r\n    return (\r\n      <section className={`sub-method-menu-view ${this.props.gameType}`}>\r\n        <ul className={`flex fw-w sub-method-item-ls`}>\r\n          {subMethods && subMethods.map((sm: GameSubMethodMenu, i: number) => (\r\n            <li className={`sub-method-item ${sm.class} ${i === this.props.curSubMenuIndex ? 'selected' : ''}`} key={i} onClick={this.onSubMethodHandler.bind(this, sm, i)}>\r\n              <div className=\"method-name\">{sm.name}</div>\r\n              {!sm.noOdd && <div className=\"odd\">{this.getOddById(sm.ids, sm.oddIndex)}</div>}\r\n            </li>  \r\n          ))}\r\n        </ul>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SubMethodMenu;\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport './row.styl';\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLDivElement>{\r\n  className?: string;\r\n}\r\n\r\nclass Row extends PureComponent<Props, object> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    return (<div className={`ds-row ${this.props.className || ''}`} onClick={this.props.onClick}>{this.props.children}</div>)\r\n  }\r\n}\r\n\r\nexport default Row;\r\n","import React, { PureComponent } from 'react';\r\n\r\nimport './col.styl';\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\r\n  className?: string;\r\n  span?: number;\r\n  gutter?: string;\r\n}\r\n\r\nclass Col extends PureComponent<Props, object> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n  }\r\n  getStyle() {\r\n    let styl: any = {}\r\n    if (this.props.gutter) {\r\n      styl.padding = this.props.gutter;\r\n    }\r\n    return styl;\r\n  }\r\n  render() {\r\n    return (<div className={`ds-col ${this.props.span ? 'col-'+ this.props.span : ''} ${this.props.className}`} style={this.getStyle()} onClick={this.props.onClick}>{this.props.children}</div>)\r\n  }\r\n}\r\n\r\nexport default Col;\r\n","import React, { PureComponent, MouseEvent } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport methodItems from '../../game/methodItems';\r\nimport { Row, Col } from '../grid';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { GameSubMethodMenu } from '../../typings/games';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameType: string;\r\n  curGameMethodItems: any[];\r\n  defaultInitMethodItemAmount: number;\r\n  updateMethodItem(i: number, j: number, k: number, selected?: boolean | undefined, value?: string | undefined): void;\r\n  updateMethodRow(i: number, j: number, selected?: boolean | undefined): void;\r\n  curSubMethod?: GameSubMethodMenu;\r\n}\r\n\r\n@inject('store')\r\n@observer\r\nclass Play extends PureComponent<Props, object> {\r\n  methodItems: any = methodItems;\r\n  onMethodItemHandler = (i: number, j: number, k: number, selected: boolean, methodTypeName: string, event: MouseEvent<HTMLElement>) => {\r\n    let amount = selected ? '' : String(this.props.defaultInitMethodItemAmount);\r\n    amount = ['rx_nzn', 'zux_q2', 'zux_q3', 'zx_q2', 'zx_q3'].includes(methodTypeName) ? '0' : amount;\r\n    this.props.updateMethodItem(i, j, k, !selected, amount);\r\n  }\r\n  onRowClickHandler = (i: number, j: number, selected?: boolean | undefined) => {\r\n    if (this.props.gameType === LOTTERY_TYPES.HC6) {\r\n      this.props.updateMethodRow(i, j, !selected);\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    this.forceUpdate();\r\n  }\r\n  render() {\r\n    let curGameMethodItems = this.props.curGameMethodItems;\r\n    return (\r\n      <article className={`play-view ${this.props.gameType}`}>\r\n        {curGameMethodItems.map((methodItem: any, i: number) => (\r\n          <div className={`method ${methodItem.layout} ${methodItem.class || ''} clear`} key={i} >\r\n            {methodItem.rows.map((row: any, j: number) => (\r\n              <Row key={j} className={`clear ${row.s ? 'selected': ''}`} onClick={() => this.onRowClickHandler(i, j, row.s)}>\r\n                <Col span={row.col} className={`flex pos-label ${row.hidePos ? 'hide' : ''}`} >\r\n                  <div className=\"pos-name\">{row.n}</div>\r\n                  {row.subpn && <div className=\"sub-pn\">{row.subpn}</div>}\r\n                  {row.posOdd === true && <div className=\"row-odd\">{row.odd}</div>}\r\n                </Col>\r\n                {row.vs.map((vsItem: any, k: number) => (\r\n                  <Col span={vsItem.col}  key={k} className={`method-item-col ${row.class || ''}`}>\r\n                    <div className={`method-item ${vsItem.class || ''} ${vsItem.s ? 'selected' : ''}`} onClick={(e: MouseEvent<HTMLElement>) => this.onMethodItemHandler(i, j, k, vsItem.s, methodItem.methodTypeName, e)}>\r\n                      <span className={`method-item-name`} n={vsItem.n}>\r\n                        {vsItem.class === 'icon' && vsItem.icons && vsItem.icons.map((iconNum: number, m: number) => (<span className={`icon-item icon-item-${iconNum}`} key={m}></span>))}\r\n                        {vsItem.class !== 'icon' && vsItem.n}\r\n                      </span>\r\n                      {row.noodd !== true && methodItem.posOdd !==true && <span className={`odd`}>{vsItem.odd || ''}</span>}\r\n                    </div>\r\n                  </Col>\r\n                ))}\r\n              </Row>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </article>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Play;\r\n","/**\r\n * 排列\r\n * @param n\r\n * @param m\r\n * @returns {Number}\r\n */\r\nfunction permutationChoice(n: number, m: number): number {\r\n  return factorial(n) / factorial(n - m);\r\n}\r\n\r\n/**\r\n * 组合\r\n * @param n\r\n * @param m\r\n * @returns {Number}\r\n * combineChoice\r\n */\r\nfunction C(n: number, m: number): number {\r\n  if (!n || !m || n < m || n < 0 || m < 0) return 0;\r\n  else if (n === m) return 1;\r\n  else if (m === 1) return n;\r\n  else {\r\n    return Math.ceil(permutationChoice(n, m) / factorial(m));\r\n  }\r\n}\r\n\r\n/**\r\n * [factorial description]\r\n * @param  {[type]} n [description]\r\n * @return {[type]}   [description]\r\n */\r\nfunction factorial(n: number): number {\r\n  if (n === 0) return 1;\r\n  return n * factorial(n - 1);\r\n}\r\n\r\n// repeat a string s t times\r\n// let repeat = (s: string, t: number) => {\r\n//   if (typeof s.repeat === 'function') return s.repeat(t)\r\n//   let r = ''\r\n//   while (t > 0) {\r\n//     r += s\r\n//     t--\r\n//   }\r\n//   return r\r\n// }\r\n\r\n// remove duplicate in a string by split by i\r\n// @params o 重复号的判断加入是否排序后比较相等\r\nlet removeDuplicate = (s: string, i: string, join: string, o: string, l: string) => {\r\n  let has = false\r\n  return { s: s.split(i).filter((n: string, i: number, arr: string[]) => {\r\n    if (!n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g'))) return false\r\n    return i === arr.findIndex((nn: string) => !o ? nn === n : (nn.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).sort((a: any, b: any) => a - b).join('') === (n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).sort((a: any, b: any) => a - b).join('')) || !(has = true)\r\n  }).join(join || ' '), has: has }\r\n}\r\n\r\n// let padStart = (s: string, l: number, w: string) => {\r\n//   s += ''\r\n//   while (s.length < l) {\r\n//     s = w + s\r\n//   }\r\n//   if (s.length > l) s = s.slice(s.length - l)\r\n//   return s\r\n// }\r\n\r\nlet isPrime = (n: number) => {\r\n  if (n <= 3) { return n > 1 }\r\n  if (n % 2 === 0 || n % 3 === 0) { return false }\r\n  for (let i = 5; i * i <= n; i += 6) {\r\n    if (n % i === 0 || n % (i + 2) === 0) { return false }\r\n  }\r\n  return true\r\n}\r\n\r\n// 空值判断\r\nlet empty = (value: string) => value.match(/^[\\s\\t\\r]*$/)\r\n\r\n/*\r\nvalue: 输入值\r\nN: 一注的长度\r\nr: 最大相同数字的长度\r\nl: 一个号码的长度 如12345有5个号码, 010203有3个号码, 号码长度为2\r\n */\r\nlet N = (value: string, N: number, r: number, l: number, max: number, min: number) => empty(value) ? [] : value.split(' ').filter(n => n.length === N).filter((n: string) => {\r\n  return (typeof r !== 'number') || r === Object.values((n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).reduce((p: any, na: any) => {\r\n    if (p[na] !== undefined) p[na] += 1\r\n    else p[na] = 1\r\n    if ((max !== undefined && parseInt(na) > max) || (min !== undefined && parseInt(na) < min)) p[na] = r + 1\r\n    return p\r\n  }, {})).sort((a: any, b: any) => b - a)[0]\r\n})\r\n\r\n// 最大重复号码为r 或小于 r\r\n// let ON = (value: string, N: number, r: number, l: number, max: number, min: number) => empty(value) ? [] : value.split(' ').filter(n => n.length === N).filter((n: string) => {\r\n//   return (typeof r !== 'number') || r >= Object.values((n.match(new RegExp('\\\\d{' + (l || 1) + '}', 'g')) || []).reduce((p: any, na: any) => {\r\n//     if (p[na] !== undefined) p[na] += 1\r\n//     else p[na] = 1\r\n//     if ((max !== undefined && parseInt(na) > max) || (min !== undefined && parseInt(na) < min)) p[na] = r + 1\r\n//     return p\r\n//   }, {})).sort((a: any, b: any) => b - a)[0]\r\n// })\r\n\r\n// 数组内各长度相乘\r\nlet P = (nsl: number[]): number => {\r\n  let n = 1\r\n  nsl.forEach((nl: number) => {\r\n    n *= nl\r\n  })\r\n  return n\r\n}\r\n\r\n// 数组内各长度相加\r\nlet A = (nsl: number[]): number => {\r\n  let n = 0\r\n  nsl.forEach((nl: number) => {\r\n    n += nl\r\n  })\r\n  return n\r\n}\r\n\r\nexport {\r\n  N,\r\n  // ON,\r\n  P,\r\n  A,\r\n  C,\r\n  removeDuplicate,\r\n}\r\n","import { /*N,*/ P, A, C } from './base'\r\ninterface Params {\r\n  nsl: number[];\r\n  ns?: any[];\r\n  repeatCount?: number;\r\n}\r\n\r\nexport default {\r\n  '1250:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1251:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1252:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1253:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1254:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1256:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1257:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1258:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1259:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1273:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1274:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1275:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '1276:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  \r\n  // 11x5\r\n  '2050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2050:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2053:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '2054:1:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  '2054:1:2'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 2)\r\n  },\r\n  '2054:1:3'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 3)\r\n  },\r\n  '2054:1:4'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 4)\r\n  },\r\n  '2054:1:5'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 5)\r\n  },\r\n  '2054:1:6'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 6)\r\n  },\r\n  '2054:1:7'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 7)\r\n  },\r\n  '2054:1:8'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 8)\r\n  },\r\n  '2055:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 2)\r\n  },\r\n  '2056:1'({nsl}: Params) {\r\n    return C(nsl && nsl[0], 3)\r\n  },\r\n  '2057:1'({nsl, repeatCount}: Params) {\r\n    return P(nsl) - (repeatCount || 0);\r\n  },\r\n  '2058:1'({ns}: Params) {\r\n    let n = 0;\r\n    if (ns) {\r\n      ns[0] && ns[0][0] && ns[0].forEach((f: number) => {\r\n        ns[1] && ns[1][0] && ns[1].forEach((s: number) => {\r\n          ns[2] && ns[2][0] && ns[2].forEach((t: number) => {\r\n            if (f !== s && f !== t && s !== t) n++;\r\n          })\r\n        })\r\n      });\r\n    }\r\n    return n;\r\n  },\r\n\r\n  // PK10\r\n  '4050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4050:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4053:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4054:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:2'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:3'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:4'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '4055:1:5'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n\r\n  // K3\r\n  '5050:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5051:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5052:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5053:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5054:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5055:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5056:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  '5057:1'({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n\r\n  // 六合彩\r\n  // 特码\r\n  '7001:1' ({nsl}: Params) {\r\n    return C(nsl[0], 1)\r\n  },\r\n  // 正码\r\n  '7006:1' ({nsl}: Params) {\r\n    return C(nsl[0], 1)\r\n  },\r\n  // 特肖\r\n  '7007:1' ({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  // 波色\r\n  '7005:1' ({nsl}: Params) {\r\n    return A(nsl)\r\n  },\r\n  // 一肖\r\n  '7008:1' ({nsl}: Params) {\r\n    return C(A(nsl), 1)\r\n  },\r\n  // 2连肖\r\n  '7002:1' ({nsl}: Params) {\r\n    return C(A(nsl), 2)\r\n  },\r\n  // 3连肖\r\n  '7003:1' ({nsl}: Params) {\r\n    return C(A(nsl), 3)\r\n  },\r\n  // 4连肖\r\n  '7004:1' ({nsl}: Params) {\r\n    return C(A(nsl), 4)\r\n  },\r\n  // '正一码'\r\n  '7009:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正二码'\r\n  '7010:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正三码'\r\n  '7011:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正四码'\r\n  '7012:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正五码'\r\n  '7013:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正六码'\r\n  '7014:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '特码'\r\n  '7015:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '正特和值'\r\n  '7016:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  },\r\n  // '尾数'\r\n  '7017:1' ({nsl}: Params) {\r\n    return C(nsl && nsl[0], 1)\r\n  }\r\n}","\r\n/**\r\n * 计算重复元素的个数\r\n * @param data \r\n */\r\nexport function countRepeat(data: any[]): number {\r\n  if (data.length < 1) return 0;\r\n  let temp = (data.join(',').split(',') || []).filter((num) => num.length > 0);\r\n  return temp.length - Array.from(new Set(temp)).length;\r\n}\r\n","import React, { Component, ChangeEvent } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { Button, Toast, Modal } from 'antd-mobile';\r\nimport CoinSet from '../coin-set';\r\nimport APIs from '../../http/APIs';\r\nimport calc from '../../game/calc';\r\nimport { countRepeat } from '../../utils/game';\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  gameId: number;\r\n  gameType: string;\r\n  curIssue?: string;\r\n  betCount: number;\r\n  amount: number;\r\n  curGameMethodItems: any[];\r\n  defaultInitMethodItemAmount: number;\r\n  updateDefaultInitMethodItemAmount(amount: number): void;\r\n  orderFinishCB(status: boolean): void;\r\n  resetSelectedOfAllMethodItem(): void;\r\n}\r\n\r\ninterface DataMethodItem {\r\n  id: string;\r\n  rows: any[];\r\n  methodTypeName?: string;\r\n  repeatCount: number;\r\n}\r\n\r\ninterface State {\r\n  amount: number;\r\n  showCoinSet: boolean;\r\n}\r\n\r\nconst ORDER_BAR_CONTAINER_CLASS = 'order-bar-container';\r\nconst CALC_BET_NEED_COMPUTED_REPEAT = ['zx_q2', 'zx_q3'];\r\n@inject('store')\r\n@observer\r\nclass OrderBar extends Component<Props, object> {\r\n  state: State;\r\n  calc: any = calc;\r\n  orderBarContainer: HTMLDivElement;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      amount: this.props.defaultInitMethodItemAmount,\r\n      showCoinSet: false\r\n    }\r\n    this.orderBarContainer = document.createElement('div');\r\n    this.orderBarContainer.className = ORDER_BAR_CONTAINER_CLASS;\r\n  }\r\n  coinChoosed = (value: string) => {\r\n    const amount: number = value === 'all' ? parseInt(this.props.store.user.balance, 10): parseInt(value, 10);\r\n    this.setState({amount});\r\n    this.props.updateDefaultInitMethodItemAmount(amount);\r\n  }\r\n  onResetHandler = () => {\r\n    Modal.alert(' ', '您确定要重置选中的投注？',[{ text: '取消' }, { text: '确定', onPress: () => this.props.resetSelectedOfAllMethodItem() }]);\r\n  }\r\n  onOrderHandler = () => {\r\n    this.setState({showCoinSet: false});\r\n    this.order();\r\n  }\r\n  validate(params: any): boolean {\r\n    if (!params.issue) {\r\n      Toast.fail('获取游戏期号失败，请刷新后重试！');\r\n      return false;\r\n    } else if(!params.betList || params.betList.length <= 0) {\r\n      return false;\r\n    } else if(params.totMoney <= 0) {\r\n      this.setState({showCoinSet: true});\r\n      Toast.fail('请输入金额！');\r\n      return false;\r\n    } else if (!this.validateLimit(params.lotteryId, params.limitLevel, this.state.amount)) {\r\n      return false;  \r\n    } else if (params.errorMsg) {\r\n      Toast.fail(params.errorMsg);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  validateHc6(params: any): boolean {\r\n    if (!params.issue) {\r\n      Toast.fail('获取游戏期号失败，请刷新后重试！');\r\n      return false;\r\n    } else if(!params.items || params.items.length <= 0) {\r\n      return false;\r\n    } else if(params.totalmoney <= 0) {\r\n      this.setState({showCoinSet: true});\r\n      Toast.fail('请输入金额！');\r\n      return false;\r\n    } else if (!this.validateLimit(params.gameid, params.limitLevel, this.state.amount)) {\r\n      return false;\r\n    } else if (params.errorMsg) {\r\n      Toast.fail(params.errorMsg);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  validateLimit(gameId: number, level: number, amount: number) {\r\n    let limit = this.props.store.game.getLimitLevelData(gameId, level);\r\n    if (limit) {\r\n      if (amount < limit.minAmt || amount > limit.maxAmt) {\r\n        Toast.fail(amount < limit.minAmt ? '您输入的金额不能低于最低限红' : '您输入的金额超过最高限红');\r\n        return false;\r\n      } \r\n    }\r\n    return true;\r\n  }\r\n  getParams(): object {\r\n    let props = this.props;\r\n    let curGameMethodItems = props.curGameMethodItems;\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    let params: any = {\r\n      lotteryId: props.gameId,\r\n      issue: props.curIssue,\r\n      totProjs: 0,\r\n      totMoney: 0,\r\n      isusefree: 0,\r\n      betList: [],\r\n      isFastBet: 1,\r\n      limitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    };\r\n    let pos: string = '';\r\n    let val: string = '';\r\n    let content: string = '';\r\n    let betCount: number = 0;\r\n    curGameMethodItems.forEach((methodItem: any) => {\r\n      if (['rx_nzn'].includes(methodItem.methodTypeName)) {\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        content = methodItem.rows[0].nc.join(',');\r\n        params.betList.push({methodId: methodItem.id.split(':')[0], projs: 1, money: params.totMoney, content});\r\n        params.totProjs += params.betList.length;\r\n        if (content.split(',').length > 8) {\r\n          params.errorMsg = '该玩法一个方案最多选择8个号码！';\r\n        }\r\n      } else if (['zux_q2', 'zux_q3'].includes(methodItem.methodTypeName)) {\r\n        // 组选\r\n        let nc = methodItem.rows.map((row: any) => {\r\n          return row.nc;\r\n        })[0];\r\n        let contents: any[] = [];\r\n        let param = {\r\n          methodId: methodItem.id.split(':')[0],\r\n          projs: 1,\r\n          money: this.state.amount\r\n        }\r\n        for (let i = 0; i <= nc.length - 1; i++) {\r\n          for (let j = i + 1; j <= nc.length - 1; j++) {\r\n            if (['zux_q2'].includes(methodItem.methodTypeName)) {\r\n              contents.push(Object.assign({\r\n                content: `${nc[i]},${nc[j]}`\r\n              }, param));\r\n            }\r\n            if (['zux_q3'].includes(methodItem.methodTypeName)) {\r\n              for (let k = i + 2; k <= nc.length - 1; k++) {\r\n                if (nc[j] >= nc[k]) continue;\r\n                contents.push(Object.assign({\r\n                  content: `${nc[i]},${nc[j]},${nc[k]}`\r\n                }, param));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        params.betList.push(...contents);\r\n        params.totProjs += contents.length;\r\n      } else if (['zx_q2', 'zx_q3'].includes(methodItem.methodTypeName)) {\r\n        // 直选 前二、三\r\n        let nc = methodItem.rows.map((row: any) => {\r\n          return row.nc;\r\n        });\r\n        let contents: any[] = [];\r\n        let param = {\r\n          methodId: methodItem.id.split(':')[0],\r\n          projs: 1,\r\n          money: this.state.amount\r\n        }\r\n        for (let i = 0; i < nc.length; i++) {\r\n          for (let j = 0; j < nc[i].length; j++) {\r\n            if (!nc[i + 1]) continue;\r\n            for (let k = 0; k < nc[i + 1].length; k++) {\r\n              if (nc[i][j] === nc[i + 1][k]) continue;\r\n              if (nc.length >= 3) {\r\n                if (!nc[i + 2]) continue;\r\n                for (let m = 0; m < nc[i + 2].length; m++) {\r\n                  if (nc[i + 1][k] === nc[i + 2][m] || nc[i][j] === nc[i + 2][m]) continue;  \r\n                  contents.push(Object.assign({\r\n                    content: `${nc[i][j]},${nc[i + 1][k]},${nc[i + 2][m]}`\r\n                  }, param));\r\n                }\r\n              } else {\r\n                contents.push(Object.assign({\r\n                  content: `${nc[i][j]},${nc[i + 1][k]}`\r\n                }, param));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        betCount = this.calcBet();\r\n        params.totMoney = this.state.amount * betCount;\r\n        params.betList.push(...contents);\r\n        params.totProjs += contents.length;\r\n      } else {\r\n        methodItem.rows.forEach((row: any) => {\r\n          row.vs.forEach((vsItem: any) => {\r\n            if (vsItem.s) {\r\n              params.totMoney += this.state.amount; // parseInt(vsItem.amt, 10);\r\n              params.totProjs++;\r\n              pos = row.nonasv ? '' : row.p || row.n;\r\n              val = vsItem.p ? (vsItem.p + '-' + (vsItem.pv || vsItem.n)) : (vsItem.pv || vsItem.n)\r\n              content = pos ? pos + '-' + val : val;\r\n              params.betList.push({methodId: methodItem.id.split(':')[0], projs: 1, money: this.state.amount, content});\r\n            }\r\n          });\r\n        });\r\n      }\r\n    });\r\n    return params;\r\n  }\r\n  getParamsHc6() {\r\n    let props = this.props;\r\n    let curGameMethodItems = props.curGameMethodItems;\r\n    let curGameLimitLevel = props.store.game.getGameLimitLevelByGameId(props.gameId);\r\n    let params: any = {\r\n      gameid: props.gameId,\r\n      issue: props.curIssue,\r\n      totalnums: 0, // 总注数\r\n      totalmoney: 0,\r\n      type: 1, // 类型：1-投注；2-追号\r\n      isusefree: 0, // 是否使用优惠券，0-否，1-是\r\n      items: [],\r\n      trace: '',\r\n      isJoinPool: 0,\r\n      isFastBet: 1,\r\n      limitLevel: (curGameLimitLevel && curGameLimitLevel.level) || 1\r\n    };\r\n    let items: any[] = [];\r\n    let totalCount = 0;\r\n    curGameMethodItems.forEach((methodItem: any) => {\r\n      methodItem.rows.forEach((row: any) => {\r\n        console.log('count=', this.calcBet(), methodItem.id)\r\n        if (methodItem.calcMode === 'row') {\r\n          if (row.s) {\r\n            items.push({\r\n              methodid: methodItem.id.split(':')[0],\r\n              type: 1,\r\n              pos: '',\r\n              codes: row.pv || row.n,\r\n              count: 1,\r\n              times: this.state.amount,\r\n              money: this.state.amount,\r\n              mode: 1,\r\n              userpoint: '0.0000'\r\n            });\r\n            totalCount += 1;   \r\n          }\r\n        } else {\r\n          row.vs.forEach((vsItem: any) => {\r\n            if (vsItem.s) {\r\n              items.push({\r\n                methodid: methodItem.id.split(':')[0],\r\n                type: 1,\r\n                pos: vsItem.pos,\r\n                codes: vsItem.p ? (vsItem.p + '-' + (vsItem.pv || vsItem.n)) : (vsItem.pv || vsItem.n),\r\n                count: 1,\r\n                times: this.state.amount,\r\n                money: this.state.amount,\r\n                mode: 1,\r\n                userpoint: '0.0000'\r\n              });\r\n              totalCount += 1;            \r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n    params.totalmoney = items.length * this.state.amount;\r\n    params.totalnums = totalCount;\r\n    params.items = JSON.stringify(items);\r\n    return params;\r\n  }\r\n  calcBet() {\r\n    let curGameMethodItems = this.props.curGameMethodItems;\r\n    let methodList: DataMethodItem[] = [];\r\n    let method: any;\r\n    let betCount: number = 0;\r\n\r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n      gameMethodItem.rows.forEach((row: any) => {\r\n        method.rows.push(row.nc.slice(0));\r\n      });\r\n      methodList.push(method);\r\n    });\r\n    \r\n    // 计算重复数\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (CALC_BET_NEED_COMPUTED_REPEAT.includes(gameMethodItem.methodTypeName)) {\r\n        gameMethodItem.repeatCount = countRepeat(methodList.map((methodItem: DataMethodItem) => methodItem.id === gameMethodItem.id ? methodItem.rows : []));\r\n      }\r\n    });\r\n    \r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (!['zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        methodList = methodList.map((methodItem: DataMethodItem) => {\r\n          if (gameMethodItem.id === methodItem.id) {\r\n            methodItem.rows = methodItem.rows.map((row: any) => row.length);\r\n          }\r\n          methodItem.repeatCount = gameMethodItem.repeatCount;\r\n          return methodItem;\r\n        });\r\n      }\r\n    });\r\n\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (gameMethodItem.calcMode === 'row') {  \r\n        methodList = [];\r\n        method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n        gameMethodItem.rows.forEach((row: any) => {\r\n          if (row.s) method.rows.push(row.pv || row.n);\r\n        });\r\n        method.rows = [method.rows.length];\r\n        methodList.push(method);\r\n      }\r\n    });\r\n\r\n    // 计算总注数\r\n    methodList.forEach((methodItem: DataMethodItem) => {\r\n      betCount += this.calc[methodItem.id]({nsl: methodItem.rows, ns: methodItem.rows, repeatCount: methodItem.repeatCount});\r\n    });\r\n\r\n    return betCount;\r\n  }\r\n  order() {\r\n    const isHc6 = this.isHc6();\r\n    const params = this[isHc6 ? 'getParamsHc6' : 'getParams']();\r\n    if (!this[isHc6 ? 'validateHc6' : 'validate'](params)) {\r\n      return null;\r\n    }\r\n    Toast.loading('投注中...', 0);\r\n    const data = isHc6 ? params : { betData: JSON.stringify(params) };\r\n    setTimeout(Toast.hide, 30000);\r\n    APIs[isHc6 ? 'booking' : 'bet'](data).then(({success, msg}: any) => {\r\n      this.resetAmount();\r\n      Toast.hide();\r\n      if (success === 1) {\r\n        Toast.success('投注成功', 2);\r\n        this.props.store.user.updateBalance();\r\n        this.props.orderFinishCB(true);\r\n      } else {\r\n        Toast.fail(msg || '投注失败');\r\n        this.props.orderFinishCB(false);\r\n      }\r\n    }).catch(() => {\r\n      Toast.hide();\r\n    });\r\n  }\r\n  onFocusHandler = () => {\r\n    this.setState({showCoinSet: true});\r\n  }\r\n  onAmountChanged = (event: ChangeEvent<HTMLInputElement>) => {\r\n    let value = event.target.value.trim();\r\n    let eType  = event.type;\r\n    if (value.length <= 0) {\r\n      value = '0';\r\n    }\r\n    console.log('type=', eType);\r\n    if (!/^\\d*$/g.test(value)) {\r\n      value = String(this.props.defaultInitMethodItemAmount);\r\n    }\r\n    this.setState({amount: parseInt(value, 10)});\r\n    this.props.updateDefaultInitMethodItemAmount(parseInt(value, 10));\r\n  }\r\n  onBlurHandler =  (event: ChangeEvent<HTMLInputElement>) => {\r\n    let value = event.target.value.trim();\r\n    if (!/^\\d+$/g.test(value)) {\r\n      value = '-1';\r\n    }\r\n    this.setState({amount: parseInt(value, 10)});\r\n    this.props.updateDefaultInitMethodItemAmount(parseInt(value, 10));\r\n  }\r\n  componentDidMount() {\r\n    document.body.appendChild(this.orderBarContainer);\r\n  }\r\n  componentWillUnmount() {\r\n    document.body.removeChild(this.orderBarContainer);\r\n  }\r\n  resetAmount() {\r\n    this.setState({amount: 0});\r\n    this.props.updateDefaultInitMethodItemAmount(0);\r\n  }\r\n  isHc6() {\r\n    return this.props.gameType === LOTTERY_TYPES.HC6;\r\n  }\r\n  render() {\r\n    let elements = (\r\n      <section className=\"order-bar-view\">\r\n        {this.state.showCoinSet && <section>{<CoinSet coinChoosed={this.coinChoosed} value={this.state.amount} />}</section>}\r\n        <section className=\"flex ai-c jc-sb order-sec\">\r\n          <div>\r\n            <div className=\"flex ai-c fast-amount-wp\">\r\n              <input className=\"fast-amount\" type=\"tel\" value={this.state.amount <= 0 ? '': this.state.amount} onChange={this.onAmountChanged} onBlur={this.onBlurHandler} onFocus={this.onFocusHandler} maxLength={9} placeholder=\"请输入快捷金额\" />\r\n            </div>  \r\n          </div>\r\n          {/* <div className=\"txt-r\">\r\n            已选 <span className=\"txt-red\">{this.props.betCount}</span> 注 共 <span className=\"txt-red\">{(this.props.amount).toFixed(3)} </span>元\r\n          </div> */}\r\n          <div className=\"flex ai-c jc-e btns-wp\">\r\n            <Button type=\"primary\" className=\"btn-reset\" disabled={this.props.betCount <= 0} onClick={this.onResetHandler}>重置</Button>\r\n            <Button type=\"primary\" className=\"btn-order\" disabled={this.props.betCount <= 0} onClick={this.onOrderHandler}>一键下单</Button>\r\n          </div>\r\n        </section>\r\n      </section>\r\n    )\r\n    return ReactDOM.createPortal(elements, this.orderBarContainer);\r\n  }\r\n}\r\n\r\nexport default OrderBar;\r\n","import { createContext } from 'react';\r\n\r\nexport interface GameCommonDataType {\r\n  gameId: number;\r\n  gameType: string;\r\n}\r\n\r\nexport const GameCommonDataContext = createContext<GameCommonDataType>({\r\n  gameId: -1,\r\n  gameType: ''\r\n});\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport { Button, Modal, Icon } from 'antd-mobile';\r\n\r\nimport './index.styl';\r\n\r\ninterface Props {\r\n  store?: any;\r\n  isShowMask?: boolean;\r\n  isShow: boolean;\r\n  gameId: number;\r\n  limitLevelList: LimitLevelItem[];\r\n  isShowLimitSetDialogClose: boolean; // 是否显示弹出框关闭按钮\r\n  onLimitChoiceCB(level: number): void;\r\n  onCloseHandler?: () => void;\r\n}\r\n\r\ninterface State {\r\n  limitLevelList: LimitLevelItem[];\r\n  curLimitIndex: number;\r\n  level: number;\r\n}\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass LimitSetDialog extends Component<Props, object> {\r\n  state: State;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      limitLevelList: [],\r\n      curLimitIndex: 0,\r\n      level: 1\r\n    }\r\n  }\r\n  componentWillMount() {\r\n    this.init(this.props);\r\n  }\r\n  init(props: Props) {\r\n    let level = ((props.store.game.getGameLimitLevelByGameId(props.gameId) || {}).level) || 1;\r\n    let limitItem = props.store.game.getLimitListItemById(props.gameId);\r\n    let limitLevelList: LimitLevelItem[] = limitItem ? limitItem.kqPrizeLimit : [];\r\n    let index = limitLevelList.findIndex((item) => item.level === level);\r\n    this.setState({\r\n      limitLevelList,\r\n      curLimitIndex: index,\r\n      level\r\n    });\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    this.init(nextProps);\r\n  }\r\n  onLimitChoiceHandler = (level: number, index: number) => {\r\n    this.setState({curLimitIndex: index, level});\r\n  }\r\n  onCloseHandler = () => {\r\n    if (this.props.onCloseHandler) {\r\n      this.props.onCloseHandler();\r\n    }\r\n  }\r\n  onConfirmHandler = () => {\r\n    this.props.onLimitChoiceCB(this.state.level);\r\n  }\r\n  render() {\r\n    return (\r\n      <section className=\"limit-set-dialog\">\r\n         <Modal\r\n          className=\"limit-set-modal\"\r\n          visible={true}\r\n          maskClosable={false}\r\n          title=\"\"\r\n        >\r\n          <header className=\"flex ai-c jc-c limit-set-header\">限红设置{this.props.isShowLimitSetDialogClose && <Icon type=\"cross\" onClick={this.onCloseHandler} />}</header>\r\n          <div className=\"bg-white limit-set-content\">\r\n            <section className=\"flex jc-c limit-list\">\r\n              {this.state.limitLevelList.map((item: LimitLevelItem, i: number) => (\r\n                <Button key={i} className={`flex jc-c ai-c btn-limit-amount ${this.state.curLimitIndex === i ? 'selected' : ''}`} onClick={()=>this.onLimitChoiceHandler(item.level, i)}>{item.minAmt}-{item.maxAmt}</Button>\r\n              ))}\r\n            </section>\r\n            <div><Button className=\"flex jc-c ai-c btn-confirm\" onClick={this.onConfirmHandler}>确定</Button></div>\r\n            <div className=\"limit-explain-tip\">\r\n              <p>限红说明：</p>\r\n              <p>当切换不同的限红模式时，再次投注同一彩种，需至少间隔1期再投注。</p>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LimitSetDialog;\r\n","import React, { Component } from 'react';\r\nimport { inject, observer } from 'mobx-react';\r\nimport GameHeader from 'comp/game-header';\r\nimport MethodMenu from 'comp/method-menu';\r\nimport SubMethodMenu from 'comp/sub-method-menu';\r\nimport Play from 'comp/play';\r\nimport OrderBar from 'comp/order-bar';\r\nimport { RouteComponentProps } from \"react-router-dom\";\r\nimport { getGameTypeByGameId } from '../../game/games';\r\nimport calc from '../../game/calc';\r\nimport { getMethodsConfigByType, getMethodPosByGameTypeAndId } from '../../game/gameMethods';\r\nimport { GameMethodMenu, GameSubMethodMenu } from '../../typings/games';\r\nimport methodItems from '../../game/methodItems';\r\nimport APIs from '../../http/APIs';\r\nimport { countRepeat } from '../../utils/game';\r\nimport { GameCommonDataContext } from '../../context/gameContext';\r\nimport Ludan from 'comp/ludan';\r\nimport { getLunDanTabByName, getTabsByType, getLudanTabByTypeAndName } from '../../utils/ludan';\r\nimport LimitSetDialog from 'comp/limit-set-dialog';\r\nimport Socket from '../../socket';\r\nimport Bus from '../../utils/eventBus'\r\nimport { LOTTERY_TYPES } from '../../utils/config';\r\nimport { ANIMALS_POULTRY, ANIMALS_BEAST } from '../../game/hc6';\r\nimport './index.styl';\r\nimport { getUrlParams } from '../../utils/common';\r\n\r\ninterface IProps {\r\n  store?: any;\r\n  gameType?: string;\r\n}\r\n\r\ninterface State {\r\n  id: number;\r\n  // gameType: string;\r\n  curIssue: string;\r\n  lastIssue: string;\r\n  curTime: number;\r\n  remainTime: number;\r\n  openNumbers: string[];\r\n  curMenuIndex: number; // 玩法菜单选中玩法的index\r\n  curMenuEname: string; // 玩法菜单选中玩法的英语名\r\n  curSubMenuIndex: number;\r\n  subMethods: GameSubMethodMenu[];\r\n  curSubMethod?: GameSubMethodMenu;\r\n  curGameMethodItems: any[];\r\n  odds: any;\r\n  issueList: any[];\r\n  defaultInitMethodItemAmount: number; // 默认初始投注金额\r\n  totalBetCount: number;  // 总注数\r\n  totalBetAmount: number; // 总投注金额\r\n  tabIndex: number; //  \r\n  maxColumns: number;\r\n  maxRows: number;\r\n  defaultMenu?: string;\r\n  // defaultSubMenu?: string;\r\n  isShowLudan: boolean;\r\n  isExpandLudan: boolean;\r\n  isShowLimitSetDialog: boolean;\r\n  limitLevelList: LimitLevelItem[];\r\n  isShowLimitSetDialogClose: boolean; // 是否显示弹出框关闭按钮\r\n}\r\n\r\ninterface DataMethodItem {\r\n  id: string;\r\n  rows: any[];\r\n  repeatCount: number;\r\n  methodTypeName: string;\r\n}\r\n\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\ntype Props = IProps & RouteComponentProps<MatchParams>;\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass Game extends Component<Props, object> {\r\n  id: number = 1;\r\n  gameType: string = 'ssc';\r\n  state: State;\r\n  methodItems: any = methodItems;\r\n  calc: any = calc;\r\n  mysocket?: Socket;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.id = parseInt(this.props.match.params.id || '1', 10);\r\n    this.gameType = getGameTypeByGameId(this.id);\r\n    let menus: GameMethodMenu[] = getMethodsConfigByType(this.gameType);\r\n    let limitItem = props.store.game.getLimitListItemById(this.id);\r\n    let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n    let curMenuIndex = bestLudan && getMethodPosByGameTypeAndId(this.gameType, bestLudan.methodId) || 0;\r\n    let curMenuEname = (menus && menus[curMenuIndex]).ename;\r\n    let ludanTab = getLudanTabByTypeAndName(this.gameType, curMenuEname, bestLudan && bestLudan.codeStyle);\r\n    let ludanMenus = getTabsByType(this.gameType, curMenuEname);\r\n    let gameLimitLevel = this.props.store.game.getGameLimitLevelByGameId(this.id); // 设置的限红数据\r\n    let curSubMenuIndex = this.gameType === LOTTERY_TYPES.HC6 ? -1 : 0;\r\n    this.state = {\r\n      id: 1,\r\n      curIssue: '',\r\n      lastIssue: '',\r\n      curTime: 0,\r\n      remainTime: 0,\r\n      openNumbers: [],\r\n      curMenuIndex,\r\n      curMenuEname,\r\n      curSubMenuIndex,\r\n      subMethods: [],\r\n      curSubMethod: undefined,\r\n      curGameMethodItems: this.getMethodItemsByIds((menus && menus[curMenuIndex].ids) || []),\r\n      odds: {},\r\n      issueList: [],\r\n      defaultInitMethodItemAmount: 0, //this.props.store.game.defaultInitBetAmount,\r\n      totalBetCount: 0,\r\n      totalBetAmount: 0,\r\n      tabIndex: 0,\r\n      maxColumns: 21,\r\n      maxRows: 6,\r\n      defaultMenu: (ludanTab && ludanTab.name) || '',\r\n      isShowLudan: ludanMenus && ludanMenus.length > 0,\r\n      isExpandLudan: false,\r\n      isShowLimitSetDialog: !gameLimitLevel,\r\n      limitLevelList: limitItem ? limitItem.kqPrizeLimit : [],\r\n      isShowLimitSetDialogClose: false\r\n    }\r\n    this.init();\r\n    Bus.emit('gameIdChanged', this.id);\r\n  }\r\n  init() {\r\n    this.getCurIssue(this.id);\r\n    this.getUserPoint(this.id);\r\n    this.getHistoryIssue(this.id);\r\n    // this.getLimitData(this.id);\r\n  }\r\n  getLoginData() {\r\n    let sessionData: any = sessionStorage.getItem('sessionData');\r\n    let agentCode = getUrlParams('agentCode');\r\n    let param = getUrlParams('param');\r\n    let data = {\r\n      agentCode,\r\n      param\r\n    };\r\n    if (!agentCode && !param && sessionData) {\r\n      data = JSON.parse(sessionData);\r\n    }\r\n    return data;\r\n  }\r\n  initSocket() {\r\n    this.mysocket = new Socket({\r\n      url: this.props.store.common.broadcaseWSUrl,\r\n      name: 'gameIndex',\r\n      receive: (data) => {\r\n        if (data.type === 'openWinCode') {\r\n          this.openWinCode(parseInt(data.content[0].lottId, 10), data.content[0]);\r\n        }\r\n        if (data.type === 'betNotify') {\r\n          Bus.emit('__pushBetRemind', data.content)\r\n        }\r\n      },\r\n      open: () => {\r\n        this.mysocket && this.mysocket.send(JSON.stringify(Object.assign({action: 'noauth'}, {})));\r\n      }\r\n    }, true);\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.store.common.broadcaseWSUrl) {\r\n      this.initSocket();\r\n    } else {\r\n      APIs.signIn(this.getLoginData()).then((data: any) => {\r\n        if (data.success > 0) {\r\n          this.props.store.common.setBroadcaseWSUrl(data.broadcaseWSUrl);\r\n          this.initSocket();\r\n        }\r\n      });\r\n    }\r\n    Bus.on('onSetLimit', this.onSetLimit);\r\n  }\r\n  onSetLimit = () => {\r\n    this.setState({isShowLimitSetDialog: !this.state.isShowLimitSetDialog, isShowLimitSetDialogClose: true, limitLevelList: this.props.store.game.getLimitDataOfKqByGameId(this.id) || []});\r\n  }\r\n  componentWillReceiveProps(nextProps: Props) {\r\n    // console.log(this.props.location.pathname, nextProps.location.pathname, '?????')\r\n    this.id = parseInt(nextProps.match.params.id || '1', 10);\r\n    this.gameType = getGameTypeByGameId(this.id);\r\n    Bus.emit('gameIdChanged', this.id);\r\n    if (this.props.match.params.id !== nextProps.match.params.id) {\r\n      let limitItem = this.props.store.game.getLimitListItemById(this.id);\r\n      let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n      let menus: GameMethodMenu[] = getMethodsConfigByType(this.gameType);\r\n      let curMenuIndex = bestLudan && getMethodPosByGameTypeAndId(this.gameType, bestLudan.methodId) || 0;\r\n      let curMenuEname = menus && menus[curMenuIndex].ename\r\n      let ludanTab = getLudanTabByTypeAndName(this.gameType, curMenuEname, bestLudan && bestLudan.codeStyle);\r\n      let ludanMenus = getTabsByType(this.gameType, curMenuEname);\r\n      let gameLimitLevel = this.props.store.game.getGameLimitLevelByGameId(this.id); // 设置的限红数据\r\n      let limitListItem = this.props.store.game.getLimitListItemById(this.id); \r\n      this.setState({\r\n        curMenuIndex,\r\n        curMenuEname,\r\n        curGameMethodItems: this.getMethodItemsByIds((menus && menus[curMenuIndex].ids) || []),\r\n        subMethods: (menus && menus[curMenuIndex].subMethods) || [],\r\n        defaultMenu: (ludanTab && ludanTab.name) || '',\r\n        isShowLudan: ludanMenus && ludanMenus.length > 0,\r\n        isShowLimitSetDialog: !gameLimitLevel,\r\n        limitLevelList: !gameLimitLevel ? (limitListItem ? limitListItem.kqPrizeLimit : []) : []\r\n      });\r\n      this.init();\r\n    }\r\n  }\r\n  openWinCode(id: number, openHistoryItem: any) {\r\n    if (id === this.id) {\r\n      let issueList = this.state.issueList;\r\n      issueList.unshift(openHistoryItem);\r\n      this.setState({\r\n        lastIssue: issueList[0].issue,\r\n        openNumbers: issueList[0].code.split(','),\r\n        issueList: issueList\r\n      });\r\n      this.getCurIssue(this.id);\r\n    }\r\n  }\r\n  // 获取当前玩法下面的子玩法列表\r\n  getMethodItemsByIds(ids: string[]) {\r\n    let mItems: any[] = [];\r\n    ids.forEach((id: string) => {\r\n      let items =  this.methodItems[id]();\r\n      items.rows = items.rows.map((row: any) => {\r\n        row.vs.map((vs: any) => {\r\n          if (typeof vs === 'object') {\r\n            vs.val = '';\r\n          }\r\n          return vs;\r\n        });\r\n        return row;\r\n      })\r\n      mItems.push(Object.assign({id}, items));\r\n    });\r\n    return mItems;\r\n  }\r\n\r\n  // 更新玩法菜单选中的index\r\n  updateMethodMenuIndex = (index: number) => {\r\n    this.setState({curMenuIndex: index});\r\n  }\r\n  // 更新玩法菜单选中的index\r\n  updateSubMethodMenuIndex = (index: number) => {\r\n    this.setState({curSubMenuIndex: index});\r\n  }\r\n  methodMenuChangedCB = (method: GameMethodMenu) => {\r\n    let curGameMethodItems = this.getMethodItemsByIds(method.ids || []);\r\n    let ludanMenus = getTabsByType(this.gameType, method.ename);\r\n    let limitItem = this.props.store.game.getLimitListItemById(this.id);\r\n    let bestLudan: BestLudanItem = limitItem && limitItem.bestLudan;\r\n    let ludanTab = getLudanTabByTypeAndName(this.gameType, method.ename, bestLudan && bestLudan.codeStyle);\r\n    let curSubMenuIndex = this.gameType === LOTTERY_TYPES.HC6 ? -1 : 0;\r\n    this.setState({\r\n      subMethods: method.subMethods || [],\r\n      curGameMethodItems,\r\n      totalBetCount: 0,\r\n      totalBetAmount: 0,\r\n      curSubMenuIndex,\r\n      curMenuEname: method.ename,\r\n      defaultMenu: (ludanTab && ludanTab.name) || '',\r\n      // defaultSubMenu: '',\r\n      isShowLudan: ludanMenus && ludanMenus.length > 0\r\n    }, this.updateOddsOfMethod);\r\n  }\r\n  updateSubMethods = (method: GameSubMethodMenu) => {\r\n    let curGameMethodItems;\r\n    if (this.gameType === LOTTERY_TYPES.HC6) {\r\n      curGameMethodItems = this.state.curGameMethodItems;\r\n      if (this.state.curMenuEname === 'texiao') {\r\n        curGameMethodItems = this.updateHC6TexiaoMethodItems(curGameMethodItems, method.v)\r\n      }\r\n    } else {\r\n      curGameMethodItems = this.getMethodItemsByIds(method.ids || []);\r\n    }\r\n    this.setState({\r\n      curSubMethod: method,\r\n      curGameMethodItems\r\n    }, this.calcBet);\r\n  }\r\n  // 更新选中的玩法项数据\r\n  updateMethodItem = (i: number, j: number, k: number, selected?: boolean | undefined, value?: string | undefined) => {\r\n    let methodItems = this.state.curGameMethodItems;\r\n    if (selected !== undefined) {\r\n      methodItems[i].rows[j].vs[k].s = selected;\r\n    }\r\n    if (value !== undefined) {\r\n      methodItems[i].rows[j].vs[k].amt = value;\r\n    }\r\n    this.setState({\r\n      curGameMethodItems: methodItems\r\n    }, this.calcBet);\r\n  }\r\n  updateMethodRow = (i: number, j: number, selected?: boolean | undefined) => {\r\n    let methodItems = this.state.curGameMethodItems;\r\n    if (selected !== undefined) {\r\n      methodItems[i].rows[j].s = selected;\r\n    }\r\n    this.setState({\r\n      curGameMethodItems: methodItems\r\n    }, this.calcBet);\r\n  }\r\n  // 更新当前游戏当前玩法相关的odd\r\n  updateOddsOfMethod(odds?: any) {\r\n    if (!odds) {\r\n      this.getUserPoint(this.id);\r\n      return null;\r\n    }\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n    let methodId: string = '';\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        methodId = methodItem.id.split(':')[0];\r\n        row.vs = row.vs.map((vsItem: any) => {\r\n          if (typeof vsItem === 'object') {\r\n            if (odds[methodId] && odds[methodId][vsItem.oddIndex || 0]) {\r\n              vsItem.odd = odds[methodId][vsItem.oddIndex || 0].maxprize;\r\n            }\r\n          }\r\n          return vsItem;\r\n        });\r\n        if (row.posOdd) {\r\n          row.odd =  odds[methodId][row.oddIndex || 0].maxprize;\r\n        }\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n    this.setState({curGameMethodItems});\r\n  }\r\n\r\n  // 更新默认初始下注金额\r\n  updateDefaultInitMethodItemAmount = (amount: number): void => {\r\n    this.setState({defaultInitMethodItemAmount: amount}, this.calcBet);\r\n  }\r\n  calcBet() {\r\n    let methodList: DataMethodItem[] = [];\r\n    let method: any;\r\n    let betCount: number = 0;\r\n    let totalAmount: number = 0;\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n\r\n    // 构造选择的号码集合，金额集合, 总金额\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        row.nc = [];\r\n        row.amtc = [];\r\n        row.tmc = 0;\r\n        row.vs.forEach((vsItem: any) => {\r\n          if (typeof vsItem === 'object') {\r\n            if (vsItem.s) {\r\n              row.nc.push(vsItem.n);\r\n              row.amtc.push(vsItem.amt);\r\n              row.tmc += parseInt(vsItem.amt || '0', 10);\r\n            }\r\n          }\r\n        });\r\n        totalAmount += row.tmc;\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n\r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      method = {id: gameMethodItem.id, methodTypeName: gameMethodItem.methodTypeName, rows: [], repeatCount: 0};\r\n      gameMethodItem.rows.forEach((row: any) => {\r\n        method.rows.push(row.nc.slice(0));\r\n      });\r\n      methodList.push(method);\r\n    });\r\n\r\n    // 计算重复数\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (['zx_q2', 'zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        gameMethodItem.repeatCount = countRepeat(methodList.map((methodItem: DataMethodItem) => methodItem.id === gameMethodItem.id ? methodItem.rows : []));\r\n      }\r\n    });\r\n    \r\n    // 构造注数计算数据格式\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      if (!['zx_q3'].includes(gameMethodItem.methodTypeName)) {\r\n        methodList = methodList.map((methodItem: DataMethodItem) => {\r\n          if (gameMethodItem.id === methodItem.id) {\r\n            methodItem.rows = methodItem.rows.map((row: any) => row.length);\r\n          }\r\n          methodItem.repeatCount = gameMethodItem.repeatCount;\r\n          return methodItem;\r\n        });\r\n      }\r\n    });\r\n\r\n    curGameMethodItems.forEach((gameMethodItem: any) => {\r\n      // if (['texiao'].includes(gameMethodItem.methodTypeName)) {\r\n      if (gameMethodItem.calcMode === 'row') {  \r\n        methodList = [];\r\n        method = {id: gameMethodItem.id, rows: [], repeatCount: 0};\r\n        gameMethodItem.rows.forEach((row: any) => {\r\n          if (row.s) {\r\n            method.rows.push(row.n || row.pv);\r\n          }\r\n        });\r\n        method.rows = [method.rows.length];\r\n        methodList.push(method);\r\n      }\r\n    });\r\n\r\n    // 计算总注数\r\n    methodList.forEach((methodItem: DataMethodItem) => {\r\n      betCount += this.calc[methodItem.id]({nsl: methodItem.rows, ns: methodItem.rows, repeatCount: methodItem.repeatCount});\r\n      // 任选，组选，直选金额计算\r\n      if (['rx_nzn', 'zux_q2', 'zux_q3', 'zx_q2', 'zx_q3'].includes(methodItem.methodTypeName)) {\r\n        totalAmount = betCount * this.state.defaultInitMethodItemAmount;\r\n      }\r\n    });\r\n\r\n    this.setState({totalBetCount: betCount, totalBetAmount: totalAmount});\r\n  }\r\n  // 重置所有选中玩法项\r\n  resetSelectedOfAllMethodItem = () => {\r\n    let curGameMethodItems = this.state.curGameMethodItems;\r\n    curGameMethodItems = curGameMethodItems.map((methodItem: any) => {\r\n      methodItem.rows = methodItem.rows.map((row: any) => {\r\n        row.s = false;\r\n        row.vs = row.vs.map((vsItem: any) => { \r\n          if (typeof vsItem === 'object') {\r\n            vsItem.s = false; vsItem.amt = ''; return vsItem; \r\n          }\r\n        });\r\n        return row;\r\n      });\r\n      return methodItem;\r\n    });\r\n    this.setState({curGameMethodItems, totalBetCount: 0, totalBetAmount: 0});\r\n  }\r\n  orderFinishCB = (status: boolean) => {\r\n    if (status) {\r\n      this.resetSelectedOfAllMethodItem();\r\n    }\r\n  }\r\n  getCurIssue = (gameid: number) => {\r\n    APIs.curIssue({gameid}).then((data: any) => {\r\n      if (data.success > 0) {\r\n        this.setState({\r\n          curIssue: data.issue,\r\n          curTime: data.current,\r\n          remainTime: Math.floor((data.saleend - data.current) / 1000) || (this.state.remainTime + 0.05)\r\n        })\r\n      } else {\r\n        this.setState({curIssue: ''});\r\n      }\r\n    });\r\n  }\r\n  getHistoryIssue(gameid: number) {\r\n    APIs.historyIssue({gameid}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        if (data.items.length > 0) {\r\n          this.setState({\r\n            lastIssue: data.items[0].issue,\r\n            openNumbers: data.items[0].code.split(','),\r\n            issueList: data.items\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n  getUserPoint(gameid: number) {\r\n    APIs.myNewPoint({gameid}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        this.setState({odds: data.items})\r\n        this.updateOddsOfMethod(data.items);\r\n      }\r\n    });\r\n  }\r\n\r\n  changeTabIndex = (idx: number) => {\r\n    this.setState({\r\n      tabIndex: idx\r\n    })\r\n  }\r\n\r\n  getLimitData(id: number) {\r\n    APIs.lottSets({lotteryIds: id, v: 1}).then((data: any) => {\r\n      if (data.success === 1) {\r\n        this.props.store.game.setLimitList([Object.assign({id}, data.data[id])]);\r\n        this.props.store.game.setLimitLevelList(data.data[id].kqPrizeLimit);\r\n      }\r\n    });\r\n  }\r\n  onLimitChoiceCB = (level: number) => {\r\n    this.props.store.game.updateGamesLimitLevel({gameId: this.id, level});\r\n    this.onCloseLimitChoiceHandler();\r\n  }\r\n  onCloseLimitChoiceHandler = () => {\r\n    this.setState({isShowLimitSetDialog: false});\r\n  }\r\n  componentWillUnmount() {\r\n    this.mysocket && this.mysocket.removeListen();\r\n    Bus.off('onSetLimit', this.onSetLimit);\r\n  }\r\n  onGameHeaderUpdateHandler = (data: any) => {\r\n    if (data.type === 'ludan') {\r\n      this.setState({isExpandLudan: data.data});\r\n    }\r\n  }\r\n  updateHC6TexiaoMethodItems(methodItems: any, subMethodMenuValue: string = '') {\r\n    const animals = subMethodMenuValue === '1' ? ANIMALS_POULTRY : ANIMALS_BEAST;\r\n    methodItems = methodItems.map((method: any) => {\r\n      method.rows = method.rows.map((row: any) => {\r\n        row.s = animals.includes(row.n);\r\n        return row;\r\n      })\r\n      return method;\r\n    });\r\n    return methodItems;\r\n  }\r\n  render() {\r\n    return (\r\n      <article className=\"game-view\">\r\n        <GameCommonDataContext.Provider value={{gameId: this.id, gameType: this.gameType}} >\r\n          <GameHeader \r\n            gameId={this.id}\r\n            gameType={this.gameType}\r\n            curIssue={this.state.curIssue}\r\n            lastIssue={this.state.lastIssue}\r\n            curTime={this.state.curTime}\r\n            remainTime={this.state.remainTime}\r\n            openNumbers={this.state.openNumbers}\r\n            getNewestIssue={this.getCurIssue}\r\n            isExpandLudan={this.state.isExpandLudan}\r\n            update={this.onGameHeaderUpdateHandler}\r\n          />\r\n          {this.state.isShowLudan && this.state.isExpandLudan &&\r\n            <Ludan \r\n              gameId={this.id} \r\n              gameType={this.gameType} \r\n              maxColumns={this.state.maxColumns} \r\n              maxRows={this.state.maxRows} \r\n              issueList={this.state.issueList.slice(0).reverse()} \r\n              methodMenuName={this.state.curMenuEname} \r\n              defaultMenu={this.state.defaultMenu} \r\n            />\r\n          }\r\n          <section className=\"game-main\">\r\n            <MethodMenu gameType={this.gameType} curMenuIndex={this.state.curMenuIndex} methodMenuChangedCB={this.methodMenuChangedCB} updateMethodMenuIndex={this.updateMethodMenuIndex}/>\r\n            {this.state.subMethods.length > 0 && \r\n              <SubMethodMenu \r\n                gameType={this.gameType} \r\n                curSubMenuIndex={this.state.curSubMenuIndex} \r\n                subMethods={this.state.subMethods} \r\n                odds={this.state.odds} \r\n                updateSubMethods={this.updateSubMethods} \r\n                updateSubMethodMenuIndex={this.updateSubMethodMenuIndex}\r\n              />\r\n            }\r\n            <Play \r\n              curGameMethodItems={this.state.curGameMethodItems} \r\n              gameType={this.gameType} \r\n              defaultInitMethodItemAmount={this.state.defaultInitMethodItemAmount}\r\n              updateMethodItem={this.updateMethodItem} \r\n              updateMethodRow={this.updateMethodRow}\r\n              curSubMethod={this.state.curSubMethod}\r\n            />\r\n            <OrderBar \r\n              gameId={this.id} \r\n              gameType={this.gameType} \r\n              curIssue={this.state.curIssue} \r\n              betCount={this.state.totalBetCount} \r\n              amount={this.state.totalBetAmount} \r\n              curGameMethodItems={this.state.curGameMethodItems} \r\n              defaultInitMethodItemAmount={this.state.defaultInitMethodItemAmount}\r\n              updateDefaultInitMethodItemAmount={this.updateDefaultInitMethodItemAmount} \r\n              orderFinishCB={this.orderFinishCB}\r\n              resetSelectedOfAllMethodItem={this.resetSelectedOfAllMethodItem}\r\n            />\r\n           \r\n          </section>\r\n        </GameCommonDataContext.Provider>\r\n        {this.state.isShowLimitSetDialog && this.props.store.game.limitList && this.props.store.game.limitList.length > 0 &&\r\n          <LimitSetDialog \r\n            isShow={this.state.isShowLimitSetDialog} \r\n            isShowLimitSetDialogClose={this.state.isShowLimitSetDialogClose} \r\n            gameId={this.id} \r\n            limitLevelList={this.state.limitLevelList} \r\n            onLimitChoiceCB={this.onLimitChoiceCB} \r\n            onCloseHandler={this.onCloseLimitChoiceHandler} \r\n          />\r\n        }\r\n      </article>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;\r\n"],"sourceRoot":""}